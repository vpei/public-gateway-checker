(function (root, factory) {(typeof module === 'object' && module.exports) ? module.exports = factory() : root.IpfsPublicGatewayChecker = factory()}(typeof self !== 'undefined' ? self : this, function () {
"use strict";var IpfsPublicGatewayChecker=(()=>{var Or=Object.create;var Sn=Object.defineProperty;var Ir=Object.getOwnPropertyDescriptor;var Nr=Object.getOwnPropertyNames;var Tr=Object.getPrototypeOf,Ar=Object.prototype.hasOwnProperty;var En=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var xr=(e,t,n,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of Nr(t))!Ar.call(e,r)&&r!==n&&Sn(e,r,{get:()=>t[r],enumerable:!(o=Ir(t,r))||o.enumerable});return e};var ii=(e,t,n)=>(n=e!=null?Or(Tr(e)):{},xr(t||!e||!e.__esModule?Sn(n,"default",{value:e,enumerable:!0}):n,e));var ri=En((Vt,Fi)=>{(function(e){"use strict";function t(n){var o=n&&n.Promise||e.Promise,r=n&&n.XMLHttpRequest||e.XMLHttpRequest;return function(){var d=Object.create(e,{fetch:{value:void 0,writable:!0}});return function(v,c){typeof Vt=="object"&&typeof Fi<"u"?c(Vt):typeof define=="function"&&define.amd?define(["exports"],c):c(v.WHATWGFetch={})}(this,function(v){"use strict";var c=typeof d<"u"&&d||typeof self<"u"&&self||typeof c<"u"&&c,b={searchParams:"URLSearchParams"in c,iterable:"Symbol"in c&&"iterator"in Symbol,blob:"FileReader"in c&&"Blob"in c&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in c,arrayBuffer:"ArrayBuffer"in c};function C(h){return h&&DataView.prototype.isPrototypeOf(h)}if(b.arrayBuffer)var w=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],x=ArrayBuffer.isView||function(h){return h&&w.indexOf(Object.prototype.toString.call(h))>-1};function D(h){if(typeof h!="string"&&(h=String(h)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(h)||h==="")throw new TypeError("Invalid character in header field name");return h.toLowerCase()}function M(h){return typeof h!="string"&&(h=String(h)),h}function E(h){var k={next:function(){var G=h.shift();return{done:G===void 0,value:G}}};return b.iterable&&(k[Symbol.iterator]=function(){return k}),k}function I(h){this.map={},h instanceof I?h.forEach(function(k,G){this.append(G,k)},this):Array.isArray(h)?h.forEach(function(k){this.append(k[0],k[1])},this):h&&Object.getOwnPropertyNames(h).forEach(function(k){this.append(k,h[k])},this)}I.prototype.append=function(h,k){h=D(h),k=M(k);var G=this.map[h];this.map[h]=G?G+", "+k:k},I.prototype.delete=function(h){delete this.map[D(h)]},I.prototype.get=function(h){return h=D(h),this.has(h)?this.map[h]:null},I.prototype.has=function(h){return this.map.hasOwnProperty(D(h))},I.prototype.set=function(h,k){this.map[D(h)]=M(k)},I.prototype.forEach=function(h,k){for(var G in this.map)this.map.hasOwnProperty(G)&&h.call(k,this.map[G],G,this)},I.prototype.keys=function(){var h=[];return this.forEach(function(k,G){h.push(G)}),E(h)},I.prototype.values=function(){var h=[];return this.forEach(function(k){h.push(k)}),E(h)},I.prototype.entries=function(){var h=[];return this.forEach(function(k,G){h.push([G,k])}),E(h)},b.iterable&&(I.prototype[Symbol.iterator]=I.prototype.entries);function j(h){if(h.bodyUsed)return o.reject(new TypeError("Already read"));h.bodyUsed=!0}function W(h){return new o(function(k,G){h.onload=function(){k(h.result)},h.onerror=function(){G(h.error)}})}function B(h){var k=new FileReader,G=W(k);return k.readAsArrayBuffer(h),G}function X(h){var k=new FileReader,G=W(k);return k.readAsText(h),G}function z(h){for(var k=new Uint8Array(h),G=new Array(k.length),Q=0;Q<k.length;Q++)G[Q]=String.fromCharCode(k[Q]);return G.join("")}function ne(h){if(h.slice)return h.slice(0);var k=new Uint8Array(h.byteLength);return k.set(new Uint8Array(h)),k.buffer}function re(){return this.bodyUsed=!1,this._initBody=function(h){this.bodyUsed=this.bodyUsed,this._bodyInit=h,h?typeof h=="string"?this._bodyText=h:b.blob&&Blob.prototype.isPrototypeOf(h)?this._bodyBlob=h:b.formData&&FormData.prototype.isPrototypeOf(h)?this._bodyFormData=h:b.searchParams&&URLSearchParams.prototype.isPrototypeOf(h)?this._bodyText=h.toString():b.arrayBuffer&&b.blob&&C(h)?(this._bodyArrayBuffer=ne(h.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):b.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(h)||x(h))?this._bodyArrayBuffer=ne(h):this._bodyText=h=Object.prototype.toString.call(h):this._bodyText="",this.headers.get("content-type")||(typeof h=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):b.searchParams&&URLSearchParams.prototype.isPrototypeOf(h)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},b.blob&&(this.blob=function(){var h=j(this);if(h)return h;if(this._bodyBlob)return o.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return o.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return o.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var h=j(this);return h||(ArrayBuffer.isView(this._bodyArrayBuffer)?o.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):o.resolve(this._bodyArrayBuffer))}else return this.blob().then(B)}),this.text=function(){var h=j(this);if(h)return h;if(this._bodyBlob)return X(this._bodyBlob);if(this._bodyArrayBuffer)return o.resolve(z(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return o.resolve(this._bodyText)},b.formData&&(this.formData=function(){return this.text().then(je)}),this.json=function(){return this.text().then(JSON.parse)},this}var Re=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function T(h){var k=h.toUpperCase();return Re.indexOf(k)>-1?k:h}function J(h,k){if(!(this instanceof J))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');k=k||{};var G=k.body;if(h instanceof J){if(h.bodyUsed)throw new TypeError("Already read");this.url=h.url,this.credentials=h.credentials,k.headers||(this.headers=new I(h.headers)),this.method=h.method,this.mode=h.mode,this.signal=h.signal,!G&&h._bodyInit!=null&&(G=h._bodyInit,h.bodyUsed=!0)}else this.url=String(h);if(this.credentials=k.credentials||this.credentials||"same-origin",(k.headers||!this.headers)&&(this.headers=new I(k.headers)),this.method=T(k.method||this.method||"GET"),this.mode=k.mode||this.mode||null,this.signal=k.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&G)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(G),(this.method==="GET"||this.method==="HEAD")&&(k.cache==="no-store"||k.cache==="no-cache")){var Q=/([?&])_=[^&]*/;if(Q.test(this.url))this.url=this.url.replace(Q,"$1_="+new Date().getTime());else{var te=/\?/;this.url+=(te.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}J.prototype.clone=function(){return new J(this,{body:this._bodyInit})};function je(h){var k=new FormData;return h.trim().split("&").forEach(function(G){if(G){var Q=G.split("="),te=Q.shift().replace(/\+/g," "),q=Q.join("=").replace(/\+/g," ");k.append(decodeURIComponent(te),decodeURIComponent(q))}}),k}function ie(h){var k=new I,G=h.replace(/\r?\n[\t ]+/g," ");return G.split("\r").map(function(Q){return Q.indexOf(`
`)===0?Q.substr(1,Q.length):Q}).forEach(function(Q){var te=Q.split(":"),q=te.shift().trim();if(q){var pe=te.join(":").trim();k.append(q,pe)}}),k}re.call(J.prototype);function oe(h,k){if(!(this instanceof oe))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');k||(k={}),this.type="default",this.status=k.status===void 0?200:k.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in k?k.statusText:"",this.headers=new I(k.headers),this.url=k.url||"",this._initBody(h)}re.call(oe.prototype),oe.prototype.clone=function(){return new oe(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new I(this.headers),url:this.url})},oe.error=function(){var h=new oe(null,{status:0,statusText:""});return h.type="error",h};var Pe=[301,302,303,307,308];oe.redirect=function(h,k){if(Pe.indexOf(k)===-1)throw new RangeError("Invalid status code");return new oe(null,{status:k,headers:{location:h}})},v.DOMException=c.DOMException;try{new v.DOMException}catch{v.DOMException=function(k,G){this.message=k,this.name=G;var Q=Error(k);this.stack=Q.stack},v.DOMException.prototype=Object.create(Error.prototype),v.DOMException.prototype.constructor=v.DOMException}function De(h,k){return new o(function(G,Q){var te=new J(h,k);if(te.signal&&te.signal.aborted)return Q(new v.DOMException("Aborted","AbortError"));var q=new r;function pe(){q.abort()}q.onload=function(){var be={status:q.status,statusText:q.statusText,headers:ie(q.getAllResponseHeaders()||"")};be.url="responseURL"in q?q.responseURL:be.headers.get("X-Request-URL");var tt="response"in q?q.response:q.responseText;setTimeout(function(){G(new oe(tt,be))},0)},q.onerror=function(){setTimeout(function(){Q(new TypeError("Network request failed"))},0)},q.ontimeout=function(){setTimeout(function(){Q(new TypeError("Network request failed"))},0)},q.onabort=function(){setTimeout(function(){Q(new v.DOMException("Aborted","AbortError"))},0)};function _e(be){try{return be===""&&c.location.href?c.location.href:be}catch{return be}}q.open(te.method,_e(te.url),!0),te.credentials==="include"?q.withCredentials=!0:te.credentials==="omit"&&(q.withCredentials=!1),"responseType"in q&&(b.blob?q.responseType="blob":b.arrayBuffer&&te.headers.get("Content-Type")&&te.headers.get("Content-Type").indexOf("application/octet-stream")!==-1&&(q.responseType="arraybuffer")),k&&typeof k.headers=="object"&&!(k.headers instanceof I)?Object.getOwnPropertyNames(k.headers).forEach(function(be){q.setRequestHeader(be,M(k.headers[be]))}):te.headers.forEach(function(be,tt){q.setRequestHeader(tt,be)}),te.signal&&(te.signal.addEventListener("abort",pe),q.onreadystatechange=function(){q.readyState===4&&te.signal.removeEventListener("abort",pe)}),q.send(typeof te._bodyInit>"u"?null:te._bodyInit)})}De.polyfill=!0,c.fetch||(c.fetch=De,c.Headers=I,c.Request=J,c.Response=oe),v.Headers=I,v.Request=J,v.Response=oe,v.fetch=De,Object.defineProperty(v,"__esModule",{value:!0})}),{fetch:d.fetch,Headers:d.Headers,Request:d.Request,Response:d.Response,DOMException:d.DOMException}}()}typeof define=="function"&&define.amd?define(function(){return t}):typeof Vt=="object"?Fi.exports=t:e.fetchPonyfill=t})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof globalThis<"u"?globalThis:Vt)});var or=En((ar,Ni)=>{(function(e,t){typeof define=="function"&&define.amd?define([],function(){return t(e.Countly)}):typeof Ni=="object"&&Ni.exports?Ni.exports=t(e.Countly):e.Countly=t(e.Countly)})(typeof window<"u"?window:ar,function(e){if(typeof window>"u")return;e=e||{};var t={SESSIONS:"sessions",EVENTS:"events",VIEWS:"views",SCROLLS:"scrolls",CLICKS:"clicks",FORMS:"forms",CRASHES:"crashes",ATTRIBUTION:"attribution",USERS:"users",STAR_RATING:"star-rating",LOCATION:"location",APM:"apm",FEEDBACK:"feedback",REMOTE_CONFIG:"remote-config"};e.features=[t.SESSIONS,t.EVENTS,t.VIEWS,t.SCROLLS,t.CLICKS,t.FORMS,t.CRASHES,t.ATTRIBUTION,t.USERS,t.STAR_RATING,t.LOCATION,t.APM,t.FEEDBACK,t.REMOTE_CONFIG];var n={NPS:"[CLY]_nps",SURVEY:"[CLY]_survey",STAR_RATING:"[CLY]_star_rating",VIEW:"[CLY]_view",ORIENTATION:"[CLY]_orientation",ACTION:"[CLY]_action"},o=Object.values(n),r={ERROR:"[ERROR] ",WARNING:"[WARNING] ",INFO:"[INFO] ",DEBUG:"[DEBUG] ",VERBOSE:"[VERBOSE] "},d={DEVELOPER_SUPPLIED:0,SDK_GENERATED:1,TEMPORARY_ID:2,URL_PROVIDED:3},v={BEAT_INTERVAL:500,QUEUE_SIZE:1e3,FAIL_TIMEOUT_AMOUNT:60,INACTIVITY_TIME:20,SESSION_UPDATE:60,MAX_EVENT_BATCH:100,SESSION_COOKIE_TIMEOUT:30,MAX_KEY_LENGTH:128,MAX_VALUE_SIZE:256,MAX_SEGMENTATION_VALUES:100,MAX_BREADCRUMB_COUNT:100,MAX_STACKTRACE_LINES_PER_THREAD:30,MAX_STACKTRACE_LINE_LENGTH:200};e.q=e.q||[],e.onload=e.onload||[];var c="23.2.2",b="javascript_native_web",C=/^(((([^:\/#\?]+:)?(?:(\/\/)((?:(([^:@\/#\?]+)(?:\:([^:@\/#\?]+))?)@)?(([^:\/#\?\]\[]+|\[[^\/\]@#?]+\])(?:\:([0-9]+))?))?)?)?((\/?(?:[^\/\?#]+\/+)*)([^\?#]*)))?(\?[^#]+)?)(#.*)?/,w=function(m){var p=this,K=!e.i,Y=!1,we="/i",Ne="/o/sdk",Le=B("interval",m,v.BEAT_INTERVAL),xe=B("queue_size",m,v.QUEUE_SIZE),he=[],Oe=[],Ae={},Ge=[],ze={},He=B("ignore_referrers",m,[]),At=null,it=!0,Te,wt=0,We=null,Me=0,_t=0,i=0,a=B("fail_timeout",m,v.FAIL_TIMEOUT_AMOUNT),l=B("inactivity_time",m,v.INACTIVITY_TIME),g=0,S=B("session_update",m,v.SESSION_UPDATE),A=B("max_events",m,v.MAX_EVENT_BATCH),F=B("max_logs",m,null),le=B("use_session_cookie",m,!0),Ee=B("session_cookie_timeout",m,v.SESSION_COOKIE_TIMEOUT),ge=!0,de=!1,se=B("offline_mode",m,!1),at={},vt=!0,un=I(),bt=!0,xt=null,ke=d.SDK_GENERATED,jt=!1,Gt=0,Ai=!1,ut=null,zt=null;try{localStorage.setItem("cly_testLocal",!0),localStorage.removeItem("cly_testLocal")}catch(s){u(r.ERROR,"Local storage test failed, Halting local storage support: "+s),bt=!1}for(var Se={},xi=0;xi<e.features.length;xi++)Se[e.features[xi]]={};this.initialize=function(){if(this.serialize=B("serialize",m,e.serialize),this.deserialize=B("deserialize",m,e.deserialize),this.getViewName=B("getViewName",m,e.getViewName),this.getViewUrl=B("getViewUrl",m,e.getViewUrl),this.getSearchQuery=B("getSearchQuery",m,e.getSearchQuery),this.DeviceIdType=e.DeviceIdType,this.namespace=B("namespace",m,""),this.clearStoredId=B("clear_stored_id",m,!1),this.app_key=B("app_key",m,null),this.onload=B("onload",m,[]),this.utm=B("utm",m,{source:!0,medium:!0,campaign:!0,term:!0,content:!0}),this.ignore_prefetch=B("ignore_prefetch",m,!0),this.rcAutoOptinAb=B("rc_automatic_optin_for_ab",m,!0),this.useExplicitRcApi=B("use_explicit_rc_api",m,!1),this.debug=B("debug",m,!1),this.test_mode=B("test_mode",m,!1),this.test_mode_eq=B("test_mode_eq",m,!1),this.metrics=B("metrics",m,{}),this.headers=B("headers",m,{}),this.url=ne(B("url",m,"")),this.app_version=B("app_version",m,"0.0"),this.country_code=B("country_code",m,null),this.city=B("city",m,null),this.ip_address=B("ip_address",m,null),this.ignore_bots=B("ignore_bots",m,!0),this.force_post=B("force_post",m,!1),this.remote_config=B("remote_config",m,!1),this.ignore_visitor=B("ignore_visitor",m,!1),this.require_consent=B("require_consent",m,!1),this.track_domains=B("track_domains",m,!0),this.storage=B("storage",m,"default"),this.enableOrientationTracking=B("enable_orientation_tracking",m,!0),this.maxKeyLength=B("max_key_length",m,v.MAX_KEY_LENGTH),this.maxValueSize=B("max_value_size",m,v.MAX_VALUE_SIZE),this.maxSegmentationValues=B("max_segmentation_values",m,v.MAX_SEGMENTATION_VALUES),this.maxBreadcrumbCount=B("max_breadcrumb_count",m,null),this.maxStackTraceLinesPerThread=B("max_stack_trace_lines_per_thread",m,v.MAX_STACKTRACE_LINES_PER_THREAD),this.maxStackTraceLineLength=B("max_stack_trace_line_length",m,v.MAX_STACKTRACE_LINE_LENGTH),this.heatmapWhitelist=B("heatmap_whitelist",m,[]),F&&!this.maxBreadcrumbCount?(this.maxBreadcrumbCount=F,u(r.WARNING,"initialize, 'maxCrashLogs' is deprecated. Use 'maxBreadcrumbCount' instead!")):!F&&!this.maxBreadcrumbCount&&(this.maxBreadcrumbCount=100),this.storage==="cookie"&&(bt=!1),!this.rcAutoOptinAb&&!this.useExplicitRcApi&&(u(r.WARNING,"initialize, Auto opting is disabled, switching to explicit RC API"),this.useExplicitRcApi=!0),Array.isArray(He)||(He=[]),this.url===""&&(u(r.ERROR,"initialize, Please provide server URL"),this.ignore_visitor=!0),ue("cly_ignore")&&(this.ignore_visitor=!0),Er(),he=ue("cly_queue")||[],Oe=ue("cly_event")||[],Ae=ue("cly_remote_configs")||{},this.clearStoredId&&(ue("cly_id")&&!V&&(this.device_id=ue("cly_id"),u(r.DEBUG,"initialize, temporarily using the previous device ID to flush existing events"),ke=ue("cly_id_type"),ke||(u(r.DEBUG,"initialize, No device ID type info from the previous session, falling back to DEVELOPER_SUPPLIED, for event flushing"),ke=d.DEVELOPER_SUPPLIED),Ct(),this.device_id=void 0,ke=d.SDK_GENERATED),u(r.INFO,"initialize, Clearing the device ID storage"),localStorage.removeItem(this.app_key+"/cly_id"),localStorage.removeItem(this.app_key+"/cly_id_type"),localStorage.removeItem(this.app_key+"/cly_session")),hn(),window.name&&window.name.indexOf("cly:")===0)try{this.passed_data=JSON.parse(window.name.replace("cly:",""))}catch(ye){u(r.ERROR,"initialize, Could not parse name: "+window.name+", error: "+ye)}else if(location.hash&&location.hash.indexOf("#cly:")===0)try{this.passed_data=JSON.parse(location.hash.replace("#cly:",""))}catch(ye){u(r.ERROR,"initialize, Could not parse hash: "+location.hash+", error: "+ye)}if((this.passed_data&&this.passed_data.app_key&&this.passed_data.app_key===this.app_key||this.passed_data&&!this.passed_data.app_key&&K)&&this.passed_data.token&&this.passed_data.purpose){this.passed_data.token!==ue("cly_old_token")&&(vn(this.passed_data.token),ae("cly_old_token",this.passed_data.token));var s=[];Array.isArray(this.heatmapWhitelist)?(this.heatmapWhitelist.push(this.url),s=this.heatmapWhitelist.map(function(ye){return ne(ye)})):s=[this.url],s.includes(this.passed_data.url)&&this.passed_data.purpose==="heatmap"&&(this.ignore_visitor=!0,tt(),_e(this.passed_data.url+"/views/heatmap.js",Mt))}if(this.ignore_visitor){u(r.WARNING,"initialize, ignore_visitor:["+this.ignore_visitor+"], this user will not be tracked");return}u(r.DEBUG,"initialize, app_key:["+this.app_key+"], url:["+this.url+"]"),u(r.DEBUG,"initialize, device_id:["+B("device_id",m,void 0)+"]"),u(r.DEBUG,"initialize, require_consent is enabled:["+this.require_consent+"]");try{u(r.DEBUG,"initialize, metric override:["+JSON.stringify(this.metrics)+"]"),u(r.DEBUG,"initialize, header override:["+JSON.stringify(this.headers)+"]"),u(r.DEBUG,"initialize, number of onload callbacks provided:["+this.onload.length+"]"),u(r.DEBUG,"initialize, utm tags:["+JSON.stringify(this.utm)+"]"),He&&u(r.DEBUG,"initialize, referrers to ignore :["+JSON.stringify(He)+"]")}catch{u(r.ERROR,"initialize, Could not stringify some config object values")}u(r.DEBUG,"initialize, app_version:["+this.app_version+"]"),u(r.DEBUG,"initialize, provided location info; country_code:["+this.country_code+"], city:["+this.city+"], ip_address:["+this.ip_address+"]"),this.namespace!==""&&u(r.DEBUG,"initialize, namespace given:["+this.namespace+"]"),this.clearStoredId&&u(r.DEBUG,"initialize, clearStoredId flag set to:["+this.clearStoredId+"]"),this.ignore_prefetch&&u(r.DEBUG,"initialize, ignoring pre-fetching and pre-rendering from counting as real website visits :["+this.ignore_prefetch+"]"),this.test_mode&&u(r.WARNING,"initialize, test_mode:["+this.test_mode+"], request queue won't be processed"),this.test_mode_eq&&u(r.WARNING,"initialize, test_mode_eq:["+this.test_mode_eq+"], event queue won't be processed"),this.heatmapWhitelist&&u(r.DEBUG,"initialize, heatmap whitelist:["+JSON.stringify(this.heatmapWhitelist)+"], these domains will be whitelisted"),this.storage!=="default"&&u(r.DEBUG,"initialize, storage is set to:["+this.storage+"]"),this.ignore_bots&&u(r.DEBUG,"initialize, ignore traffic from bots :["+this.ignore_bots+"]"),this.force_post&&u(r.DEBUG,"initialize, forced post method for all requests:["+this.force_post+"]"),this.remote_config&&u(r.DEBUG,"initialize, remote_config callback provided:["+!!this.remote_config+"]"),typeof this.rcAutoOptinAb=="boolean"&&u(r.DEBUG,"initialize, automatic RC optin is enabled:["+this.rcAutoOptinAb+"]"),this.useExplicitRcApi||u(r.WARNING,"initialize, will use legacy RC API. Consider enabling new API during init with use_explicit_rc_api flag"),this.track_domains&&u(r.DEBUG,"initialize, tracking domain info:["+this.track_domains+"]"),this.enableOrientationTracking&&u(r.DEBUG,"initialize, enableOrientationTracking:["+this.enableOrientationTracking+"]"),le||u(r.WARNING,"initialize, use_session_cookie is enabled:["+le+"]"),se&&u(r.DEBUG,"initialize, offline_mode:["+se+"], user info won't be send to the servers"),se&&u(r.DEBUG,"initialize, stored remote configs:["+JSON.stringify(Ae)+"]"),u(r.DEBUG,"initialize, 'getViewName' callback override provided:["+(this.getViewName!==e.getViewName)+"]"),u(r.DEBUG,"initialize, 'getSearchQuery' callback override provided:["+(this.getSearchQuery!==e.getSearchQuery)+"]"),this.maxKeyLength!==v.MAX_KEY_LENGTH&&u(r.DEBUG,"initialize, maxKeyLength set to:["+this.maxKeyLength+"] characters"),this.maxValueSize!==v.MAX_VALUE_SIZE&&u(r.DEBUG,"initialize, maxValueSize set to:["+this.maxValueSize+"] characters"),this.maxSegmentationValues!==v.MAX_SEGMENTATION_VALUES&&u(r.DEBUG,"initialize, maxSegmentationValues set to:["+this.maxSegmentationValues+"] key/value pairs"),this.maxBreadcrumbCount!==v.MAX_BREADCRUMB_COUNT&&u(r.DEBUG,"initialize, maxBreadcrumbCount for custom logs set to:["+this.maxBreadcrumbCount+"] entries"),this.maxStackTraceLinesPerThread!==v.MAX_STACKTRACE_LINES_PER_THREAD&&u(r.DEBUG,"initialize, maxStackTraceLinesPerThread set to:["+this.maxStackTraceLinesPerThread+"] lines"),this.maxStackTraceLineLength!==v.MAX_STACKTRACE_LINE_LENGTH&&u(r.DEBUG,"initialize, maxStackTraceLineLength set to:["+this.maxStackTraceLineLength+"] characters"),Le!==v.BEAT_INTERVAL&&u(r.DEBUG,"initialize, interval for heartbeats set to:["+Le+"] milliseconds"),xe!==v.QUEUE_SIZE&&u(r.DEBUG,"initialize, queue_size set to:["+xe+"] items max"),a!==v.FAIL_TIMEOUT_AMOUNT&&u(r.DEBUG,"initialize, fail_timeout set to:["+a+"] seconds of wait time after a failed connection to server"),l!==v.INACTIVITY_TIME&&u(r.DEBUG,"initialize, inactivity_time set to:["+l+"] minutes to consider a user as inactive after no observable action"),S!==v.SESSION_UPDATE&&u(r.DEBUG,"initialize, session_update set to:["+S+"] seconds to check if extending a session is needed while the user is active"),A!==v.MAX_EVENT_BATCH&&u(r.DEBUG,"initialize, max_events set to:["+A+"] events to send in one batch"),F&&u(r.WARNING,"initialize, max_logs set to:["+F+"] breadcrumbs to store for crash logs max, deprecated "),Ee!==v.SESSION_COOKIE_TIMEOUT&&u(r.DEBUG,"initialize, session_cookie_timeout set to:["+Ee+"] minutes to expire a cookies session"),u(r.INFO,"initialize, Countly initialized");var f=null,y=p.getSearchQuery(),O=!1,P={};if(y)for(var N=y.substring(1).split("&"),L=0;L<N.length;L++){var R=N[L].split("=");R[0]==="cly_id"?ae("cly_cmp_id",R[1]):R[0]==="cly_uid"?ae("cly_cmp_uid",R[1]):R[0]==="cly_device_id"?f=R[1]:(R[0]+"").indexOf("utm_")===0&&this.utm[R[0].replace("utm_","")]&&(P[R[0].replace("utm_","")]=R[1],O=!0)}var V=ue("cly_id")==="[CLY]_temp_id",H=B("device_id",m,void 0);if(ue("cly_id")&&!V?(this.device_id=ue("cly_id"),u(r.INFO,"initialize, Set the stored device ID"),ke=ue("cly_id_type"),ke||(u(r.INFO,"initialize, No device ID type info from the previous session, falling back to DEVELOPER_SUPPLIED"),ke=d.DEVELOPER_SUPPLIED)):f!==null?(u(r.INFO,"initialize, Device ID set by URL"),this.device_id=f,ke=d.URL_PROVIDED):H?(u(r.INFO,"initialize, Device ID set by developer"),this.device_id=H,m&&Object.keys(m).length?m.device_id!==void 0&&(ke=d.DEVELOPER_SUPPLIED):e.device_id!==void 0&&(ke=d.DEVELOPER_SUPPLIED)):se||V?(this.device_id="[CLY]_temp_id",ke=d.TEMPORARY_ID,se&&V?u(r.INFO,"initialize, Temp ID set, continuing offline mode from previous app session"):se&&!V?u(r.INFO,"initialize, Temp ID set, entering offline mode"):(se=!0,u(r.INFO,"initialize, Temp ID set, enabling offline mode"))):(u(r.INFO,"initialize, Generating the device ID"),this.device_id=B("device_id",m,Di()),m&&Object.keys(m).length?m.device_id!==void 0&&(ke=d.DEVELOPER_SUPPLIED):e.device_id!==void 0&&(ke=d.DEVELOPER_SUPPLIED)),ae("cly_id",this.device_id),ae("cly_id_type",ke),O){for(var ee in this.utm)P[ee]?this.userData.set("utm_"+ee,P[ee]):this.userData.unset("utm_"+ee);this.userData.save()}dn(),setTimeout(function(){Qt(),p.remote_config&&p.fetch_remote_config(p.remote_config)},1),document.documentElement.setAttribute("data-countly-useragent",Pe())},this.halt=function(){u(r.WARNING,"halt, Resetting Countly"),e.i=void 0,K=!e.i,Y=!1,we="/i",Ne="/o/sdk",Le=500,xe=1e3,he=[],Oe=[],Ae={},Ge=[],ze={},He=[],At=null,it=!0,wt=0,We=null,Me=0,_t=0,i=0,a=60,l=20,g=0,S=60,A=100,F=null,le=!0,Ee=30,ge=!0,de=!1,se=!1,at={},vt=!0,un=I(),bt=!0,xt=null,ke=d.SDK_GENERATED,jt=!1,Gt=0,Ai=!1,ut=null,zt=null;try{localStorage.setItem("cly_testLocal",!0),localStorage.removeItem("cly_testLocal")}catch{u(r.ERROR,"halt, Local storage test failed, will fallback to cookies"),bt=!1}e.features=[t.SESSIONS,t.EVENTS,t.VIEWS,t.SCROLLS,t.CLICKS,t.FORMS,t.CRASHES,t.ATTRIBUTION,t.USERS,t.STAR_RATING,t.LOCATION,t.APM,t.FEEDBACK,t.REMOTE_CONFIG],Se={};for(var s=0;s<e.features.length;s++)Se[e.features[s]]={};p.app_key=void 0,p.device_id=void 0,p.onload=void 0,p.utm=void 0,p.ignore_prefetch=void 0,p.debug=void 0,p.test_mode=void 0,p.test_mode_eq=void 0,p.metrics=void 0,p.headers=void 0,p.url=void 0,p.app_version=void 0,p.country_code=void 0,p.city=void 0,p.ip_address=void 0,p.ignore_bots=void 0,p.force_post=void 0,p.rcAutoOptinAb=void 0,p.useExplicitRcApi=void 0,p.remote_config=void 0,p.ignore_visitor=void 0,p.require_consent=void 0,p.track_domains=void 0,p.storage=void 0,p.enableOrientationTracking=void 0,p.maxKeyLength=void 0,p.maxValueSize=void 0,p.maxSegmentationValues=void 0,p.maxBreadcrumbCount=void 0,p.maxStackTraceLinesPerThread=void 0,p.maxStackTraceLineLength=void 0},this.group_features=function(s){if(u(r.INFO,"group_features, Grouping features"),s)for(var f in s)Se[f]?u(r.WARNING,"group_features, Feature name ["+f+"] is already reserved"):typeof s[f]=="string"?Se[f]={features:[s[f]]}:s[f]&&Array.isArray(s[f])&&s[f].length?Se[f]={features:s[f]}:u(r.ERROR,"group_features, Incorrect feature list for ["+f+"] value: ["+s[f]+"]");else u(r.ERROR,"group_features, Incorrect features:["+s+"]")},this.check_consent=function(s){return u(r.INFO,"check_consent, Checking if consent is given for specific feature:["+s+"]"),this.require_consent?Se[s]?!!(Se[s]&&Se[s].optin):(u(r.ERROR,"check_consent, No feature available for ["+s+"]"),!1):(u(r.INFO,"check_consent, require_consent is off, no consent is necessary"),!0)},this.get_device_id_type=function(){u(r.INFO,"check_device_id_type, Retrieving the current device id type.["+ke+"]");var s;switch(ke){case d.SDK_GENERATED:s=p.DeviceIdType.SDK_GENERATED;break;case d.URL_PROVIDED:case d.DEVELOPER_SUPPLIED:s=p.DeviceIdType.DEVELOPER_SUPPLIED;break;case d.TEMPORARY_ID:s=p.DeviceIdType.TEMPORARY_ID;break;default:s=-1;break}return s},this.get_device_id=function(){return u(r.INFO,"get_device_id, Retrieving the device id: ["+this.device_id+"]"),this.device_id},this.check_any_consent=function(){if(u(r.INFO,"check_any_consent, Checking if any consent is given"),!this.require_consent)return u(r.INFO,"check_any_consent, require_consent is off, no consent is necessary"),!0;for(var s in Se)if(Se[s]&&Se[s].optin)return!0;return u(r.INFO,"check_any_consent, No consents given"),!1},this.add_consent=function(s){if(u(r.INFO,"add_consent, Adding consent for ["+s+"]"),Array.isArray(s))for(var f=0;f<s.length;f++)this.add_consent(s[f]);else Se[s]?Se[s].features?(Se[s].optin=!0,this.add_consent(Se[s].features)):Se[s].optin!==!0&&(Se[s].optin=!0,fn(),setTimeout(function(){s===t.SESSIONS&&at.begin_session?(p.begin_session.apply(p,at.begin_session),at.begin_session=null):s===t.VIEWS&&at.track_pageview&&(We=null,p.track_pageview.apply(p,at.track_pageview),at.track_pageview=null)},1)):u(r.ERROR,"add_consent, No feature available for ["+s+"]")},this.remove_consent=function(s){u(r.INFO,"remove_consent, Removing consent for ["+s+"]"),this.remove_consent_internal(s,!0)},this.remove_consent_internal=function(s,f){if(f=f||!1,Array.isArray(s))for(var y=0;y<s.length;y++)this.remove_consent_internal(s[y],f);else Se[s]?Se[s].features?this.remove_consent_internal(Se[s].features,f):(Se[s].optin=!1,f&&Se[s].optin!==!1&&fn()):u(r.WARNING,"remove_consent, No feature available for ["+s+"]")};var Yt,fn=function(){Yt&&(clearTimeout(Yt),Yt=null),Yt=setTimeout(function(){for(var s={},f=0;f<e.features.length;f++)Se[e.features[f]].optin===!0?s[e.features[f]]=!0:s[e.features[f]]=!1;Fe({consent:JSON.stringify(s)}),u(r.DEBUG,"Consent update request has been sent to the queue.")},1e3)};this.enable_offline_mode=function(){u(r.INFO,"enable_offline_mode, Enabling offline mode"),this.remove_consent_internal(e.features,!1),se=!0,this.device_id="[CLY]_temp_id",p.device_id=this.device_id,ke=d.TEMPORARY_ID},this.disable_offline_mode=function(s){if(!se){u(r.WARNING,"disable_offline_mode, Countly was not in offline mode.");return}u(r.INFO,"disable_offline_mode, Disabling offline mode"),se=!1,s&&this.device_id!==s?(this.device_id=s,p.device_id=this.device_id,ke=d.DEVELOPER_SUPPLIED,ae("cly_id",this.device_id),ae("cly_id_type",d.DEVELOPER_SUPPLIED),u(r.INFO,"disable_offline_mode, Changing id to: "+this.device_id)):(this.device_id=Di(),this.device_id==="[CLY]_temp_id"&&(this.device_id=M()),p.device_id=this.device_id,this.device_id!==ue("cly_id")&&(ae("cly_id",this.device_id),ae("cly_id_type",d.SDK_GENERATED)));var f=!1;if(he.length>0)for(var y=0;y<he.length;y++)he[y].device_id==="[CLY]_temp_id"&&(he[y].device_id=this.device_id,f=!0);f&&ae("cly_queue",he,!0)},this.begin_session=function(s,f){if(u(r.INFO,"begin_session, Starting the session. There was an ongoing session: ["+Y+"]"),s&&u(r.INFO,"begin_session, Heartbeats are disabled"),f&&u(r.INFO,"begin_session, Session starts irrespective of session cookie"),this.check_consent(t.SESSIONS)){if(!Y){this.enableOrientationTracking&&(this.report_orientation(),ie(window,"resize",function(){p.report_orientation()})),Te=I(),Y=!0,it=!s;var y=ue("cly_session");if(u(r.VERBOSE,"begin_session, Session state, forced: ["+f+"], useSessionCookie: ["+le+"], seconds to expire: ["+(y-Te)+"], expired: ["+(parseInt(y)<=I())+"] "),f||!le||!y||parseInt(y)<=I()){u(r.INFO,"begin_session, Session started"),xt===null&&(xt=!0);var O={};O.begin_session=1,O.metrics=JSON.stringify(ei()),Fe(O)}ae("cly_session",I()+Ee*60)}}else at.begin_session=arguments},this.session_duration=function(s){u(r.INFO,"session_duration, Reporting session duration"),this.check_consent(t.SESSIONS)&&Y&&(u(r.INFO,"session_duration, Session extended: ",s),Fe({session_duration:s}),gn())},this.end_session=function(s,f){u(r.INFO,"end_session, Ending the current session. There was an on going session:["+Y+"]"),this.check_consent(t.SESSIONS)&&Y&&(s=s||I()-Te,Bi(),!le||f?(u(r.INFO,"end_session, Session ended"),Fe({end_session:1,session_duration:s})):this.session_duration(s),Y=!1)},this.change_id=function(s,f){if(u(r.INFO,"change_id, Changing the ID"),f&&u(r.INFO,"change_id, Will merge the IDs"),!s||typeof s!="string"||s.length===0){u(r.ERROR,"change_id, The provided ID: ["+s+"] is not a valid ID");return}if(se){u(r.WARNING,"change_id, Offline mode was on, initiating disabling sequence instead."),this.disable_offline_mode(s);return}if(this.device_id!==s){f||(Ct(),this.end_session(null,!0),ze={},this.remove_consent_internal(e.features,!1));var y=this.device_id;this.device_id=s,p.device_id=this.device_id,ke=d.DEVELOPER_SUPPLIED,ae("cly_id",this.device_id),ae("cly_id_type",d.DEVELOPER_SUPPLIED),u(r.INFO,"change_id, Changing ID from:["+y+"] to ["+s+"]"),f?Fe({old_device_id:y}):this.begin_session(!it,!0),this.remote_config&&(Ae={},ae("cly_remote_configs",Ae),this.fetch_remote_config(this.remote_config))}},this.add_event=function(s){u(r.INFO,"add_event, Adding event: ",s);var f=!1;switch(s.key){case n.NPS:f=this.check_consent(t.FEEDBACK);break;case n.SURVEY:f=this.check_consent(t.FEEDBACK);break;case n.STAR_RATING:f=this.check_consent(t.STAR_RATING);break;case n.VIEW:f=this.check_consent(t.VIEWS);break;case n.ORIENTATION:f=this.check_consent(t.USERS);break;case n.ACTION:f=this.check_consent(t.CLICKS)||this.check_consent(t.SCROLLS);break;default:f=this.check_consent(t.EVENTS)}f&&Ye(s)};function Ye(s,f){if(p.ignore_visitor){u(r.ERROR,"Adding event failed. Possible bot or user opt out");return}if(!s.key){u(r.ERROR,"Adding event failed. Event must have a key property");return}s.count||(s.count=1),o.includes(s.key)||(s.key=J(s.key,p.maxKeyLength,"add_cly_event",u)),s.segmentation=T(s.segmentation,p.maxKeyLength,p.maxValueSize,p.maxSegmentationValues,"add_cly_event",u);var y=["key","count","sum","dur","segmentation"],O=re(s,y);O.timestamp=W();var P=new Date;O.hour=P.getHours(),O.dow=P.getDay(),O.id=f||D(),O.key===n.VIEW?O.pvid=zt||"":O.cvid=ut||"",Oe.push(O),ae("cly_event",Oe),u(r.INFO," With event ID: ["+O.id+"], successfully adding the last event:",O)}this.start_event=function(s){if(!s||typeof s!="string"){u(r.WARNING,"start_event, you have to provide a valid string key instead of: ["+s+"]");return}if(u(r.INFO,"start_event, Starting timed event with key: ["+s+"]"),s=J(s,p.maxKeyLength,"start_event",u),ze[s]){u(r.WARNING,"start_event, Timed event with key: ["+s+"] already started");return}ze[s]=I()},this.cancel_event=function(s){return!s||typeof s!="string"?(u(r.WARNING,"cancel_event, you have to provide a valid string key instead of: ["+s+"]"),!1):(u(r.INFO,"cancel_event, Canceling timed event with key: ["+s+"]"),s=J(s,p.maxKeyLength,"cancel_event",u),ze[s]?(delete ze[s],u(r.INFO,"cancel_event, Timed event with key: ["+s+"] is canceled"),!0):(u(r.WARNING,"cancel_event, Timed event with key: ["+s+"] was not found"),!1))},this.end_event=function(s){if(!s){u(r.WARNING,"end_event, you have to provide a valid string key or event object instead of: ["+s+"]");return}if(u(r.INFO,"end_event, Ending timed event"),typeof s=="string"&&(s=J(s,p.maxKeyLength,"end_event",u),s={key:s}),!s.key){u(r.ERROR,"end_event, Timed event must have a key property");return}if(!ze[s.key]){u(r.ERROR,"end_event, Timed event with key: ["+s.key+"] was not started");return}s.dur=I()-ze[s.key],this.add_event(s),delete ze[s.key]},this.report_orientation=function(s){u(r.INFO,"report_orientation, Reporting orientation"),this.check_consent(t.USERS)&&Ye({key:n.ORIENTATION,segmentation:{mode:s||q()}})},this.report_conversion=function(s,f){u(r.WARNING,"report_conversion, Deprecated function call! Use 'recordDirectAttribution' in place of this call. Call will be redirected now!"),this.recordDirectAttribution(s,f)},this.recordDirectAttribution=function(s,f){u(r.INFO,"recordDirectAttribution, Recording the attribution for campaign ID: ["+s+"] and the user ID: ["+f+"]"),this.check_consent(t.ATTRIBUTION)&&(s=s||ue("cly_cmp_id")||"cly_organic",f=f||ue("cly_cmp_uid"),Fe(f?{campaign_id:s,campaign_user:f}:{campaign_id:s}))},this.user_details=function(s){if(u(r.INFO,"user_details, Trying to add user details: ",s),this.check_consent(t.USERS)){Ct(),u(r.INFO,"user_details, flushed the event queue"),s.name=J(s.name,p.maxValueSize,"user_details",u),s.username=J(s.username,p.maxValueSize,"user_details",u),s.email=J(s.email,p.maxValueSize,"user_details",u),s.organization=J(s.organization,p.maxValueSize,"user_details",u),s.phone=J(s.phone,p.maxValueSize,"user_details",u),s.picture=J(s.picture,4096,"user_details",u),s.gender=J(s.gender,p.maxValueSize,"user_details",u),s.byear=J(s.byear,p.maxValueSize,"user_details",u),s.custom=T(s.custom,p.maxKeyLength,p.maxValueSize,p.maxSegmentationValues,"user_details",u);var f=["name","username","email","organization","phone","picture","gender","byear","custom"];Fe({user_details:JSON.stringify(re(s,f))})}};var nt={},ot=function(s,f,y){p.check_consent(t.USERS)&&(nt[s]||(nt[s]={}),y==="$push"||y==="$pull"||y==="$addToSet"?(nt[s][y]||(nt[s][y]=[]),nt[s][y].push(f)):nt[s][y]=f)};this.userData={set:function(s,f){u(r.INFO,"set, Setting user's custom property value: ["+f+"] under the key: ["+s+"]"),s=J(s,p.maxKeyLength,"userData set",u),f=J(f,p.maxValueSize,"userData set",u),nt[s]=f},unset:function(s){u(r.INFO,"unset, Resetting user's custom property with key: ["+s+"] "),nt[s]=""},set_once:function(s,f){u(r.INFO,"set_once, Setting user's unique custom property value: ["+f+"] under the key: ["+s+"] "),s=J(s,p.maxKeyLength,"userData set_once",u),f=J(f,p.maxValueSize,"userData set_once",u),ot(s,f,"$setOnce")},increment:function(s){u(r.INFO,"increment, Increasing user's custom property value under the key: ["+s+"] by one"),s=J(s,p.maxKeyLength,"userData increment",u),ot(s,1,"$inc")},increment_by:function(s,f){u(r.INFO,"increment_by, Increasing user's custom property value under the key: ["+s+"] by: ["+f+"]"),s=J(s,p.maxKeyLength,"userData increment_by",u),f=J(f,p.maxValueSize,"userData increment_by",u),ot(s,f,"$inc")},multiply:function(s,f){u(r.INFO,"multiply, Multiplying user's custom property value under the key: ["+s+"] by: ["+f+"]"),s=J(s,p.maxKeyLength,"userData multiply",u),f=J(f,p.maxValueSize,"userData multiply",u),ot(s,f,"$mul")},max:function(s,f){u(r.INFO,"max, Saving user's maximum custom property value compared to the value: ["+f+"] under the key: ["+s+"]"),s=J(s,p.maxKeyLength,"userData max",u),f=J(f,p.maxValueSize,"userData max",u),ot(s,f,"$max")},min:function(s,f){u(r.INFO,"min, Saving user's minimum custom property value compared to the value: ["+f+"] under the key: ["+s+"]"),s=J(s,p.maxKeyLength,"userData min",u),f=J(f,p.maxValueSize,"userData min",u),ot(s,f,"$min")},push:function(s,f){u(r.INFO,"push, Pushing a value: ["+f+"] under the key: ["+s+"] to user's custom property array"),s=J(s,p.maxKeyLength,"userData push",u),f=J(f,p.maxValueSize,"userData push",u),ot(s,f,"$push")},push_unique:function(s,f){u(r.INFO,"push_unique, Pushing a unique value: ["+f+"] under the key: ["+s+"] to user's custom property array"),s=J(s,p.maxKeyLength,"userData push_unique",u),f=J(f,p.maxValueSize,"userData push_unique",u),ot(s,f,"$addToSet")},pull:function(s,f){u(r.INFO,"pull, Removing the value: ["+f+"] under the key: ["+s+"] from user's custom property array"),ot(s,f,"$pull")},save:function(){u(r.INFO,"save, Saving changes to user's custom property"),p.check_consent(t.USERS)&&(Ct(),u(r.INFO,"user_details, flushed the event queue"),Fe({user_details:JSON.stringify({custom:nt})})),nt={}}},this.report_trace=function(s){if(u(r.INFO,"report_trace, Reporting performance trace"),this.check_consent(t.APM)){for(var f=["type","name","stz","etz","apm_metrics","apm_attr"],y=0;y<f.length;y++)if(f[y]!=="apm_attr"&&typeof s[f[y]]>"u"){u(r.WARNING,"report_trace, APM trace don't have the property: "+f[y]);return}s.name=J(s.name,p.maxKeyLength,"report_trace",u),s.app_metrics=T(s.app_metrics,p.maxKeyLength,p.maxValueSize,p.maxSegmentationValues,"report_trace",u);var O=re(s,f);O.timestamp=s.stz;var P=new Date;O.hour=P.getHours(),O.dow=P.getDay(),Fe({apm:JSON.stringify(O)}),u(r.INFO,"report_trace, Successfully adding APM trace: ",O)}},this.track_errors=function(s){u(r.INFO,"track_errors, Started tracking errors"),e.i[this.app_key].tracking_crashes=!0,window.cly_crashes||(window.cly_crashes=!0,At=s,window.onerror=function f(y,O,P,N,L){if(L!=null)X(L,!1);else{N=N||window.event&&window.event.errorCharacter;var R="";typeof y<"u"&&(R+=y+`
`),typeof O<"u"&&(R+="at "+O),typeof P<"u"&&(R+=":"+P),typeof N<"u"&&(R+=":"+N),R+=`
`;try{for(var V=[],H=f.caller;H;)V.push(H.name),H=H.caller;R+=V.join(`
`)}catch(ee){u(r.ERROR,"track_errors, Call stack generation experienced a problem: "+ee)}X(R,!1)}},window.addEventListener("unhandledrejection",function(f){X(new Error("Unhandled rejection (reason: "+(f.reason&&f.reason.stack?f.reason.stack:f.reason)+")."),!0)}))},this.log_error=function(s,f){u(r.INFO,"log_error, Logging errors"),this.recordError(s,!0,f)},this.add_log=function(s){if(u(r.INFO,"add_log, Adding a new log of breadcrumbs: [ "+s+" ]"),this.check_consent(t.CRASHES)){for(s=J(s,p.maxValueSize,"add_log",u);Ge.length>=p.maxBreadcrumbCount;)Ge.shift(),u(r.WARNING,"add_log, Reached maximum crashLogs size. Will erase the oldest one.");Ge.push(s)}},this.fetch_remote_config=function(s,f,y){var O=null,P=null,N=null;if(s&&(!y&&typeof s=="function"?N=s:Array.isArray(s)&&(O=s)),f&&(!y&&typeof f=="function"?N=f:Array.isArray(f)&&(P=f)),!N&&typeof y=="function"&&(N=y),this.useExplicitRcApi){u(r.INFO,"fetch_remote_config, Fetching remote config");var L=this.rcAutoOptinAb?1:0;pn(O,P,L,null,N);return}u(r.WARNING,"fetch_remote_config, Fetching remote config, with legacy API"),pn(O,P,null,"legacy",N)};function pn(s,f,y,O,P){u(r.INFO,"fetch_remote_config_explicit, Fetching sequence initiated");var N={method:"rc"};s&&(N.keys=JSON.stringify(s)),f&&(N.omit_keys=JSON.stringify(f));var L;O==="legacy"&&(N.method="fetch_remote_config"),y===0&&(N.oi=0),y===1&&(N.oi=1),typeof P=="function"&&(L=P),p.check_consent(t.SESSIONS)&&(N.metrics=JSON.stringify(ei())),p.check_consent(t.REMOTE_CONFIG)?(Xt(N),ft("fetch_remote_config_explicit",p.url+Ne,N,function(R,V,H){if(R){u(r.ERROR,"fetch_remote_config_explicit, An error occurred: "+R);return}try{var ee=JSON.parse(H);if(N.keys||N.omit_keys)for(var ye in ee)Ae[ye]=ee[ye];else Ae=ee;ae("cly_remote_configs",Ae)}catch(ve){u(r.ERROR,"fetch_remote_config_explicit, Had an issue while parsing the response: "+ve)}L&&(u(r.INFO,"fetch_remote_config_explicit, Callback function is provided"),L(R,Ae))},!0)):(u(r.ERROR,"fetch_remote_config_explicit, Remote config requires explicit consent"),L&&L(new Error("Remote config requires explicit consent"),Ae))}this.enrollUserToAb=function(s){if(u(r.INFO,"enrollUserToAb, Providing AB test keys to opt in for"),!s||!Array.isArray(s)||s.length===0){u(r.ERROR,"enrollUserToAb, No keys provided");return}var f={method:"ab",keys:JSON.stringify(s)};Xt(f),ft("enrollUserToAb",this.url+Ne,f,function(y,O,P){if(y){u(r.ERROR,"enrollUserToAb, An error occurred: "+y);return}try{var N=JSON.parse(P);u(r.DEBUG,"enrollUserToAb, Parsed the response's result: ["+N.result+"]")}catch(L){u(r.ERROR,"enrollUserToAb, Had an issue while parsing the response: "+L)}},!0)},this.get_remote_config=function(s){return u(r.INFO,"get_remote_config, Getting remote config from storage"),typeof s<"u"?Ae[s]:Ae},this.stop_time=function(){u(r.INFO,"stop_time, Stopping tracking duration"),vt&&(vt=!1,wt=I()-Te,_t=I()-Me)},this.start_time=function(){u(r.INFO,"start_time, Starting tracking duration"),vt||(vt=!0,Te=I()-wt,Me=I()-_t,_t=0,gn())},this.track_sessions=function(){u(r.INFO,"track_session, Starting tracking user session"),this.begin_session(),this.start_time(),ie(window,"beforeunload",function(){Ct(),p.end_session()});var s="hidden";function f(){document[s]||!document.hasFocus()?p.stop_time():p.start_time()}ie(window,"focus",f),ie(window,"blur",f),ie(window,"pageshow",f),ie(window,"pagehide",f),"onfocusin"in document&&(ie(window,"focusin",f),ie(window,"focusout",f)),s in document?document.addEventListener("visibilitychange",f):"mozHidden"in document?(s="mozHidden",document.addEventListener("mozvisibilitychange",f)):"webkitHidden"in document?(s="webkitHidden",document.addEventListener("webkitvisibilitychange",f)):"msHidden"in document&&(s="msHidden",document.addEventListener("msvisibilitychange",f));function y(){g>=l&&p.start_time(),g=0}ie(window,"mousemove",y),ie(window,"click",y),ie(window,"keydown",y),ie(window,"scroll",y),setInterval(function(){g++,g>=l&&p.stop_time()},6e4)},this.track_pageview=function(s,f,y){if(u(r.INFO,"track_pageview, Tracking page views"),u(r.VERBOSE,"track_pageview, last view is:["+We+"], current view ID is:["+ut+"], previous view ID is:["+zt+"]"),We&&Ai&&(u(r.DEBUG,"track_pageview, Scroll registry triggered"),Li(),jt=!0,Gt=0),Bi(),zt=ut,ut=D(),s=J(s,p.maxKeyLength,"track_pageview",u),s&&Array.isArray(s)&&(f=s,s=null),s||(s=this.getViewName()),s===void 0||s===""){u(r.ERROR,"track_pageview, No page name to track (it is either undefined or empty string). No page view can be tracked.");return}if(s===null){u(r.ERROR,"track_pageview, View name returned as null. Page view will be ignored.");return}if(f&&f.length)for(var O=0;O<f.length;O++)try{var P=new RegExp(f[O]);if(P.test(s)){u(r.INFO,"track_pageview, Ignoring the page: "+s);return}}catch(H){u(r.ERROR,"track_pageview, Problem with finding ignore list item: "+f[O]+", error: "+H)}We=s,Me=I(),u(r.VERBOSE,"track_pageview, last view is assigned:["+We+"], current view ID is:["+ut+"], previous view ID is:["+zt+"]");var N={name:s,visit:1,view:p.getViewUrl()};if(N=T(N,p.maxKeyLength,p.maxValueSize,p.maxSegmentationValues,"track_pageview",u),this.track_domains&&(N.domain=window.location.hostname),le)if(Y)xt&&(xt=!1,N.start=1);else{var L=ue("cly_session");(!L||parseInt(L)<=I())&&(xt=!1,N.start=1)}else if(typeof document.referrer<"u"&&document.referrer.length){var R=C.exec(document.referrer);R&&R[11]&&R[11]!==window.location.hostname&&(N.start=1)}if(y){y=T(y,p.maxKeyLength,p.maxValueSize,p.maxSegmentationValues,"track_pageview",u);for(var V in y)typeof N[V]>"u"&&(N[V]=y[V])}this.check_consent(t.VIEWS)?Ye({key:n.VIEW,segmentation:N},ut):at.track_pageview=arguments},this.track_view=function(s,f,y){u(r.INFO,"track_view, Initiating tracking page views"),this.track_pageview(s,f,y)},this.track_clicks=function(s){u(r.INFO,"track_clicks, Starting to track clicks"),s&&u(r.INFO,"track_clicks, Tracking the specified children:["+s+"]"),s=s||document;var f=!0;function y(O){if(f){if(f=!1,k(O),typeof O.pageX<"u"&&typeof O.pageY<"u"){var P=G(),N=Q();if(p.check_consent(t.CLICKS)){var L={type:"click",x:O.pageX,y:O.pageY,width:N,height:P,view:p.getViewUrl()};L=T(L,p.maxKeyLength,p.maxValueSize,p.maxSegmentationValues,"processClick",u),p.track_domains&&(L.domain=window.location.hostname),Ye({key:n.ACTION,segmentation:L})}}setTimeout(function(){f=!0},1e3)}}ie(s,"click",y)},this.track_scrolls=function(s){u(r.INFO,"track_scrolls, Starting to track scrolls"),s&&u(r.INFO,"track_scrolls, Tracking the specified children"),s=s||window,jt=!0,Ai=!0,ie(s,"scroll",_n),ie(s,"beforeunload",Li)},this.track_links=function(s){u(r.INFO,"track_links, Starting to track clicks to links"),s&&u(r.INFO,"track_links, Tracking the specified children"),s=s||document;function f(y){var O=je(oe(y),"a");O&&(k(y),p.check_consent(t.CLICKS)&&Ye({key:"linkClick",segmentation:{href:O.href,text:O.innerText,id:O.id,view:p.getViewUrl()}}))}ie(s,"click",f)},this.track_forms=function(s,f){u(r.INFO,"track_forms, Starting to track form submissions. DOM object provided:["+!!s+"] Tracking hidden inputs :["+!!f+"]"),s=s||document;function y(P){return P.name||P.id||P.type||P.nodeName}function O(P){var N=oe(P),L={id:N.attributes.id&&N.attributes.id.nodeValue,name:N.attributes.name&&N.attributes.name.nodeValue,action:N.attributes.action&&N.attributes.action.nodeValue,method:N.attributes.method&&N.attributes.method.nodeValue,view:p.getViewUrl()},R;if(typeof N.elements<"u"){for(var V=0;V<N.elements.length;V++)R=N.elements[V],R&&R.type!=="password"&&R.className.indexOf("cly_user_ignore")===-1&&(typeof L["input:"+y(R)]>"u"&&(L["input:"+y(R)]=[]),R.nodeName.toLowerCase()==="select"?typeof R.multiple<"u"?L["input:"+y(R)].push(x(R)):L["input:"+y(R)].push(R.options[R.selectedIndex].value):R.nodeName.toLowerCase()==="input"?typeof R.type<"u"?R.type.toLowerCase()==="checkbox"||R.type.toLowerCase()==="radio"?R.checked&&L["input:"+y(R)].push(R.value):(R.type.toLowerCase()!=="hidden"||f)&&L["input:"+y(R)].push(R.value):L["input:"+y(R)].push(R.value):(R.nodeName.toLowerCase()==="textarea"||typeof R.value<"u")&&L["input:"+y(R)].push(R.value));for(var H in L)L[H]&&typeof L[H].join=="function"&&(L[H]=L[H].join(", "))}p.check_consent(t.FORMS)&&Ye({key:"formSubmit",segmentation:L})}ie(s,"submit",O)},this.collect_from_forms=function(s,f){u(r.INFO,"collect_from_forms, Starting to collect possible user data. DOM object provided:["+!!s+"] Submitting custom user property:["+!!f+"]"),s=s||document;function y(O){var P=oe(O),N={},L=!1,R;if(typeof P.elements<"u"){var V={},H=s.getElementsByTagName("LABEL"),ee,ye;for(ee=0;ee<H.length;ee++)H[ee].htmlFor&&H[ee].htmlFor!==""&&(V[H[ee].htmlFor]=H[ee].innerText||H[ee].textContent||H[ee].innerHTML);for(ee=0;ee<P.elements.length;ee++)if(R=P.elements[ee],R&&R.type!=="password"&&R.className.indexOf("cly_user_ignore")===-1){var ve="";if(R.nodeName.toLowerCase()==="select"?typeof R.multiple<"u"?ve=x(R):ve=R.options[R.selectedIndex].value:R.nodeName.toLowerCase()==="input"?typeof R.type<"u"&&(R.type.toLowerCase()==="checkbox"||R.type.toLowerCase()==="radio")?R.checked&&(ve=R.value):ve=R.value:(R.nodeName.toLowerCase()==="textarea"||typeof R.value<"u")&&(ve=R.value),R.className&&R.className.indexOf("cly_user_")!==-1){var Xe=R.className.split(" ");for(ye=0;ye<Xe.length;ye++)if(Xe[ye].indexOf("cly_user_")===0){N[Xe[ye].replace("cly_user_","")]=ve,L=!0;break}}else R.type&&R.type.toLowerCase()==="email"||R.name&&R.name.toLowerCase().indexOf("email")!==-1||R.id&&R.id.toLowerCase().indexOf("email")!==-1||R.id&&V[R.id]&&V[R.id].toLowerCase().indexOf("email")!==-1||/[^@\s]+@[^@\s]+\.[^@\s]+/.test(ve)?(N.email||(N.email=ve),L=!0):R.name&&R.name.toLowerCase().indexOf("username")!==-1||R.id&&R.id.toLowerCase().indexOf("username")!==-1||R.id&&V[R.id]&&V[R.id].toLowerCase().indexOf("username")!==-1?(N.username||(N.username=ve),L=!0):R.name&&(R.name.toLowerCase().indexOf("tel")!==-1||R.name.toLowerCase().indexOf("phone")!==-1||R.name.toLowerCase().indexOf("number")!==-1)||R.id&&(R.id.toLowerCase().indexOf("tel")!==-1||R.id.toLowerCase().indexOf("phone")!==-1||R.id.toLowerCase().indexOf("number")!==-1)||R.id&&V[R.id]&&(V[R.id].toLowerCase().indexOf("tel")!==-1||V[R.id].toLowerCase().indexOf("phone")!==-1||V[R.id].toLowerCase().indexOf("number")!==-1)?(N.phone||(N.phone=ve),L=!0):R.name&&(R.name.toLowerCase().indexOf("org")!==-1||R.name.toLowerCase().indexOf("company")!==-1)||R.id&&(R.id.toLowerCase().indexOf("org")!==-1||R.id.toLowerCase().indexOf("company")!==-1)||R.id&&V[R.id]&&(V[R.id].toLowerCase().indexOf("org")!==-1||V[R.id].toLowerCase().indexOf("company")!==-1)?(N.organization||(N.organization=ve),L=!0):(R.name&&R.name.toLowerCase().indexOf("name")!==-1||R.id&&R.id.toLowerCase().indexOf("name")!==-1||R.id&&V[R.id]&&V[R.id].toLowerCase().indexOf("name")!==-1)&&(N.name||(N.name=""),N.name+=ve+" ",L=!0)}}L&&(u(r.INFO,"collect_from_forms, Gathered user data",N),f?p.user_details({custom:N}):p.user_details(N))}ie(s,"submit",y)},this.collect_from_facebook=function(s){if(typeof FB>"u"||!FB||!FB.api){u(r.ERROR,"collect_from_facebook, Facebook SDK is not available");return}u(r.INFO,"collect_from_facebook, Starting to collect possible user data"),FB.api("/me",function(f){var y={};if(f.name&&(y.name=f.name),f.email&&(y.email=f.email),f.gender==="male"?y.gender="M":f.gender==="female"&&(y.gender="F"),f.birthday){var O=f.birthday.split("/").pop();O&&O.length===4&&(y.byear=O)}if(f.work&&f.work[0]&&f.work[0].employer&&f.work[0].employer.name&&(y.organization=f.work[0].employer.name),s){y.custom={};for(var P in s){for(var N=s[P].split("."),L=f,R=0;R<N.length&&(L=L[N[R]],!(typeof L>"u"));R++);typeof L<"u"&&(y.custom[P]=L)}}p.user_details(y)})},this.opt_out=function(){u(r.INFO,"opt_out, Opting out the user"),this.ignore_visitor=!0,ae("cly_ignore",!0)},this.opt_in=function(){u(r.INFO,"opt_in, Opting in the user"),ae("cly_ignore",!1),this.ignore_visitor=!1,hn(),!this.ignore_visitor&&!de&&Qt()},this.report_feedback=function(s){u(r.WARNING,"report_feedback, Deprecated function call! Use 'recordRatingWidgetWithID' or 'reportFeedbackWidgetManually' in place of this call. Call will be redirected to 'recordRatingWidgetWithID' now!"),this.recordRatingWidgetWithID(s)},this.recordRatingWidgetWithID=function(s){if(u(r.INFO,"recordRatingWidgetWithID, Providing information about user with ID: [ "+s.widget_id+" ]"),!!this.check_consent(t.STAR_RATING)){if(!s.widget_id){u(r.ERROR,"recordRatingWidgetWithID, Rating Widget must contain widget_id property");return}if(!s.rating){u(r.ERROR,"recordRatingWidgetWithID, Rating Widget must contain rating property");return}var f=["widget_id","contactMe","platform","app_version","rating","email","comment"],y={key:n.STAR_RATING,count:1,segmentation:{}};y.segmentation=re(s,f),y.segmentation.app_version||(y.segmentation.app_version=this.metrics._app_version||this.app_version),y.segmentation.rating>5?(u(r.WARNING,"recordRatingWidgetWithID, You have entered a rating higher than 5. Changing it back to 5 now."),y.segmentation.rating=5):y.segmentation.rating<1&&(u(r.WARNING,"recordRatingWidgetWithID, You have entered a rating lower than 1. Changing it back to 1 now."),y.segmentation.rating=1),u(r.INFO,"recordRatingWidgetWithID, Reporting Rating Widget: ",y),Ye(y)}},this.reportFeedbackWidgetManually=function(s,f,y){if(this.check_consent(t.FEEDBACK)){if(!(s&&f)){u(r.ERROR,"reportFeedbackWidgetManually, Widget data and/or Widget object not provided. Aborting.");return}if(!s._id){u(r.ERROR,"reportFeedbackWidgetManually, Feedback Widgets must contain _id property");return}if(se){u(r.ERROR,"reportFeedbackWidgetManually, Feedback Widgets can not be reported in offline mode");return}u(r.INFO,"reportFeedbackWidgetManually, Providing information about user with, provided result of the widget with  ID: [ "+s._id+" ] and type: ["+s.type+"]");var O=[],P=s.type,N;if(P==="nps"){if(y){if(!y.rating){u(r.ERROR,"reportFeedbackWidgetManually, Widget must contain rating property");return}y.rating=Math.round(y.rating),y.rating>10?(u(r.WARNING,"reportFeedbackWidgetManually, You have entered a rating higher than 10. Changing it back to 10 now."),y.rating=10):y.rating<0&&(u(r.WARNING,"reportFeedbackWidgetManually, You have entered a rating lower than 0. Changing it back to 0 now."),y.rating=0),O=["rating","comment"]}N=n.NPS}else if(P==="survey"){if(y){if(Object.keys(y).length<1){u(r.ERROR,"reportFeedbackWidgetManually, Widget should have answers to be reported");return}O=Object.keys(y)}N=n.SURVEY}else if(P==="rating"){if(y){if(!y.rating){u(r.ERROR,"reportFeedbackWidgetManually, Widget must contain rating property");return}y.rating=Math.round(y.rating),y.rating>5?(u(r.WARNING,"reportFeedbackWidgetManually, You have entered a rating higher than 5. Changing it back to 5 now."),y.rating=5):y.rating<1&&(u(r.WARNING,"reportFeedbackWidgetManually, You have entered a rating lower than 1. Changing it back to 1 now."),y.rating=1),O=["rating","comment","email","contactMe"]}N=n.STAR_RATING}else{u(r.ERROR,"reportFeedbackWidgetManually, Widget has an unacceptable type");return}var L={key:N,count:1,segmentation:{widget_id:s._id,platform:this.platform,app_version:this.metrics._app_version||this.app_version}};y===null?L.segmentation.closed=1:L.segmentation=Re(L.segmentation,y,O),u(r.INFO,"reportFeedbackWidgetManually, Reporting "+P+": ",L),Ye(L)}},this.show_feedback_popup=function(s){u(r.WARNING,"show_feedback_popup, Deprecated function call! Use 'presentRatingWidgetWithID' in place of this call. Call will be redirected now!"),this.presentRatingWidgetWithID(s)},this.presentRatingWidgetWithID=function(s){u(r.INFO,"presentRatingWidgetWithID, Showing rating widget popup for the widget with ID: [ "+s+" ]"),this.check_consent(t.STAR_RATING)&&(se?u(r.ERROR,"presentRatingWidgetWithID, Cannot show ratingWidget popup in offline mode"):ft("presentRatingWidgetWithID",this.url+"/o/feedback/widget",{widget_id:s},function(f,y,O){if(f){u(r.ERROR,"presentRatingWidgetWithID, An error occurred: "+f);return}try{var P=JSON.parse(O);Ci(P,!1)}catch(N){u(r.ERROR,"presentRatingWidgetWithID, JSON parse failed: "+N)}},!0))},this.initialize_feedback_popups=function(s){u(r.WARNING,"initialize_feedback_popups, Deprecated function call! Use 'initializeRatingWidgets' in place of this call. Call will be redirected now!"),this.initializeRatingWidgets(s)},this.initializeRatingWidgets=function(s){if(u(r.INFO,"initializeRatingWidgets, Initializing rating widget with provided widget IDs:[ "+s+"]"),!!this.check_consent(t.STAR_RATING)){s||(s=ue("cly_fb_widgets"));for(var f=document.getElementsByClassName("countly-feedback-sticker");f.length>0;)f[0].remove();ft("initializeRatingWidgets",this.url+"/o/feedback/multiple-widgets-by-id",{widgets:JSON.stringify(s)},function(y,O,P){if(y){u(r.ERROR,"initializeRatingWidgets, An error occurred: "+y);return}try{for(var N=JSON.parse(P),L=0;L<N.length;L++)if(N[L].is_active==="true"){var R=N[L].target_devices,V=De();if(R[V])if(typeof N[L].hide_sticker=="string"&&(N[L].hide_sticker=N[L].hide_sticker==="true"),N[L].target_page==="all"&&!N[L].hide_sticker)Ci(N[L],!0);else for(var H=N[L].target_pages,ee=0;ee<H.length;ee++){var ye=H[ee].substr(0,H[ee].length-1)===window.location.pathname.substr(0,H[ee].length-1),ve=H[ee]===window.location.pathname,Xe=H[ee].includes("*");(Xe&&ye||ve)&&!N[L].hide_sticker&&Ci(N[L],!0)}}}catch(Ue){u(r.ERROR,"initializeRatingWidgets, JSON parse error: "+Ue)}},!0)}},this.enable_feedback=function(s){u(r.WARNING,"enable_feedback, Deprecated function call! Use 'enableRatingWidgets' in place of this call. Call will be redirected now!"),this.enableRatingWidgets(s)},this.enableRatingWidgets=function(s){if(u(r.INFO,"enableRatingWidgets, Enabling rating widget with params:",s),!!this.check_consent(t.STAR_RATING))if(se)u(r.ERROR,"enableRatingWidgets, Cannot enable rating widgets in offline mode");else{ae("cly_fb_widgets",s.popups||s.widgets),be(this.url+"/star-rating/stylesheets/countly-feedback-web.css");var f=s.popups||s.widgets;f.length>0?(document.body.insertAdjacentHTML("beforeend",'<div id="cfbg"></div>'),this.initializeRatingWidgets(f)):u(r.ERROR,"enableRatingWidgets, You should provide at least one widget id as param. Read documentation for more detail. https://resources.count.ly/plugins/feedback")}},this.get_available_feedback_widgets=function(s){if(u(r.INFO,"get_available_feedback_widgets, Getting the feedback list, callback function is provided:["+!!s+"]"),!this.check_consent(t.FEEDBACK)){s&&s(null,new Error("Consent for feedback not provided."));return}if(se){u(r.ERROR,"get_available_feedback_widgets, Cannot enable feedback widgets in offline mode.");return}var f=this.url+Ne,y={method:t.FEEDBACK,device_id:this.device_id,app_key:this.app_key};ft("get_available_feedback_widgets",f,y,function(O,P,N){if(O){u(r.ERROR,"get_available_feedback_widgets, Error occurred while fetching feedbacks: "+O),s&&s(null,O);return}try{var L=JSON.parse(N),R=L.result||[];s&&s(R,null);return}catch(V){u(r.ERROR,"get_available_feedback_widgets, Error while parsing feedback widgets list: "+V),s&&s(null,V)}},!1)},this.getFeedbackWidgetData=function(s,f){if(!s.type){u(r.ERROR,"getFeedbackWidgetData, Expected the provided widget object to have a type but got: ["+JSON.stringify(s)+"], aborting.");return}if(u(r.INFO,"getFeedbackWidgetData, Retrieving data for: ["+JSON.stringify(s)+"], callback function is provided:["+!!f+"]"),!this.check_consent(t.FEEDBACK)){f&&f(null,new Error("Consent for feedback not provided."));return}if(se){u(r.ERROR,"getFeedbackWidgetData, Cannot enable feedback widgets in offline mode.");return}var y=this.url,O={widget_id:s._id,shown:1,sdk_version:c,sdk_name:b,platform:this.platform,app_version:this.app_version};if(s.type==="nps")y+="/o/surveys/nps/widget";else if(s.type==="survey")y+="/o/surveys/survey/widget";else if(s.type==="rating")y+="/o/surveys/rating/widget";else{u(r.ERROR,"getFeedbackWidgetData, Unknown type info: ["+s.type+"]");return}ft("getFeedbackWidgetData",y,O,P,!0);function P(N,L,R){if(N){u(r.ERROR,"getFeedbackWidgetData, Error occurred while fetching feedbacks: "+N),f&&f(null,N);return}try{var V=JSON.parse(R);f&&f(V,null);return}catch(H){u(r.ERROR,"getFeedbackWidgetData, Error while parsing feedback widgets list: "+H),f&&f(null,H)}}},this.present_feedback_widget=function(s,f,y){if(u(r.INFO,"present_feedback_widget, Presenting the feedback widget by appending to the element with ID: [ "+f+" ] and className: [ "+y+" ]"),!this.check_consent(t.FEEDBACK))return;if(!s||typeof s!="object"||Array.isArray(s)){u(r.ERROR,"present_feedback_widget, Please provide at least one feedback widget object.");return}try{var O=this.url;if(s.type==="nps")u(r.DEBUG,"present_feedback_widget, Widget type: nps."),O+="/feedback/nps";else if(s.type==="survey")u(r.DEBUG,"present_feedback_widget, Widget type: survey."),O+="/feedback/survey";else if(s.type==="rating")u(r.DEBUG,"present_feedback_widget, Widget type: rating."),O+="/feedback/rating";else{u(r.ERROR,"present_feedback_widget, Feedback widget only accepts nps, rating and survey types.");return}var P=window.origin||window.location.origin,N;s.type==="rating"?(u(r.DEBUG,"present_feedback_widget, Loading css for rating widget."),N="ratings",be(this.url+"/star-rating/stylesheets/countly-feedback-web.css")):(u(r.DEBUG,"present_feedback_widget, Loading css for survey or nps."),be(this.url+"/surveys/stylesheets/countly-surveys.css"),N="surveys"),O+="?widget_id="+s._id,O+="&app_key="+this.app_key,O+="&device_id="+this.device_id,O+="&sdk_name="+b,O+="&platform="+this.platform,O+="&app_version="+this.app_version,O+="&sdk_version="+c,O+="&origin="+P,O+="&widget_v=web";var L=document.createElement("iframe");L.src=O,L.name="countly-"+N+"-iframe",L.id="countly-"+N+"-iframe";var R=!1;L.onload=function(){R&&(document.getElementById("countly-"+N+"-wrapper-"+s._id).style.display="none",document.getElementById("csbg").style.display="none"),R=!0,u(r.DEBUG,"present_feedback_widget, Loaded iframe.")};for(var V=document.getElementById("csbg");V;)V.remove(),V=document.getElementById("csbg"),u(r.DEBUG,"present_feedback_widget, Removing past overlay.");for(var H=document.getElementsByClassName("countly-"+N+"-wrapper"),ee=0;ee<H.length;ee++)H[ee].remove(),u(r.DEBUG,"present_feedback_widget, Removed a wrapper.");H=document.createElement("div"),H.className="countly-"+N+"-wrapper",H.id="countly-"+N+"-wrapper-"+s._id,s.type==="survey"&&(H.className=H.className+" "+s.appearance.position);var ye=document.body,ve=!1;if(f&&(document.getElementById(f)?(ye=document.getElementById(f),ve=!0):u(r.ERROR,"present_feedback_widget, Provided ID not found.")),ve||y&&(document.getElementsByClassName(y)[0]?ye=document.getElementsByClassName(y)[0]:u(r.ERROR,"present_feedback_widget, Provided class not found.")),ye.insertAdjacentHTML("beforeend",'<div id="csbg"></div>'),ye.appendChild(H),s.type==="rating"){var Xe=document.createElement("div");Xe.className="countly-ratings-overlay",Xe.id="countly-ratings-overlay-"+s._id,H.appendChild(Xe),u(r.DEBUG,"present_feedback_widget, appended the rating overlay to wrapper"),ie(document.getElementById("countly-ratings-overlay-"+s._id),"click",function(){document.getElementById("countly-ratings-wrapper-"+s._id).style.display="none"})}if(H.appendChild(L),u(r.DEBUG,"present_feedback_widget, Appended the iframe"),ie(window,"message",function(me){var Je={};try{Je=JSON.parse(me.data),u(r.DEBUG,"present_feedback_widget, Parsed response message "+Je)}catch(Rr){u(r.ERROR,"present_feedback_widget, Error while parsing message body "+Rr)}if(!Je.close){u(r.DEBUG,"present_feedback_widget, Closing signal not sent yet");return}document.getElementById("countly-"+N+"-wrapper-"+s._id).style.display="none",document.getElementById("csbg").style.display="none"}),s.type==="survey"){var Ue=!1;switch(s.showPolicy){case"afterPageLoad":document.readyState==="complete"?Ue||(Ue=!0,kt(s)):ie(document,"readystatechange",function(me){me.target.readyState==="complete"&&(Ue||(Ue=!0,kt(s)))});break;case"afterConstantDelay":setTimeout(function(){Ue||(Ue=!0,kt(s))},1e4);break;case"onAbandon":document.readyState==="complete"?ie(document,"mouseleave",function(){Ue||(Ue=!0,kt(s))}):ie(document,"readystatechange",function(me){me.target.readyState==="complete"&&ie(document,"mouseleave",function(){Ue||(Ue=!0,kt(s))})});break;case"onScrollHalfwayDown":ie(window,"scroll",function(){if(!Ue){var me=Math.max(window.scrollY,document.body.scrollTop,document.documentElement.scrollTop),Je=G();me>=Je/2&&(Ue=!0,kt(s))}});break;default:Ue||(Ue=!0,kt(s))}}else if(s.type==="nps")document.getElementById("countly-"+N+"-wrapper-"+s._id).style.display="block",document.getElementById("csbg").style.display="block";else if(s.type==="rating"){var ti=!1;document.readyState==="complete"?ti||(ti=!0,kn(s)):ie(document,"readystatechange",function(me){me.target.readyState==="complete"&&(ti||(ti=!0,kn(s)))})}}catch(me){u(r.ERROR,"present_feedback_widget, Something went wrong while presenting the widget: "+me)}function kt(me){document.getElementById("countly-surveys-wrapper-"+me._id).style.display="block",document.getElementById("csbg").style.display="block"}function kn(me){if(!me.appearance.hideS){u(r.DEBUG,"present_feedback_widget, handling the sticker as it was not set to hidden");var Je=document.createElement("div");Je.innerText=me.appearance.text,Je.style.color=me.appearance.text_color.length<7?"#"+me.appearance.text_color:me.appearance.text_color,Je.style.backgroundColor=me.appearance.bg_color.length<7?"#"+me.appearance.bg_color:me.appearance.bg_color,Je.className="countly-feedback-sticker  "+me.appearance.position+"-"+me.appearance.size,Je.id="countly-feedback-sticker-"+me._id,document.body.appendChild(Je),ie(document.getElementById("countly-feedback-sticker-"+me._id),"click",function(){document.getElementById("countly-ratings-wrapper-"+me._id).style.display="flex",document.getElementById("csbg").style.display="block"})}ie(document.getElementById("countly-feedback-close-icon-"+me._id),"click",function(){document.getElementById("countly-ratings-wrapper-"+me._id).style.display="none",document.getElementById("csbg").style.display="none"})}},this.recordError=function(s,f,y){if(u(r.INFO,"recordError, Recording error"),this.check_consent(t.CRASHES)&&s){y=y||At;var O="";if(typeof s=="object"?typeof s.stack<"u"?O=s.stack:(typeof s.name<"u"&&(O+=s.name+":"),typeof s.message<"u"&&(O+=s.message+`
`),typeof s.fileName<"u"&&(O+="in "+s.fileName+`
`),typeof s.lineNumber<"u"&&(O+="on "+s.lineNumber),typeof s.columnNumber<"u"&&(O+=":"+s.columnNumber)):O=s+"",O.length>p.maxStackTraceLineLength*p.maxStackTraceLinesPerThread){u(r.DEBUG,"record_error, Error stack is too long will be truncated");var P=O.split(`
`);P.length>p.maxStackTraceLinesPerThread&&(P=P.splice(0,p.maxStackTraceLinesPerThread));for(var N=0,L=P.length;N<L;N++)P[N].length>p.maxStackTraceLineLength&&(P[N]=P[N].substring(0,p.maxStackTraceLineLength));O=P.join(`
`)}f=!!f;var R=ei(),V={_resolution:R._resolution,_error:O,_app_version:R._app_version,_run:I()-un};V._not_os_specific=!0,V._javascript=!0;var H=navigator.battery||navigator.webkitBattery||navigator.mozBattery||navigator.msBattery;H&&(V._bat=Math.floor(H.level*100)),typeof navigator.onLine<"u"&&(V._online=!!navigator.onLine),V._background=!document.hasFocus(),Ge.length>0&&(V._logs=Ge.join(`
`)),Ge=[],V._nonfatal=f,V._view=this.getViewName(),typeof y<"u"&&(y=T(y,p.maxKeyLength,p.maxValueSize,p.maxSegmentationValues,"record_error",u),V._custom=y);try{var ee=document.createElement("canvas"),ye=ee.getContext("experimental-webgl");V._opengl=ye.getParameter(ye.VERSION)}catch(Xe){u(r.ERROR,"Could not get the experimental-webgl context: "+Xe)}var ve={};ve.crash=JSON.stringify(V),ve.metrics=JSON.stringify({_ua:R._ua}),Fe(ve)}};function hn(){p.ignore_prefetch&&typeof document.visibilityState<"u"&&document.visibilityState==="prerender"&&(p.ignore_visitor=!0),p.ignore_bots&&h()&&(p.ignore_visitor=!0)}function Ct(){Oe.length>0&&(u(r.DEBUG,"Flushing events"),Fe({events:JSON.stringify(Oe)}),Oe=[],ae("cly_event",Oe))}function Ci(s,f){var y=!!document.getElementById("countly-feedback-sticker-"+s._id);if(y){u(r.ERROR,"Widget with same ID exists");return}try{var O=document.createElement("div");O.className="countly-iframe-wrapper",O.id="countly-iframe-wrapper-"+s._id;var P=document.createElement("span");P.className="countly-feedback-close-icon",P.id="countly-feedback-close-icon-"+s._id,P.innerText="x";var N=document.createElement("iframe");if(N.name="countly-feedback-iframe",N.id="countly-feedback-iframe",N.src=p.url+"/feedback?widget_id="+s._id+"&app_key="+p.app_key+"&device_id="+p.device_id+"&sdk_version="+c,document.body.appendChild(O),O.appendChild(P),O.appendChild(N),ie(document.getElementById("countly-feedback-close-icon-"+s._id),"click",function(){document.getElementById("countly-iframe-wrapper-"+s._id).style.display="none",document.getElementById("cfbg").style.display="none"}),f){var L=document.createElementNS("http://www.w3.org/2000/svg","svg");L.id="feedback-sticker-svg",L.setAttribute("aria-hidden","true"),L.setAttribute("data-prefix","far"),L.setAttribute("data-icon","grin"),L.setAttribute("class","svg-inline--fa fa-grin fa-w-16"),L.setAttribute("role","img"),L.setAttribute("xmlns","http://www.w3.org/2000/svg"),L.setAttribute("viewBox","0 0 496 512");var R=document.createElementNS("http://www.w3.org/2000/svg","path");R.id="smileyPathInStickerSvg",R.setAttribute("fill","white"),R.setAttribute("d","M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 448c-110.3 0-200-89.7-200-200S137.7 56 248 56s200 89.7 200 200-89.7 200-200 200zm105.6-151.4c-25.9 8.3-64.4 13.1-105.6 13.1s-79.6-4.8-105.6-13.1c-9.9-3.1-19.4 5.4-17.7 15.3 7.9 47.1 71.3 80 123.3 80s115.3-32.9 123.3-80c1.6-9.8-7.7-18.4-17.7-15.3zM168 240c17.7 0 32-14.3 32-32s-14.3-32-32-32-32 14.3-32 32 14.3 32 32 32zm160 0c17.7 0 32-14.3 32-32s-14.3-32-32-32-32 14.3-32 32 14.3 32 32 32z");var V=document.createElement("span");V.innerText=s.trigger_button_text;var H=document.createElement("div");H.style.color=s.trigger_font_color.length<7?"#"+s.trigger_font_color:s.trigger_font_color,H.style.backgroundColor=s.trigger_bg_color.length<7?"#"+s.trigger_bg_color:s.trigger_bg_color,H.className="countly-feedback-sticker  "+s.trigger_position+"-"+s.trigger_size,H.id="countly-feedback-sticker-"+s._id,L.appendChild(R),H.appendChild(L),H.appendChild(V),document.body.appendChild(H);var ee=document.getElementById("smileyPathInStickerSvg");ee&&(ee.style.fill=s.trigger_font_color.length<7?"#"+s.trigger_font_color:s.trigger_font_color),ie(document.getElementById("countly-feedback-sticker-"+s._id),"click",function(){document.getElementById("countly-iframe-wrapper-"+s._id).style.display="block",document.getElementById("cfbg").style.display="block"})}else document.getElementById("countly-iframe-wrapper-"+s._id).style.display="block",document.getElementById("cfbg").style.display="block"}catch(ye){u(r.ERROR,"Somethings went wrong while element injecting process: "+ye)}}function dn(){var s;if(typeof p.onload<"u"&&p.onload.length>0){for(s=0;s<p.onload.length;s++)typeof p.onload[s]=="function"&&p.onload[s](p);p.onload=[]}}function Bi(){if(We){var s={name:We};p.check_consent(t.VIEWS)&&(Ye({key:n.VIEW,dur:vt?I()-Me:_t,segmentation:s},ut),We=null)}}function yr(){return We}function gn(){if(le){var s=ue("cly_session");(!s||parseInt(s)<=I())&&(Y=!1,p.begin_session(!it)),ae("cly_session",I()+Ee*60)}}function Xt(s){s.app_key=p.app_key,s.device_id=p.device_id,s.sdk_name=b,s.sdk_version=c,s.t=ke;var f=mn();if(!s.metrics)s.metrics=JSON.stringify({_ua:f});else{var y=JSON.parse(s.metrics);y._ua||(y._ua=f,s.metrics=JSON.stringify(y))}p.check_consent(t.LOCATION)?(p.country_code&&(s.country_code=p.country_code),p.city&&(s.city=p.city),p.ip_address!==null&&(s.ip_address=p.ip_address)):s.location="",s.timestamp=W();var O=new Date;s.hour=O.getHours(),s.dow=O.getDay()}function Fe(s){if(p.ignore_visitor){u(r.WARNING,"User is opt_out will ignore the request: "+s);return}if(!p.app_key||!p.device_id){u(r.ERROR,"app_key or device_id is missing ",p.app_key,p.device_id);return}Xt(s),he.length>xe&&he.shift(),he.push(s),ae("cly_queue",he,!0)}function Qt(){if(dn(),p.ignore_visitor){de=!1,u(r.WARNING,"User opt_out, no heartbeat");return}de=!0;var s=0;if(K&&typeof e.q<"u"&&e.q.length>0){var f,y=e.q;for(e.q=[],s=0;s<y.length;s++)if(f=y[s],u(r.DEBUG,"Processing queued call",f),typeof f=="function")f();else if(Array.isArray(f)&&f.length>0){var O=p,P=0;if(e.i[f[P]]&&(O=e.i[f[P]],P++),typeof O[f[P]]=="function")O[f[P]].apply(O,f.slice(P+1));else if(f[P].indexOf("userData.")===0){var N=f[P].replace("userData.","");typeof O.userData[N]=="function"&&O.userData[N].apply(O,f.slice(P+1))}else typeof e[f[P]]=="function"&&e[f[P]].apply(e,f.slice(P+1))}}if(Y&&it&&vt){var L=I();L-Te>S&&(p.session_duration(L-Te),Te=L)}if(Oe.length>0&&!p.test_mode_eq){if(Oe.length<=A)Fe({events:JSON.stringify(Oe)}),Oe=[];else{var R=Oe.splice(0,A);Fe({events:JSON.stringify(R)})}ae("cly_event",Oe)}if(!se&&he.length>0&&ge&&I()>i){ge=!1;var V=he[0];u(r.DEBUG,"Processing request",V),ae("cly_queue",he,!0),p.test_mode||ft("send_request_queue",p.url+we,V,function(H,ee){u(r.DEBUG,"Request Finished",ee,H),H?(i=I()+a,u(r.ERROR,"Request error: ",H)):he.shift(),ae("cly_queue",he,!0),ge=!0},!1)}setTimeout(Qt,Le)}function Di(){var s=ue("cly_id");return s?(ke=ue("cly_id_type"),s):M()}function wr(s){return/[0-9a-fA-F]{8}\-[0-9a-fA-F]{4}\-4[0-9a-fA-F]{3}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{12}/.test(s)}function mn(){return p.metrics._ua||Pe()}function ei(){var s=JSON.parse(JSON.stringify(p.metrics||{}));if(s._app_version=s._app_version||p.app_version,s._ua=s._ua||Pe(),screen.width){var f=screen.width?parseInt(screen.width):0,y=screen.height?parseInt(screen.height):0;if(f!==0&&y!==0){var O=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);if(O&&window.devicePixelRatio)f=Math.round(f*window.devicePixelRatio),y=Math.round(y*window.devicePixelRatio);else if(Math.abs(window.orientation)===90){var P=f;f=y,y=P}s._resolution=s._resolution||""+f+"x"+y}}window.devicePixelRatio&&(s._density=s._density||window.devicePixelRatio);var N=navigator.language||navigator.browserLanguage||navigator.systemLanguage||navigator.userLanguage;if(typeof N<"u"&&(s._locale=s._locale||N),typeof document.referrer<"u"&&document.referrer.length){var L=C.exec(document.referrer);if(L&&L[11]&&L[11]!==window.location.hostname){var R=!1;if(He&&He.length)for(var V=0;V<He.length;V++)try{var H=new RegExp(He[V]);if(H.test(document.referrer)){u(r.DEBUG,"Ignored: "+document.referrer),R=!0;break}}catch(ee){u(r.ERROR,"Problem with ignoring: "+He[V],", error: "+ee)}R||(s._store=s._store||document.referrer)}}return u(r.DEBUG,"Got metrics",s),s}function u(s,f){if(p.debug&&typeof console<"u"){arguments[2]&&typeof arguments[2]=="object"&&(arguments[2]=JSON.stringify(arguments[2])),K||(f="["+p.app_key+"] "+f),s||(s=r.DEBUG);for(var y="",O=2;O<arguments.length;O++)y+=arguments[O];var P=s+f+y;s===r.ERROR?console.error(P):s===r.WARNING?console.warn(P):s===r.INFO?console.info(P):s===r.VERBOSE?console.log(P):console.debug(P)}}function ft(s,f,y,O,P){P=P||!1;try{u(r.DEBUG,"Sending XML HTTP request");var N=null;window.XMLHttpRequest?N=new window.XMLHttpRequest:window.ActiveXObject&&(N=new window.ActiveXObject("Microsoft.XMLHTTP")),y=y||{};var L=z(y),R="GET";(p.force_post||L.length>=2e3)&&(R="POST"),R==="GET"?N.open("GET",f+"?"+L,!0):(N.open("POST",f,!0),N.setRequestHeader("Content-type","application/x-www-form-urlencoded"));for(var V in p.headers)N.setRequestHeader(V,p.headers[V]);N.onreadystatechange=function(){if(this.readyState===4){u(r.DEBUG,s+" HTTP request completed ["+this.status+"]["+this.responseText+"]");var H;P?H=wn(this.status,this.responseText):H=yn(this.status,this.responseText),H?typeof O=="function"&&O(!1,y,this.responseText):(u(r.ERROR,s+" Failed Server XML HTTP request, ",this.status),typeof O=="function"&&O(!0,y))}},R==="GET"?N.send():N.send(L)}catch(H){u(r.ERROR,s+" Failed XML HTTP request: "+H),typeof O=="function"&&O(!0,y)}}function yn(s,f){if(!(s>=200&&s<300))return u(r.ERROR,"Http response status code is not within the expected range:["+s+"]"),!1;try{var y=JSON.parse(f);return Object.prototype.toString.call(y)!=="[object Object]"?(u(r.ERROR,"Http response is not JSON Object"),!1):!!y.result}catch(O){return u(r.ERROR,"Http response is not JSON: "+O),!1}}function wn(s,f){if(!(s>=200&&s<300))return u(r.ERROR,"Http response status code is not within the expected range: "+s),!1;try{var y=JSON.parse(f);return Object.prototype.toString.call(y)!=="[object Object]"&&!Array.isArray(y)?(u(r.ERROR,"Http response is not JSON Object nor JSON Array"),!1):!0}catch(O){return u(r.ERROR,"Http response is not JSON: "+O),!1}}function _n(){Gt=Math.max(Gt,window.scrollY,document.body.scrollTop,document.documentElement.scrollTop)}function Li(){if(jt){jt=!1;var s=G(),f=Q(),y=te();if(p.check_consent(t.SCROLLS)){var O={type:"scroll",y:Gt+y,width:f,height:s,view:p.getViewUrl()};O=T(O,p.maxKeyLength,p.maxValueSize,p.maxSegmentationValues,"processScrollView",u),p.track_domains&&(O.domain=window.location.hostname),Ye({key:n.ACTION,segmentation:O})}}}function _r(){return ke}function vn(s){ae("cly_token",s)}function vr(){var s=ue("cly_token");return rt("cly_token"),s}function br(){return Oe}function kr(){return he}function Sr(s){for(var f=s+"=",y=document.cookie.split(";"),O=0,P=y.length;O<P;O++){for(var N=y[O];N.charAt(0)===" ";)N=N.substring(1,N.length);if(N.indexOf(f)===0)return N.substring(f.length,N.length)}return null}function bn(s,f,y){var O=new Date;O.setTime(O.getTime()+y*24*60*60*1e3);var P="; expires="+O.toGMTString();document.cookie=s+"="+f+P+"; path=/"}function ue(s,f,y){if(p.storage==="none"){u(r.WARNING,"Storage is disabled. Value with key: "+s+" won't be retrieved");return}y||(s=p.app_key+"/"+s,p.namespace&&(s=ne(p.namespace)+"/"+s)),f===void 0&&(f=bt);var O;return f?O=localStorage.getItem(s):p.storage!=="localstorage"&&(O=Sr(s)),p.deserialize(O)}function ae(s,f,y,O){if(p.storage==="none"){u(r.WARNING,"Storage is disabled. Value with key: "+s+" won't be stored");return}O||(s=p.app_key+"/"+s,p.namespace&&(s=ne(p.namespace)+"/"+s)),y===void 0&&(y=bt),typeof f<"u"&&f!==null&&(f=p.serialize(f),y?localStorage.setItem(s,f):p.storage!=="localstorage"&&bn(s,f,30))}function rt(s,f,y){if(p.storage==="none"){u(r.WARNING,"Storage is disabled. Value with key: "+s+" won't be removed");return}y||(s=p.app_key+"/"+s,p.namespace&&(s=ne(p.namespace)+"/"+s)),f===void 0&&(f=bt),f?localStorage.removeItem(s):p.storage!=="localstorage"&&bn(s,"",-1)}function Er(){if(ue(p.namespace+"cly_id",!1,!0)){ae("cly_id",ue(p.namespace+"cly_id",!1,!0)),ae("cly_id_type",ue(p.namespace+"cly_id_type",!1,!0)),ae("cly_event",ue(p.namespace+"cly_event",!1,!0)),ae("cly_session",ue(p.namespace+"cly_session",!1,!0));var s=ue(p.namespace+"cly_queue",!1,!0);Array.isArray(s)&&(s=s.filter(function(f){return f.app_key===p.app_key}),ae("cly_queue",s)),ue(p.namespace+"cly_cmp_id",!1,!0)&&(ae("cly_cmp_id",ue(p.namespace+"cly_cmp_id",!1,!0)),ae("cly_cmp_uid",ue(p.namespace+"cly_cmp_uid",!1,!0))),ue(p.namespace+"cly_ignore",!1,!0)&&ae("cly_ignore",ue(p.namespace+"cly_ignore",!1,!0)),rt("cly_id",!1,!0),rt("cly_id_type",!1,!0),rt("cly_event",!1,!0),rt("cly_session",!1,!0),rt("cly_queue",!1,!0),rt("cly_cmp_id",!1,!0),rt("cly_cmp_uid",!1,!0),rt("cly_ignore",!1,!0)}}this.onStorageChange=function(s,f){switch(u(r.INFO,"onStorageChange, Applying storage changes"),s){case"cly_queue":he=p.deserialize(f||"[]");break;case"cly_event":Oe=p.deserialize(f||"[]");break;case"cly_remote_configs":Ae=p.deserialize(f||"{}");break;case"cly_ignore":p.ignore_visitor=p.deserialize(f);break;case"cly_id":p.device_id=p.deserialize(f);break;case"cly_id_type":ke=p.deserialize(f);break;default:}},this._internals={store:ae,getDocWidth:Q,getDocHeight:G,getViewportHeight:te,get_page_coord:k,get_event_target:oe,add_event:ie,createNewObjectFromProperties:re,truncateObject:T,truncateSingleValue:J,stripTrailingSlash:ne,prepareParams:z,sendXmlHttpRequest:ft,isResponseValid:yn,getInternalDeviceIdType:_r,getMsTimestamp:W,getTimestamp:I,isResponseValidBroad:wn,secureRandom:D,log:u,getMetrics:ei,getUA:mn,prepareRequest:Xt,generateUUID:M,sendEventsForced:Ct,isUUID:wr,getId:Di,heartBeat:Qt,toRequestQueue:Fe,reportViewDuration:Bi,loadJS:_e,loadCSS:be,getLastView:yr,setToken:vn,getToken:vr,showLoader:tt,hideLoader:Mt,setValueInStorage:ae,getValueFromStorage:ue,removeValueFromStorage:rt,add_cly_events:Ye,processScrollView:Li,processScroll:_n,currentUserAgentString:Pe,userAgentDeviceDetection:De,userAgentSearchBotDetection:h,getRequestQueue:kr,getEventQueue:br,clearQueue:function(){he=[],ae("cly_queue",[]),Oe=[],ae("cly_event",[])}},this.initialize()};e.CountlyClass=w,e.init=function(m){m=m||{};var p=m.app_key||e.app_key;if(!e.i||!e.i[p]){var K=new e.CountlyClass(m);if(!e.i){e.i={};for(var Y in K)e[Y]=K[Y]}e.i[p]=K}return e.i[p]};function x(m){var p=[];if(typeof m.options<"u")for(var K=0;K<m.options.length;K++)m.options[K].selected&&p.push(m.options[K].value);return p.join(", ")}function D(){var m="xxxxxxxx";m=E(m,"[x]");var p=Date.now().toString();return m+p}function M(){var m="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx";return m=E(m,"[xy]"),m}function E(m,p){var K=new Date().getTime(),Y=new RegExp(p,"g");return m.replace(Y,function(we){var Ne=(K+Math.random()*16)%16|0;return(we==="x"?Ne:Ne&3|8).toString(16)})}function I(){return Math.floor(new Date().getTime()/1e3)}var j=0;function W(){var m=new Date().getTime();return j>=m?j++:j=m,j}function B(m,p,K){if(p&&Object.keys(p).length){if(typeof p[m]<"u")return p[m]}else if(typeof e[m]<"u")return e[m];return K}function X(m,p,K){for(var Y in e.i)e.i[Y].tracking_crashes&&e.i[Y].recordError(m,p,K)}function z(m){var p=[];for(var K in m)p.push(K+"="+encodeURIComponent(m[K]));return p.join("&")}function ne(m){return typeof m=="string"&&m.substring(m.length-1)==="/"?m.substring(0,m.length-1):m}function re(m,p){for(var K={},Y,we=0,Ne=p.length;we<Ne;we++)Y=p[we],typeof m[Y]<"u"&&(K[Y]=m[Y]);return K}function Re(m,p,K){if(K){for(var Y,we=0,Ne=K.length;we<Ne;we++)Y=K[we],typeof p[Y]<"u"&&(m[Y]=p[Y]);return m}}function T(m,p,K,Y,we,Ne){var Le={};if(m){if(Object.keys(m).length>Y){var xe={},he=0;for(var Oe in m)he<Y&&(xe[Oe]=m[Oe],he++);m=xe}for(var Ae in m){var Ge=J(Ae,p,we,Ne),ze=J(m[Ae],K,we,Ne);Le[Ge]=ze}}return Le}function J(m,p,K,Y){var we=m;return typeof m=="number"&&(m=m.toString()),typeof m=="string"&&m.length>p&&(we=m.substring(0,p),Y(r.DEBUG,K+", Key: [ "+m+" ] is longer than accepted length. It will be truncated.")),we}var je=function(m,p){for(p=p.toUpperCase();m;){if(m.nodeName.toUpperCase()===p)return m;m=m.parentElement}},ie=function(m,p,K){typeof m.addEventListener<"u"?m.addEventListener(p,K,!1):m.attachEvent("on"+p,K)},oe=function(m){return m?typeof m.target<"u"?m.target:m.srcElement:window.event.srcElement};function Pe(m){if(m)return m;var p=navigator.userAgent;return p||navigator.userAgentData&&(p=navigator.userAgentData.brands.map(function(K){return K.brand+":"+K.version}).join(),p+=navigator.userAgentData.mobile?" mobi ":" ",p+=navigator.userAgentData.platform),p}function De(m){var p;if(m)p=m;else{if(navigator.userAgentData.mobile)return"phone";p=Pe()}p=p.toLowerCase();var K="desktop",Y=/(ipad|tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/,we=/(mobi|ipod|phone|blackberry|opera mini|fennec|minimo|symbian|psp|nintendo ds|archos|skyfire|puffin|blazer|bolt|gobrowser|iris|maemo|semc|teashark|uzard)/;return Y.test(p)?K="tablet":we.test(p)&&(K="phone"),K}function h(m){var p=/(CountlySiteBot|nuhk|Googlebot|GoogleSecurityScanner|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver|bingbot|Google Web Preview|Mediapartners-Google|AdsBot-Google|Baiduspider|Ezooms|YahooSeeker|AltaVista|AVSearch|Mercator|Scooter|InfoSeek|Ultraseek|Lycos|Wget|YandexBot|Yandex|YaDirectFetcher|SiteBot|Exabot|AhrefsBot|MJ12bot|TurnitinBot|magpie-crawler|Nutch Crawler|CMS Crawler|rogerbot|Domnutch|ssearch_bot|XoviBot|netseer|digincore|fr-crawler|wesee|AliasIO|contxbot|PingdomBot|BingPreview|HeadlessChrome)/;return p.test(m||Pe())}function k(m){return typeof m.pageY>"u"&&typeof m.clientX=="number"&&document.documentElement&&(m.pageX=m.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,m.pageY=m.clientY+document.body.scrollTop+document.documentElement.scrollTop),m}function G(){var m=document;return Math.max(Math.max(m.body.scrollHeight,m.documentElement.scrollHeight),Math.max(m.body.offsetHeight,m.documentElement.offsetHeight),Math.max(m.body.clientHeight,m.documentElement.clientHeight))}function Q(){var m=document;return Math.max(Math.max(m.body.scrollWidth,m.documentElement.scrollWidth),Math.max(m.body.offsetWidth,m.documentElement.offsetWidth),Math.max(m.body.clientWidth,m.documentElement.clientWidth))}function te(){var m=document;return Math.min(Math.min(m.body.clientHeight,m.documentElement.clientHeight),Math.min(m.body.offsetHeight,m.documentElement.offsetHeight),window.innerHeight)}function q(){return window.innerWidth>window.innerHeight?"landscape":"portrait"}window.addEventListener("storage",function(m){var p=(m.key+"").split("/"),K=p.pop(),Y=p.pop();e.i&&e.i[Y]&&e.i[Y].onStorageChange(K,m.newValue)});function pe(m,p,K,Y,we,Ne){var Le=document.createElement(m),xe;Le.setAttribute(p,K),Le.setAttribute(Y,we);var he=function(){xe||Ne(),xe=!0};Ne&&(Le.onreadystatechange=he,Le.onload=he),document.getElementsByTagName("head")[0].appendChild(Le)}function _e(m,p){pe("script","type","text/javascript","src",m,p)}function be(m,p){pe("link","rel","stylesheet","href",m,p)}function tt(){var m=document.getElementById("cly-loader");if(!m){var p="#cly-loader {height: 4px; width: 100%; position: absolute; z-index: 99999; overflow: hidden; background-color: #fff; top:0px; left:0px;}#cly-loader:before{display: block; position: absolute; content: ''; left: -200px; width: 200px; height: 4px; background-color: #2EB52B; animation: cly-loading 2s linear infinite;}@keyframes cly-loading { from {left: -200px; width: 30%;} 50% {width: 30%;} 70% {width: 70%;} 80% { left: 50%;} 95% {left: 120%;} to {left: 100%;}}",K=document.head||document.getElementsByTagName("head")[0],Y=document.createElement("style");Y.type="text/css",Y.styleSheet?Y.styleSheet.cssText=p:Y.appendChild(document.createTextNode(p)),K.appendChild(Y),m=document.createElement("div"),m.setAttribute("id","cly-loader"),document.body.onload=function(){if(!e.showLoaderProtection)try{document.body.appendChild(m)}catch{}}}m.style.display="block"}function Mt(){e.showLoaderProtection=!0;var m=document.getElementById("cly-loader");m&&(m.style.display="none")}return e.serialize=function(m){return typeof m=="object"&&(m=JSON.stringify(m)),m},e.deserialize=function(m){try{m=JSON.parse(m)}catch{}return m},e.getViewName=function(){return window.location.pathname},e.getViewUrl=function(){return window.location.pathname},e.getSearchQuery=function(){return window.location.search},e.DeviceIdType={DEVELOPER_SUPPLIED:d.DEVELOPER_SUPPLIED,SDK_GENERATED:d.SDK_GENERATED,TEMPORARY_ID:d.TEMPORARY_ID},e})});try{self["workbox:window:7.0.0"]&&_()}catch{}function Rn(e,t){return new Promise(function(n){var o=new MessageChannel;o.port1.onmessage=function(r){n(r.data)},e.postMessage(t,[o.port2])})}function On(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function In(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function Cr(e,t){var n;if(typeof Symbol>"u"||e[Symbol.iterator]==null){if(Array.isArray(e)||(n=function(r,d){if(r){if(typeof r=="string")return In(r,d);var v=Object.prototype.toString.call(r).slice(8,-1);return v==="Object"&&r.constructor&&(v=r.constructor.name),v==="Map"||v==="Set"?Array.from(r):v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v)?In(r,d):void 0}}(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}return(n=e[Symbol.iterator]()).next.bind(n)}try{self["workbox:core:7.0.0"]&&_()}catch{}var Ui=function(){var e=this;this.promise=new Promise(function(t,n){e.resolve=t,e.reject=n})};function Pi(e,t){var n=location.href;return new URL(e,n).href===new URL(t,n).href}var $t=function(e,t){this.type=e,Object.assign(this,t)};function ni(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function Br(){}var Dr={type:"SKIP_WAITING"};function Nn(e,t){if(!t)return e&&e.then?e.then(Br):Promise.resolve()}var Tn=function(e){var t,n;function o(b,C){var w,x;return C===void 0&&(C={}),(w=e.call(this)||this).nn={},w.tn=0,w.rn=new Ui,w.en=new Ui,w.on=new Ui,w.un=0,w.an=new Set,w.cn=function(){var D=w.fn,M=D.installing;w.tn>0||!Pi(M.scriptURL,w.sn.toString())||performance.now()>w.un+6e4?(w.vn=M,D.removeEventListener("updatefound",w.cn)):(w.hn=M,w.an.add(M),w.rn.resolve(M)),++w.tn,M.addEventListener("statechange",w.ln)},w.ln=function(D){var M=w.fn,E=D.target,I=E.state,j=E===w.vn,W={sw:E,isExternal:j,originalEvent:D};!j&&w.mn&&(W.isUpdate=!0),w.dispatchEvent(new $t(I,W)),I==="installed"?w.wn=self.setTimeout(function(){I==="installed"&&M.waiting===E&&w.dispatchEvent(new $t("waiting",W))},200):I==="activating"&&(clearTimeout(w.wn),j||w.en.resolve(E))},w.dn=function(D){var M=w.hn,E=M!==navigator.serviceWorker.controller;w.dispatchEvent(new $t("controlling",{isExternal:E,originalEvent:D,sw:M,isUpdate:w.mn})),E||w.on.resolve(M)},w.gn=(x=function(D){var M=D.data,E=D.ports,I=D.source;return ni(w.getSW(),function(){w.an.has(I)&&w.dispatchEvent(new $t("message",{data:M,originalEvent:D,ports:E,sw:I}))})},function(){for(var D=[],M=0;M<arguments.length;M++)D[M]=arguments[M];try{return Promise.resolve(x.apply(this,D))}catch(E){return Promise.reject(E)}}),w.sn=b,w.nn=C,navigator.serviceWorker.addEventListener("message",w.gn),w}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var r,d,v,c=o.prototype;return c.register=function(b){var C=(b===void 0?{}:b).immediate,w=C!==void 0&&C;try{var x=this;return function(D,M){var E=D();return E&&E.then?E.then(M):M(E)}(function(){if(!w&&document.readyState!=="complete")return Nn(new Promise(function(D){return window.addEventListener("load",D)}))},function(){return x.mn=!!navigator.serviceWorker.controller,x.yn=x.pn(),ni(x.bn(),function(D){x.fn=D,x.yn&&(x.hn=x.yn,x.en.resolve(x.yn),x.on.resolve(x.yn),x.yn.addEventListener("statechange",x.ln,{once:!0}));var M=x.fn.waiting;return M&&Pi(M.scriptURL,x.sn.toString())&&(x.hn=M,Promise.resolve().then(function(){x.dispatchEvent(new $t("waiting",{sw:M,wasWaitingBeforeRegister:!0}))}).then(function(){})),x.hn&&(x.rn.resolve(x.hn),x.an.add(x.hn)),x.fn.addEventListener("updatefound",x.cn),navigator.serviceWorker.addEventListener("controllerchange",x.dn),x.fn})})}catch(D){return Promise.reject(D)}},c.update=function(){try{return this.fn?Nn(this.fn.update()):void 0}catch(b){return Promise.reject(b)}},c.getSW=function(){return this.hn!==void 0?Promise.resolve(this.hn):this.rn.promise},c.messageSW=function(b){try{return ni(this.getSW(),function(C){return Rn(C,b)})}catch(C){return Promise.reject(C)}},c.messageSkipWaiting=function(){this.fn&&this.fn.waiting&&Rn(this.fn.waiting,Dr)},c.pn=function(){var b=navigator.serviceWorker.controller;return b&&Pi(b.scriptURL,this.sn.toString())?b:void 0},c.bn=function(){try{var b=this;return function(C,w){try{var x=C()}catch(D){return w(D)}return x&&x.then?x.then(void 0,w):x}(function(){return ni(navigator.serviceWorker.register(b.sn,b.nn),function(C){return b.un=performance.now(),C})},function(C){throw C})}catch(C){return Promise.reject(C)}},r=o,(d=[{key:"active",get:function(){return this.en.promise}},{key:"controlling",get:function(){return this.on.promise}}])&&On(r.prototype,d),v&&On(r,v),o}(function(){function e(){this.Pn=new Map}var t=e.prototype;return t.addEventListener=function(n,o){this.Sn(n).add(o)},t.removeEventListener=function(n,o){this.Sn(n).delete(o)},t.dispatchEvent=function(n){n.target=this;for(var o,r=Cr(this.Sn(n.type));!(o=r()).done;)(0,o.value)(n)},t.Sn=function(n){return this.Pn.has(n)||this.Pn.set(n,new Set),this.Pn.get(n)},e}());function Lr(){var e=Object.create(null);e.ftp=21,e.file=0,e.gopher=70,e.http=80,e.https=443,e.ws=80,e.wss=443;var t=Object.create(null);t["%2e"]=".",t[".%2e"]="..",t["%2e."]="..",t["%2e%2e"]="..";function n(E){return e[E]!==void 0}function o(){x.call(this),this._isInvalid=!0}function r(E){return E==""&&o.call(this),E.toLowerCase()}function d(E){var I=E.charCodeAt(0);return I>32&&I<127&&[34,35,60,62,63,96].indexOf(I)==-1?E:encodeURIComponent(E)}function v(E){var I=E.charCodeAt(0);return I>32&&I<127&&[34,35,60,62,96].indexOf(I)==-1?E:encodeURIComponent(E)}var c=void 0,b=/[a-zA-Z]/,C=/[a-zA-Z0-9\+\-\.]/;function w(E,I,j){function W(k){Re.push(k)}var B=I||"scheme start",X=0,z="",ne=!1,re=!1,Re=[];e:for(;(E[X-1]!=c||X==0)&&!this._isInvalid;){var T=E[X];switch(B){case"scheme start":if(T&&b.test(T))z+=T.toLowerCase(),B="scheme";else if(I){W("Invalid scheme.");break e}else{z="",B="no scheme";continue}break;case"scheme":if(T&&C.test(T))z+=T.toLowerCase();else if(T==":"){if(this._scheme=z,z="",I)break e;n(this._scheme)&&(this._isRelative=!0),this._scheme=="file"?B="relative":this._isRelative&&j&&j._scheme==this._scheme?B="relative or authority":this._isRelative?B="authority first slash":B="scheme data"}else if(I){if(c==T)break e;W("Code point not allowed in scheme: "+T);break e}else{z="",X=0,B="no scheme";continue}break;case"scheme data":T=="?"?(this._query="?",B="query"):T=="#"?(this._fragment="#",B="fragment"):c!=T&&T!="	"&&T!=`
`&&T!="\r"&&(this._schemeData+=d(T));break;case"no scheme":if(!j||!n(j._scheme))W("Missing scheme."),o.call(this);else{B="relative";continue}break;case"relative or authority":if(T=="/"&&E[X+1]=="/")B="authority ignore slashes";else{W("Expected /, got: "+T),B="relative";continue}break;case"relative":if(this._isRelative=!0,this._scheme!="file"&&(this._scheme=j._scheme),c==T){this._host=j._host,this._port=j._port,this._path=j._path.slice(),this._query=j._query,this._username=j._username,this._password=j._password;break e}else if(T=="/"||T=="\\")T=="\\"&&W("\\ is an invalid code point."),B="relative slash";else if(T=="?")this._host=j._host,this._port=j._port,this._path=j._path.slice(),this._query="?",this._username=j._username,this._password=j._password,B="query";else if(T=="#")this._host=j._host,this._port=j._port,this._path=j._path.slice(),this._query=j._query,this._fragment="#",this._username=j._username,this._password=j._password,B="fragment";else{var J=E[X+1],je=E[X+2];(this._scheme!="file"||!b.test(T)||J!=":"&&J!="|"||c!=je&&je!="/"&&je!="\\"&&je!="?"&&je!="#")&&(this._host=j._host,this._port=j._port,this._username=j._username,this._password=j._password,this._path=j._path.slice(),this._path.pop()),B="relative path";continue}break;case"relative slash":if(T=="/"||T=="\\")T=="\\"&&W("\\ is an invalid code point."),this._scheme=="file"?B="file host":B="authority ignore slashes";else{this._scheme!="file"&&(this._host=j._host,this._port=j._port,this._username=j._username,this._password=j._password),B="relative path";continue}break;case"authority first slash":if(T=="/")B="authority second slash";else{W("Expected '/', got: "+T),B="authority ignore slashes";continue}break;case"authority second slash":if(B="authority ignore slashes",T!="/"){W("Expected '/', got: "+T);continue}break;case"authority ignore slashes":if(T!="/"&&T!="\\"){B="authority";continue}else W("Expected authority, got: "+T);break;case"authority":if(T=="@"){ne&&(W("@ already seen."),z+="%40"),ne=!0;for(var ie=0;ie<z.length;ie++){var oe=z[ie];if(oe=="	"||oe==`
`||oe=="\r"){W("Invalid whitespace in authority.");continue}if(oe==":"&&this._password===null){this._password="";continue}var Pe=d(oe);this._password!==null?this._password+=Pe:this._username+=Pe}z=""}else if(c==T||T=="/"||T=="\\"||T=="?"||T=="#"){X-=z.length,z="",B="host";continue}else z+=T;break;case"file host":if(c==T||T=="/"||T=="\\"||T=="?"||T=="#"){z.length==2&&b.test(z[0])&&(z[1]==":"||z[1]=="|")?B="relative path":(z.length==0||(this._host=r.call(this,z),z=""),B="relative path start");continue}else T=="	"||T==`
`||T=="\r"?W("Invalid whitespace in file host."):z+=T;break;case"host":case"hostname":if(T==":"&&!re){if(this._host=r.call(this,z),z="",B="port",I=="hostname")break e}else if(c==T||T=="/"||T=="\\"||T=="?"||T=="#"){if(this._host=r.call(this,z),z="",B="relative path start",I)break e;continue}else T!="	"&&T!=`
`&&T!="\r"?(T=="["?re=!0:T=="]"&&(re=!1),z+=T):W("Invalid code point in host/hostname: "+T);break;case"port":if(/[0-9]/.test(T))z+=T;else if(c==T||T=="/"||T=="\\"||T=="?"||T=="#"||I){if(z!=""){var De=parseInt(z,10);De!=e[this._scheme]&&(this._port=De+""),z=""}if(I)break e;B="relative path start";continue}else T=="	"||T==`
`||T=="\r"?W("Invalid code point in port: "+T):o.call(this);break;case"relative path start":if(T=="\\"&&W("'\\' not allowed in path."),B="relative path",T!="/"&&T!="\\")continue;break;case"relative path":if(c==T||T=="/"||T=="\\"||!I&&(T=="?"||T=="#")){T=="\\"&&W("\\ not allowed in relative path.");var h;(h=t[z.toLowerCase()])&&(z=h),z==".."?(this._path.pop(),T!="/"&&T!="\\"&&this._path.push("")):z=="."&&T!="/"&&T!="\\"?this._path.push(""):z!="."&&(this._scheme=="file"&&this._path.length==0&&z.length==2&&b.test(z[0])&&z[1]=="|"&&(z=z[0]+":"),this._path.push(z)),z="",T=="?"?(this._query="?",B="query"):T=="#"&&(this._fragment="#",B="fragment")}else T!="	"&&T!=`
`&&T!="\r"&&(z+=d(T));break;case"query":!I&&T=="#"?(this._fragment="#",B="fragment"):c!=T&&T!="	"&&T!=`
`&&T!="\r"&&(this._query+=v(T));break;case"fragment":c!=T&&T!="	"&&T!=`
`&&T!="\r"&&(this._fragment+=T);break}X++}}function x(){this._scheme="",this._schemeData="",this._username="",this._password=null,this._host="",this._port="",this._path=[],this._query="",this._fragment="",this._isInvalid=!1,this._isRelative=!1}function D(E,I){I!==void 0&&!(I instanceof D)&&(I=new D(String(I))),E=String(E),this._url=E,x.call(this);var j=E.replace(/^[ \t\r\n\f]+|[ \t\r\n\f]+$/g,"");w.call(this,j,null,I)}D.prototype={toString:function(){return this.href},get href(){if(this._isInvalid)return this._url;var E="";return(this._username!=""||this._password!=null)&&(E=this._username+(this._password!=null?":"+this._password:"")+"@"),this.protocol+(this._isRelative?"//"+E+this.host:"")+this.pathname+this._query+this._fragment},set href(E){x.call(this),w.call(this,E)},get protocol(){return this._scheme+":"},set protocol(E){this._isInvalid||w.call(this,E+":","scheme start")},get host(){return this._isInvalid?"":this._port?this._host+":"+this._port:this._host},set host(E){this._isInvalid||!this._isRelative||w.call(this,E,"host")},get hostname(){return this._host},set hostname(E){this._isInvalid||!this._isRelative||w.call(this,E,"hostname")},get port(){return this._port},set port(E){this._isInvalid||!this._isRelative||w.call(this,E,"port")},get pathname(){return this._isInvalid?"":this._isRelative?"/"+this._path.join("/"):this._schemeData},set pathname(E){this._isInvalid||!this._isRelative||(this._path=[],w.call(this,E,"relative path start"))},get search(){return this._isInvalid||!this._query||this._query=="?"?"":this._query},set search(E){this._isInvalid||!this._isRelative||(this._query="?",E[0]=="?"&&(E=E.slice(1)),w.call(this,E,"query"))},get hash(){return this._isInvalid||!this._fragment||this._fragment=="#"?"":this._fragment},set hash(E){this._isInvalid||(this._fragment="#",E[0]=="#"&&(E=E.slice(1)),w.call(this,E,"fragment"))},get origin(){var E;if(this._isInvalid||!this._scheme)return"";switch(this._scheme){case"data":case"file":case"javascript":case"mailto":return"null"}return E=this.host,E?this._scheme+"://"+E:""}};var M=self.URL;return M&&(D.createObjectURL=function(E){return M.createObjectURL.apply(M,arguments)},D.revokeObjectURL=function(E){M.revokeObjectURL(E)}),D}var Qe=Lr();var Bn=ii(ri());var pt=class e{element;constructor(t="div",n=void 0,o="\u{1F551}"){let r=document.createElement(t);this.element=r,n!=null&&(this.className=n),this.textContent=o}static fromElement(t){let n=new e("div");return n.element=t,n}asterisk(){this.textContent="*"}lose(){this.textContent="\u274C"}win(t){if(t!=null){this.textContent="";let n=document.createElement("a");n.href=t,n.target="_blank",n.textContent="\u2705",this.element.title=t,this.element.appendChild(n)}else this.textContent="\u2705"}global(){this.textContent="\u{1F30D}"}err(){this.textContent="\u26A0\uFE0F"}empty(){this.textContent=""}get style(){return this.element.style}append(t){t instanceof e&&(t=t.element),this.element.append(t)}get classList(){return this.element.classList}set title(t){this.element.title=t}set className(t){this.element.className=t}set textContent(t){this.element.textContent=t}};var qe=class{constructor(t,...n){this.parent=t;this.tag=new pt(...n)}tag};var ht=class extends qe{constructor(n,...o){super(n,...o);this.parent=n}_className="Not-set";_tagName="Not-set";get className(){return this._className}get tagName(){return this._tagName}check(){}checked(){}onerror(){this.tag.err()}};var Ie=class{constructor(t){this.namespace=t}log(t,...n){let[o,...r]=n,d=this.namespace!=null?`${this.namespace}.${t}: `:"";console[t](`${d}${o}`,...r)}debug(...t){this.log("debug",...t)}info(...t){this.log("info",...t)}warn(...t){this.log("warn",...t)}error(...t){this.log("error",...t)}};var An="Hello from IPFS Gateway Checker",lt="bafybeifx7yeb55armcsxwwitkymga5xf53dxiarykms3ygqic223w5sk3m",dt="bafybeibwzifw52ttrkqlikfzext5akxu7lz4xiwjgwzmqcpdzmp3n5vnbe",xn="/ipns/en.wikipedia-on-ipfs.org/favicon.ico",Mi=["raw","car"],Cn="https://ipfs.io";var{fetch:Ur}=(0,Bn.default)(),ji=new Ie("Cors"),si=class extends ht{constructor(n){super(n,"div","Cors");this.parent=n}_className="Cors";_tagName="div";async check(){let n=Date.now(),r=`${`${this.parent.gateway}/ipfs/${lt}`}?now=${n}#x-ipfs-companion-no-redirect`;try{let d=await Ur(r),{status:v}=d,c=await d.text();if(this.tag.title=`Response code: ${v}`,An===c.trim())this.tag.asterisk(),this.parent.tag.classList.add("cors");else throw ji.debug("The response text did not match the expected string"),this.onerror(),new Error(`URL '${r} does not support CORS`)}catch(d){throw ji.error(d),this.onerror(),d}}checked(){ji.warn("Not implemented yet")}onerror(){this.tag.empty()}};var St=class{constructor({tokensPerInterval:t,interval:n,stopped:o}){if(this.tokensPerInterval=t,this._isStopped=o,typeof n=="string")switch(n){case"sec":case"second":{this.interval=1e3;break}case"min":case"minute":{this.interval=1e3*60;break}case"hr":case"hour":{this.interval=1e3*60*60;break}case"day":{this.interval=1e3*60*60*24;break}default:throw new Error("Invalid interval "+n)}else this.interval=n;this.tokensRemovedAt=[],this.awaitingRestart=new Set}dripTokens(){throw new Error("dripTokens() not implemented")}getDelayForTokens(){throw new Error("getDelayForTokens() not implemented")}getTokens(){return this.dripTokens(),Math.floor(this.tokens)}tryRemoveTokens(t){return this.dripTokens(),t>this.tokens?!1:(this.tokens-=t,this.tokensRemovedAt.push([Date.now(),t]),!0)}async awaitTokens(t=1){this._isStopped&&await new Promise(o=>this.awaitingRestart.add(o));let n=this.getDelayForTokens(t);return n===0?Math.floor(this.tokens):(await new Promise(o=>setTimeout(()=>o(),n)),this.awaitTokens(t))}reset(){this.awaitingRestart.forEach(t=>t())}stop(t=!0){this._isStopped=!0,t&&this.tryRemoveTokens(this.getTokens())}start(){this._isStopped=!1}get isStopped(){return this._isStopped}};var Bt=class extends St{constructor({bucketSize:t,tokensPerInterval:n,interval:o,stopped:r=!1}){super({tokensPerInterval:n,interval:o,stopped:r}),this.bucketSize=t,this.tokens=r?0:this.bucketSize,this.tokensRemovedAt=r?[0]:[Date.now()]}dripTokens(){if(this._isStopped)return;let t=Date.now(),n=this.tokensRemovedAt[0],o=Math.max(t-n,0);this.tokensRemovedAt=[t];let r=o*(this.tokensPerInterval/this.interval);return this.tokens=Math.min(this.tokens+r,this.bucketSize),Math.floor(this.tokens)}getDelayForTokens(t=1){if(t>this.bucketSize)throw new Error(`Cannot supply ${t} tokens at once (max is bucketSize = ${this.bucketSize}`);this.dripTokens();let n=t-this.tokens;if(n<=0)return 0;if(!this._isStopped)return Math.ceil(n*(this.interval/this.tokensPerInterval))}reset(){this._isStopped=!1,this.tokens=this.bucketSize,this.tokensRemovedAt=[Date.now()],super.reset()}};var Pr=Object.create,Gn=Object.defineProperty,Fr=Object.getOwnPropertyDescriptor,Mr=Object.getOwnPropertyNames,jr=Object.getPrototypeOf,Gr=Object.prototype.hasOwnProperty,Dt=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),zr=(e,t,n,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of Mr(t))!Gr.call(e,r)&&r!==n&&Gn(e,r,{get:()=>t[r],enumerable:!(o=Fr(t,r))||o.enumerable});return e},zn=(e,t,n)=>(n=e!=null?Pr(jr(e)):{},zr(t||!e||!e.__esModule?Gn(n,"default",{value:e,enumerable:!0}):n,e)),$r=Dt(e=>{"use strict";e.byteLength=b,e.toByteArray=w,e.fromByteArray=M;var t=[],n=[],o=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(d=0,v=r.length;d<v;++d)t[d]=r[d],n[r.charCodeAt(d)]=d;var d,v;n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63;function c(E){var I=E.length;if(I%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var j=E.indexOf("=");j===-1&&(j=I);var W=j===I?0:4-j%4;return[j,W]}function b(E){var I=c(E),j=I[0],W=I[1];return(j+W)*3/4-W}function C(E,I,j){return(I+j)*3/4-j}function w(E){var I,j=c(E),W=j[0],B=j[1],X=new o(C(E,W,B)),z=0,ne=B>0?W-4:W,re;for(re=0;re<ne;re+=4)I=n[E.charCodeAt(re)]<<18|n[E.charCodeAt(re+1)]<<12|n[E.charCodeAt(re+2)]<<6|n[E.charCodeAt(re+3)],X[z++]=I>>16&255,X[z++]=I>>8&255,X[z++]=I&255;return B===2&&(I=n[E.charCodeAt(re)]<<2|n[E.charCodeAt(re+1)]>>4,X[z++]=I&255),B===1&&(I=n[E.charCodeAt(re)]<<10|n[E.charCodeAt(re+1)]<<4|n[E.charCodeAt(re+2)]>>2,X[z++]=I>>8&255,X[z++]=I&255),X}function x(E){return t[E>>18&63]+t[E>>12&63]+t[E>>6&63]+t[E&63]}function D(E,I,j){for(var W,B=[],X=I;X<j;X+=3)W=(E[X]<<16&16711680)+(E[X+1]<<8&65280)+(E[X+2]&255),B.push(x(W));return B.join("")}function M(E){for(var I,j=E.length,W=j%3,B=[],X=16383,z=0,ne=j-W;z<ne;z+=X)B.push(D(E,z,z+X>ne?ne:z+X));return W===1?(I=E[j-1],B.push(t[I>>2]+t[I<<4&63]+"==")):W===2&&(I=(E[j-2]<<8)+E[j-1],B.push(t[I>>10]+t[I>>4&63]+t[I<<2&63]+"=")),B.join("")}}),Vr=Dt(e=>{e.read=function(t,n,o,r,d){var v,c,b=d*8-r-1,C=(1<<b)-1,w=C>>1,x=-7,D=o?d-1:0,M=o?-1:1,E=t[n+D];for(D+=M,v=E&(1<<-x)-1,E>>=-x,x+=b;x>0;v=v*256+t[n+D],D+=M,x-=8);for(c=v&(1<<-x)-1,v>>=-x,x+=r;x>0;c=c*256+t[n+D],D+=M,x-=8);if(v===0)v=1-w;else{if(v===C)return c?NaN:(E?-1:1)*(1/0);c=c+Math.pow(2,r),v=v-w}return(E?-1:1)*c*Math.pow(2,v-r)},e.write=function(t,n,o,r,d,v){var c,b,C,w=v*8-d-1,x=(1<<w)-1,D=x>>1,M=d===23?Math.pow(2,-24)-Math.pow(2,-77):0,E=r?0:v-1,I=r?1:-1,j=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(b=isNaN(n)?1:0,c=x):(c=Math.floor(Math.log(n)/Math.LN2),n*(C=Math.pow(2,-c))<1&&(c--,C*=2),c+D>=1?n+=M/C:n+=M*Math.pow(2,1-D),n*C>=2&&(c++,C/=2),c+D>=x?(b=0,c=x):c+D>=1?(b=(n*C-1)*Math.pow(2,d),c=c+D):(b=n*Math.pow(2,D-1)*Math.pow(2,d),c=0));d>=8;t[o+E]=b&255,E+=I,b/=256,d-=8);for(c=c<<d|b,w+=d;w>0;t[o+E]=c&255,E+=I,c/=256,w-=8);t[o+E-I]|=j*128}}),Hr=Dt(e=>{"use strict";var t=$r(),n=Vr(),o=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=c,e.SlowBuffer=B,e.INSPECT_MAX_BYTES=50;var r=2147483647;e.kMaxLength=r,c.TYPED_ARRAY_SUPPORT=d(),!c.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function d(){try{let i=new Uint8Array(1),a={foo:function(){return 42}};return Object.setPrototypeOf(a,Uint8Array.prototype),Object.setPrototypeOf(i,a),i.foo()===42}catch{return!1}}Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}});function v(i){if(i>r)throw new RangeError('The value "'+i+'" is invalid for option "size"');let a=new Uint8Array(i);return Object.setPrototypeOf(a,c.prototype),a}function c(i,a,l){if(typeof i=="number"){if(typeof a=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return x(i)}return b(i,a,l)}c.poolSize=8192;function b(i,a,l){if(typeof i=="string")return D(i,a);if(ArrayBuffer.isView(i))return E(i);if(i==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof i);if(Te(i,ArrayBuffer)||i&&Te(i.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Te(i,SharedArrayBuffer)||i&&Te(i.buffer,SharedArrayBuffer)))return I(i,a,l);if(typeof i=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let g=i.valueOf&&i.valueOf();if(g!=null&&g!==i)return c.from(g,a,l);let S=j(i);if(S)return S;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof i[Symbol.toPrimitive]=="function")return c.from(i[Symbol.toPrimitive]("string"),a,l);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof i)}c.from=function(i,a,l){return b(i,a,l)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array);function C(i){if(typeof i!="number")throw new TypeError('"size" argument must be of type number');if(i<0)throw new RangeError('The value "'+i+'" is invalid for option "size"')}function w(i,a,l){return C(i),i<=0?v(i):a!==void 0?typeof l=="string"?v(i).fill(a,l):v(i).fill(a):v(i)}c.alloc=function(i,a,l){return w(i,a,l)};function x(i){return C(i),v(i<0?0:W(i)|0)}c.allocUnsafe=function(i){return x(i)},c.allocUnsafeSlow=function(i){return x(i)};function D(i,a){if((typeof a!="string"||a==="")&&(a="utf8"),!c.isEncoding(a))throw new TypeError("Unknown encoding: "+a);let l=X(i,a)|0,g=v(l),S=g.write(i,a);return S!==l&&(g=g.slice(0,S)),g}function M(i){let a=i.length<0?0:W(i.length)|0,l=v(a);for(let g=0;g<a;g+=1)l[g]=i[g]&255;return l}function E(i){if(Te(i,Uint8Array)){let a=new Uint8Array(i);return I(a.buffer,a.byteOffset,a.byteLength)}return M(i)}function I(i,a,l){if(a<0||i.byteLength<a)throw new RangeError('"offset" is outside of buffer bounds');if(i.byteLength<a+(l||0))throw new RangeError('"length" is outside of buffer bounds');let g;return a===void 0&&l===void 0?g=new Uint8Array(i):l===void 0?g=new Uint8Array(i,a):g=new Uint8Array(i,a,l),Object.setPrototypeOf(g,c.prototype),g}function j(i){if(c.isBuffer(i)){let a=W(i.length)|0,l=v(a);return l.length===0||i.copy(l,0,0,a),l}if(i.length!==void 0)return typeof i.length!="number"||wt(i.length)?v(0):M(i);if(i.type==="Buffer"&&Array.isArray(i.data))return M(i.data)}function W(i){if(i>=r)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r.toString(16)+" bytes");return i|0}function B(i){return+i!=i&&(i=0),c.alloc(+i)}c.isBuffer=function(i){return i!=null&&i._isBuffer===!0&&i!==c.prototype},c.compare=function(i,a){if(Te(i,Uint8Array)&&(i=c.from(i,i.offset,i.byteLength)),Te(a,Uint8Array)&&(a=c.from(a,a.offset,a.byteLength)),!c.isBuffer(i)||!c.isBuffer(a))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(i===a)return 0;let l=i.length,g=a.length;for(let S=0,A=Math.min(l,g);S<A;++S)if(i[S]!==a[S]){l=i[S],g=a[S];break}return l<g?-1:g<l?1:0},c.isEncoding=function(i){switch(String(i).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(i,a){if(!Array.isArray(i))throw new TypeError('"list" argument must be an Array of Buffers');if(i.length===0)return c.alloc(0);let l;if(a===void 0)for(a=0,l=0;l<i.length;++l)a+=i[l].length;let g=c.allocUnsafe(a),S=0;for(l=0;l<i.length;++l){let A=i[l];if(Te(A,Uint8Array))S+A.length>g.length?(c.isBuffer(A)||(A=c.from(A)),A.copy(g,S)):Uint8Array.prototype.set.call(g,A,S);else if(c.isBuffer(A))A.copy(g,S);else throw new TypeError('"list" argument must be an Array of Buffers');S+=A.length}return g};function X(i,a){if(c.isBuffer(i))return i.length;if(ArrayBuffer.isView(i)||Te(i,ArrayBuffer))return i.byteLength;if(typeof i!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof i);let l=i.length,g=arguments.length>2&&arguments[2]===!0;if(!g&&l===0)return 0;let S=!1;for(;;)switch(a){case"ascii":case"latin1":case"binary":return l;case"utf8":case"utf-8":return Ge(i).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return l*2;case"hex":return l>>>1;case"base64":return At(i).length;default:if(S)return g?-1:Ge(i).length;a=(""+a).toLowerCase(),S=!0}}c.byteLength=X;function z(i,a,l){let g=!1;if((a===void 0||a<0)&&(a=0),a>this.length||((l===void 0||l>this.length)&&(l=this.length),l<=0)||(l>>>=0,a>>>=0,l<=a))return"";for(i||(i="utf8");;)switch(i){case"hex":return te(this,a,l);case"utf8":case"utf-8":return De(this,a,l);case"ascii":return G(this,a,l);case"latin1":case"binary":return Q(this,a,l);case"base64":return Pe(this,a,l);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return q(this,a,l);default:if(g)throw new TypeError("Unknown encoding: "+i);i=(i+"").toLowerCase(),g=!0}}c.prototype._isBuffer=!0;function ne(i,a,l){let g=i[a];i[a]=i[l],i[l]=g}c.prototype.swap16=function(){let i=this.length;if(i%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let a=0;a<i;a+=2)ne(this,a,a+1);return this},c.prototype.swap32=function(){let i=this.length;if(i%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let a=0;a<i;a+=4)ne(this,a,a+3),ne(this,a+1,a+2);return this},c.prototype.swap64=function(){let i=this.length;if(i%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let a=0;a<i;a+=8)ne(this,a,a+7),ne(this,a+1,a+6),ne(this,a+2,a+5),ne(this,a+3,a+4);return this},c.prototype.toString=function(){let i=this.length;return i===0?"":arguments.length===0?De(this,0,i):z.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(i){if(!c.isBuffer(i))throw new TypeError("Argument must be a Buffer");return this===i?!0:c.compare(this,i)===0},c.prototype.inspect=function(){let i="",a=e.INSPECT_MAX_BYTES;return i=this.toString("hex",0,a).replace(/(.{2})/g,"$1 ").trim(),this.length>a&&(i+=" ... "),"<Buffer "+i+">"},o&&(c.prototype[o]=c.prototype.inspect),c.prototype.compare=function(i,a,l,g,S){if(Te(i,Uint8Array)&&(i=c.from(i,i.offset,i.byteLength)),!c.isBuffer(i))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof i);if(a===void 0&&(a=0),l===void 0&&(l=i?i.length:0),g===void 0&&(g=0),S===void 0&&(S=this.length),a<0||l>i.length||g<0||S>this.length)throw new RangeError("out of range index");if(g>=S&&a>=l)return 0;if(g>=S)return-1;if(a>=l)return 1;if(a>>>=0,l>>>=0,g>>>=0,S>>>=0,this===i)return 0;let A=S-g,F=l-a,le=Math.min(A,F),Ee=this.slice(g,S),ge=i.slice(a,l);for(let de=0;de<le;++de)if(Ee[de]!==ge[de]){A=Ee[de],F=ge[de];break}return A<F?-1:F<A?1:0};function re(i,a,l,g,S){if(i.length===0)return-1;if(typeof l=="string"?(g=l,l=0):l>2147483647?l=2147483647:l<-2147483648&&(l=-2147483648),l=+l,wt(l)&&(l=S?0:i.length-1),l<0&&(l=i.length+l),l>=i.length){if(S)return-1;l=i.length-1}else if(l<0)if(S)l=0;else return-1;if(typeof a=="string"&&(a=c.from(a,g)),c.isBuffer(a))return a.length===0?-1:Re(i,a,l,g,S);if(typeof a=="number")return a=a&255,typeof Uint8Array.prototype.indexOf=="function"?S?Uint8Array.prototype.indexOf.call(i,a,l):Uint8Array.prototype.lastIndexOf.call(i,a,l):Re(i,[a],l,g,S);throw new TypeError("val must be string, number or Buffer")}function Re(i,a,l,g,S){let A=1,F=i.length,le=a.length;if(g!==void 0&&(g=String(g).toLowerCase(),g==="ucs2"||g==="ucs-2"||g==="utf16le"||g==="utf-16le")){if(i.length<2||a.length<2)return-1;A=2,F/=2,le/=2,l/=2}function Ee(de,se){return A===1?de[se]:de.readUInt16BE(se*A)}let ge;if(S){let de=-1;for(ge=l;ge<F;ge++)if(Ee(i,ge)===Ee(a,de===-1?0:ge-de)){if(de===-1&&(de=ge),ge-de+1===le)return de*A}else de!==-1&&(ge-=ge-de),de=-1}else for(l+le>F&&(l=F-le),ge=l;ge>=0;ge--){let de=!0;for(let se=0;se<le;se++)if(Ee(i,ge+se)!==Ee(a,se)){de=!1;break}if(de)return ge}return-1}c.prototype.includes=function(i,a,l){return this.indexOf(i,a,l)!==-1},c.prototype.indexOf=function(i,a,l){return re(this,i,a,l,!0)},c.prototype.lastIndexOf=function(i,a,l){return re(this,i,a,l,!1)};function T(i,a,l,g){l=Number(l)||0;let S=i.length-l;g?(g=Number(g),g>S&&(g=S)):g=S;let A=a.length;g>A/2&&(g=A/2);let F;for(F=0;F<g;++F){let le=parseInt(a.substr(F*2,2),16);if(wt(le))return F;i[l+F]=le}return F}function J(i,a,l,g){return it(Ge(a,i.length-l),i,l,g)}function je(i,a,l,g){return it(ze(a),i,l,g)}function ie(i,a,l,g){return it(At(a),i,l,g)}function oe(i,a,l,g){return it(He(a,i.length-l),i,l,g)}c.prototype.write=function(i,a,l,g){if(a===void 0)g="utf8",l=this.length,a=0;else if(l===void 0&&typeof a=="string")g=a,l=this.length,a=0;else if(isFinite(a))a=a>>>0,isFinite(l)?(l=l>>>0,g===void 0&&(g="utf8")):(g=l,l=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let S=this.length-a;if((l===void 0||l>S)&&(l=S),i.length>0&&(l<0||a<0)||a>this.length)throw new RangeError("Attempt to write outside buffer bounds");g||(g="utf8");let A=!1;for(;;)switch(g){case"hex":return T(this,i,a,l);case"utf8":case"utf-8":return J(this,i,a,l);case"ascii":case"latin1":case"binary":return je(this,i,a,l);case"base64":return ie(this,i,a,l);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return oe(this,i,a,l);default:if(A)throw new TypeError("Unknown encoding: "+g);g=(""+g).toLowerCase(),A=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Pe(i,a,l){return a===0&&l===i.length?t.fromByteArray(i):t.fromByteArray(i.slice(a,l))}function De(i,a,l){l=Math.min(i.length,l);let g=[],S=a;for(;S<l;){let A=i[S],F=null,le=A>239?4:A>223?3:A>191?2:1;if(S+le<=l){let Ee,ge,de,se;switch(le){case 1:A<128&&(F=A);break;case 2:Ee=i[S+1],(Ee&192)===128&&(se=(A&31)<<6|Ee&63,se>127&&(F=se));break;case 3:Ee=i[S+1],ge=i[S+2],(Ee&192)===128&&(ge&192)===128&&(se=(A&15)<<12|(Ee&63)<<6|ge&63,se>2047&&(se<55296||se>57343)&&(F=se));break;case 4:Ee=i[S+1],ge=i[S+2],de=i[S+3],(Ee&192)===128&&(ge&192)===128&&(de&192)===128&&(se=(A&15)<<18|(Ee&63)<<12|(ge&63)<<6|de&63,se>65535&&se<1114112&&(F=se))}}F===null?(F=65533,le=1):F>65535&&(F-=65536,g.push(F>>>10&1023|55296),F=56320|F&1023),g.push(F),S+=le}return k(g)}var h=4096;function k(i){let a=i.length;if(a<=h)return String.fromCharCode.apply(String,i);let l="",g=0;for(;g<a;)l+=String.fromCharCode.apply(String,i.slice(g,g+=h));return l}function G(i,a,l){let g="";l=Math.min(i.length,l);for(let S=a;S<l;++S)g+=String.fromCharCode(i[S]&127);return g}function Q(i,a,l){let g="";l=Math.min(i.length,l);for(let S=a;S<l;++S)g+=String.fromCharCode(i[S]);return g}function te(i,a,l){let g=i.length;(!a||a<0)&&(a=0),(!l||l<0||l>g)&&(l=g);let S="";for(let A=a;A<l;++A)S+=We[i[A]];return S}function q(i,a,l){let g=i.slice(a,l),S="";for(let A=0;A<g.length-1;A+=2)S+=String.fromCharCode(g[A]+g[A+1]*256);return S}c.prototype.slice=function(i,a){let l=this.length;i=~~i,a=a===void 0?l:~~a,i<0?(i+=l,i<0&&(i=0)):i>l&&(i=l),a<0?(a+=l,a<0&&(a=0)):a>l&&(a=l),a<i&&(a=i);let g=this.subarray(i,a);return Object.setPrototypeOf(g,c.prototype),g};function pe(i,a,l){if(i%1!==0||i<0)throw new RangeError("offset is not uint");if(i+a>l)throw new RangeError("Trying to access beyond buffer length")}c.prototype.readUintLE=c.prototype.readUIntLE=function(i,a,l){i=i>>>0,a=a>>>0,l||pe(i,a,this.length);let g=this[i],S=1,A=0;for(;++A<a&&(S*=256);)g+=this[i+A]*S;return g},c.prototype.readUintBE=c.prototype.readUIntBE=function(i,a,l){i=i>>>0,a=a>>>0,l||pe(i,a,this.length);let g=this[i+--a],S=1;for(;a>0&&(S*=256);)g+=this[i+--a]*S;return g},c.prototype.readUint8=c.prototype.readUInt8=function(i,a){return i=i>>>0,a||pe(i,1,this.length),this[i]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(i,a){return i=i>>>0,a||pe(i,2,this.length),this[i]|this[i+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(i,a){return i=i>>>0,a||pe(i,2,this.length),this[i]<<8|this[i+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(i,a){return i=i>>>0,a||pe(i,4,this.length),(this[i]|this[i+1]<<8|this[i+2]<<16)+this[i+3]*16777216},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(i,a){return i=i>>>0,a||pe(i,4,this.length),this[i]*16777216+(this[i+1]<<16|this[i+2]<<8|this[i+3])},c.prototype.readBigUInt64LE=Me(function(i){i=i>>>0,xe(i,"offset");let a=this[i],l=this[i+7];(a===void 0||l===void 0)&&he(i,this.length-8);let g=a+this[++i]*2**8+this[++i]*2**16+this[++i]*2**24,S=this[++i]+this[++i]*2**8+this[++i]*2**16+l*2**24;return BigInt(g)+(BigInt(S)<<BigInt(32))}),c.prototype.readBigUInt64BE=Me(function(i){i=i>>>0,xe(i,"offset");let a=this[i],l=this[i+7];(a===void 0||l===void 0)&&he(i,this.length-8);let g=a*2**24+this[++i]*2**16+this[++i]*2**8+this[++i],S=this[++i]*2**24+this[++i]*2**16+this[++i]*2**8+l;return(BigInt(g)<<BigInt(32))+BigInt(S)}),c.prototype.readIntLE=function(i,a,l){i=i>>>0,a=a>>>0,l||pe(i,a,this.length);let g=this[i],S=1,A=0;for(;++A<a&&(S*=256);)g+=this[i+A]*S;return S*=128,g>=S&&(g-=Math.pow(2,8*a)),g},c.prototype.readIntBE=function(i,a,l){i=i>>>0,a=a>>>0,l||pe(i,a,this.length);let g=a,S=1,A=this[i+--g];for(;g>0&&(S*=256);)A+=this[i+--g]*S;return S*=128,A>=S&&(A-=Math.pow(2,8*a)),A},c.prototype.readInt8=function(i,a){return i=i>>>0,a||pe(i,1,this.length),this[i]&128?(255-this[i]+1)*-1:this[i]},c.prototype.readInt16LE=function(i,a){i=i>>>0,a||pe(i,2,this.length);let l=this[i]|this[i+1]<<8;return l&32768?l|4294901760:l},c.prototype.readInt16BE=function(i,a){i=i>>>0,a||pe(i,2,this.length);let l=this[i+1]|this[i]<<8;return l&32768?l|4294901760:l},c.prototype.readInt32LE=function(i,a){return i=i>>>0,a||pe(i,4,this.length),this[i]|this[i+1]<<8|this[i+2]<<16|this[i+3]<<24},c.prototype.readInt32BE=function(i,a){return i=i>>>0,a||pe(i,4,this.length),this[i]<<24|this[i+1]<<16|this[i+2]<<8|this[i+3]},c.prototype.readBigInt64LE=Me(function(i){i=i>>>0,xe(i,"offset");let a=this[i],l=this[i+7];(a===void 0||l===void 0)&&he(i,this.length-8);let g=this[i+4]+this[i+5]*2**8+this[i+6]*2**16+(l<<24);return(BigInt(g)<<BigInt(32))+BigInt(a+this[++i]*2**8+this[++i]*2**16+this[++i]*2**24)}),c.prototype.readBigInt64BE=Me(function(i){i=i>>>0,xe(i,"offset");let a=this[i],l=this[i+7];(a===void 0||l===void 0)&&he(i,this.length-8);let g=(a<<24)+this[++i]*2**16+this[++i]*2**8+this[++i];return(BigInt(g)<<BigInt(32))+BigInt(this[++i]*2**24+this[++i]*2**16+this[++i]*2**8+l)}),c.prototype.readFloatLE=function(i,a){return i=i>>>0,a||pe(i,4,this.length),n.read(this,i,!0,23,4)},c.prototype.readFloatBE=function(i,a){return i=i>>>0,a||pe(i,4,this.length),n.read(this,i,!1,23,4)},c.prototype.readDoubleLE=function(i,a){return i=i>>>0,a||pe(i,8,this.length),n.read(this,i,!0,52,8)},c.prototype.readDoubleBE=function(i,a){return i=i>>>0,a||pe(i,8,this.length),n.read(this,i,!1,52,8)};function _e(i,a,l,g,S,A){if(!c.isBuffer(i))throw new TypeError('"buffer" argument must be a Buffer instance');if(a>S||a<A)throw new RangeError('"value" argument is out of bounds');if(l+g>i.length)throw new RangeError("Index out of range")}c.prototype.writeUintLE=c.prototype.writeUIntLE=function(i,a,l,g){if(i=+i,a=a>>>0,l=l>>>0,!g){let F=Math.pow(2,8*l)-1;_e(this,i,a,l,F,0)}let S=1,A=0;for(this[a]=i&255;++A<l&&(S*=256);)this[a+A]=i/S&255;return a+l},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(i,a,l,g){if(i=+i,a=a>>>0,l=l>>>0,!g){let F=Math.pow(2,8*l)-1;_e(this,i,a,l,F,0)}let S=l-1,A=1;for(this[a+S]=i&255;--S>=0&&(A*=256);)this[a+S]=i/A&255;return a+l},c.prototype.writeUint8=c.prototype.writeUInt8=function(i,a,l){return i=+i,a=a>>>0,l||_e(this,i,a,1,255,0),this[a]=i&255,a+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(i,a,l){return i=+i,a=a>>>0,l||_e(this,i,a,2,65535,0),this[a]=i&255,this[a+1]=i>>>8,a+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(i,a,l){return i=+i,a=a>>>0,l||_e(this,i,a,2,65535,0),this[a]=i>>>8,this[a+1]=i&255,a+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(i,a,l){return i=+i,a=a>>>0,l||_e(this,i,a,4,4294967295,0),this[a+3]=i>>>24,this[a+2]=i>>>16,this[a+1]=i>>>8,this[a]=i&255,a+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(i,a,l){return i=+i,a=a>>>0,l||_e(this,i,a,4,4294967295,0),this[a]=i>>>24,this[a+1]=i>>>16,this[a+2]=i>>>8,this[a+3]=i&255,a+4};function be(i,a,l,g,S){Le(a,g,S,i,l,7);let A=Number(a&BigInt(4294967295));i[l++]=A,A=A>>8,i[l++]=A,A=A>>8,i[l++]=A,A=A>>8,i[l++]=A;let F=Number(a>>BigInt(32)&BigInt(4294967295));return i[l++]=F,F=F>>8,i[l++]=F,F=F>>8,i[l++]=F,F=F>>8,i[l++]=F,l}function tt(i,a,l,g,S){Le(a,g,S,i,l,7);let A=Number(a&BigInt(4294967295));i[l+7]=A,A=A>>8,i[l+6]=A,A=A>>8,i[l+5]=A,A=A>>8,i[l+4]=A;let F=Number(a>>BigInt(32)&BigInt(4294967295));return i[l+3]=F,F=F>>8,i[l+2]=F,F=F>>8,i[l+1]=F,F=F>>8,i[l]=F,l+8}c.prototype.writeBigUInt64LE=Me(function(i,a=0){return be(this,i,a,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeBigUInt64BE=Me(function(i,a=0){return tt(this,i,a,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeIntLE=function(i,a,l,g){if(i=+i,a=a>>>0,!g){let le=Math.pow(2,8*l-1);_e(this,i,a,l,le-1,-le)}let S=0,A=1,F=0;for(this[a]=i&255;++S<l&&(A*=256);)i<0&&F===0&&this[a+S-1]!==0&&(F=1),this[a+S]=(i/A>>0)-F&255;return a+l},c.prototype.writeIntBE=function(i,a,l,g){if(i=+i,a=a>>>0,!g){let le=Math.pow(2,8*l-1);_e(this,i,a,l,le-1,-le)}let S=l-1,A=1,F=0;for(this[a+S]=i&255;--S>=0&&(A*=256);)i<0&&F===0&&this[a+S+1]!==0&&(F=1),this[a+S]=(i/A>>0)-F&255;return a+l},c.prototype.writeInt8=function(i,a,l){return i=+i,a=a>>>0,l||_e(this,i,a,1,127,-128),i<0&&(i=255+i+1),this[a]=i&255,a+1},c.prototype.writeInt16LE=function(i,a,l){return i=+i,a=a>>>0,l||_e(this,i,a,2,32767,-32768),this[a]=i&255,this[a+1]=i>>>8,a+2},c.prototype.writeInt16BE=function(i,a,l){return i=+i,a=a>>>0,l||_e(this,i,a,2,32767,-32768),this[a]=i>>>8,this[a+1]=i&255,a+2},c.prototype.writeInt32LE=function(i,a,l){return i=+i,a=a>>>0,l||_e(this,i,a,4,2147483647,-2147483648),this[a]=i&255,this[a+1]=i>>>8,this[a+2]=i>>>16,this[a+3]=i>>>24,a+4},c.prototype.writeInt32BE=function(i,a,l){return i=+i,a=a>>>0,l||_e(this,i,a,4,2147483647,-2147483648),i<0&&(i=4294967295+i+1),this[a]=i>>>24,this[a+1]=i>>>16,this[a+2]=i>>>8,this[a+3]=i&255,a+4},c.prototype.writeBigInt64LE=Me(function(i,a=0){return be(this,i,a,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),c.prototype.writeBigInt64BE=Me(function(i,a=0){return tt(this,i,a,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Mt(i,a,l,g,S,A){if(l+g>i.length)throw new RangeError("Index out of range");if(l<0)throw new RangeError("Index out of range")}function m(i,a,l,g,S){return a=+a,l=l>>>0,S||Mt(i,a,l,4,34028234663852886e22,-34028234663852886e22),n.write(i,a,l,g,23,4),l+4}c.prototype.writeFloatLE=function(i,a,l){return m(this,i,a,!0,l)},c.prototype.writeFloatBE=function(i,a,l){return m(this,i,a,!1,l)};function p(i,a,l,g,S){return a=+a,l=l>>>0,S||Mt(i,a,l,8,17976931348623157e292,-17976931348623157e292),n.write(i,a,l,g,52,8),l+8}c.prototype.writeDoubleLE=function(i,a,l){return p(this,i,a,!0,l)},c.prototype.writeDoubleBE=function(i,a,l){return p(this,i,a,!1,l)},c.prototype.copy=function(i,a,l,g){if(!c.isBuffer(i))throw new TypeError("argument should be a Buffer");if(l||(l=0),!g&&g!==0&&(g=this.length),a>=i.length&&(a=i.length),a||(a=0),g>0&&g<l&&(g=l),g===l||i.length===0||this.length===0)return 0;if(a<0)throw new RangeError("targetStart out of bounds");if(l<0||l>=this.length)throw new RangeError("Index out of range");if(g<0)throw new RangeError("sourceEnd out of bounds");g>this.length&&(g=this.length),i.length-a<g-l&&(g=i.length-a+l);let S=g-l;return this===i&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(a,l,g):Uint8Array.prototype.set.call(i,this.subarray(l,g),a),S},c.prototype.fill=function(i,a,l,g){if(typeof i=="string"){if(typeof a=="string"?(g=a,a=0,l=this.length):typeof l=="string"&&(g=l,l=this.length),g!==void 0&&typeof g!="string")throw new TypeError("encoding must be a string");if(typeof g=="string"&&!c.isEncoding(g))throw new TypeError("Unknown encoding: "+g);if(i.length===1){let A=i.charCodeAt(0);(g==="utf8"&&A<128||g==="latin1")&&(i=A)}}else typeof i=="number"?i=i&255:typeof i=="boolean"&&(i=Number(i));if(a<0||this.length<a||this.length<l)throw new RangeError("Out of range index");if(l<=a)return this;a=a>>>0,l=l===void 0?this.length:l>>>0,i||(i=0);let S;if(typeof i=="number")for(S=a;S<l;++S)this[S]=i;else{let A=c.isBuffer(i)?i:c.from(i,g),F=A.length;if(F===0)throw new TypeError('The value "'+i+'" is invalid for argument "value"');for(S=0;S<l-a;++S)this[S+a]=A[S%F]}return this};var K={};function Y(i,a,l){K[i]=class extends l{constructor(){super(),Object.defineProperty(this,"message",{value:a.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${i}]`,this.stack,delete this.name}get code(){return i}set code(g){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:g,writable:!0})}toString(){return`${this.name} [${i}]: ${this.message}`}}}Y("ERR_BUFFER_OUT_OF_BOUNDS",function(i){return i?`${i} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Y("ERR_INVALID_ARG_TYPE",function(i,a){return`The "${i}" argument must be of type number. Received type ${typeof a}`},TypeError),Y("ERR_OUT_OF_RANGE",function(i,a,l){let g=`The value of "${i}" is out of range.`,S=l;return Number.isInteger(l)&&Math.abs(l)>2**32?S=we(String(l)):typeof l=="bigint"&&(S=String(l),(l>BigInt(2)**BigInt(32)||l<-(BigInt(2)**BigInt(32)))&&(S=we(S)),S+="n"),g+=` It must be ${a}. Received ${S}`,g},RangeError);function we(i){let a="",l=i.length,g=i[0]==="-"?1:0;for(;l>=g+4;l-=3)a=`_${i.slice(l-3,l)}${a}`;return`${i.slice(0,l)}${a}`}function Ne(i,a,l){xe(a,"offset"),(i[a]===void 0||i[a+l]===void 0)&&he(a,i.length-(l+1))}function Le(i,a,l,g,S,A){if(i>l||i<a){let F=typeof a=="bigint"?"n":"",le;throw A>3?a===0||a===BigInt(0)?le=`>= 0${F} and < 2${F} ** ${(A+1)*8}${F}`:le=`>= -(2${F} ** ${(A+1)*8-1}${F}) and < 2 ** ${(A+1)*8-1}${F}`:le=`>= ${a}${F} and <= ${l}${F}`,new K.ERR_OUT_OF_RANGE("value",le,i)}Ne(g,S,A)}function xe(i,a){if(typeof i!="number")throw new K.ERR_INVALID_ARG_TYPE(a,"number",i)}function he(i,a,l){throw Math.floor(i)!==i?(xe(i,l),new K.ERR_OUT_OF_RANGE(l||"offset","an integer",i)):a<0?new K.ERR_BUFFER_OUT_OF_BOUNDS:new K.ERR_OUT_OF_RANGE(l||"offset",`>= ${l?1:0} and <= ${a}`,i)}var Oe=/[^+/0-9A-Za-z-_]/g;function Ae(i){if(i=i.split("=")[0],i=i.trim().replace(Oe,""),i.length<2)return"";for(;i.length%4!==0;)i=i+"=";return i}function Ge(i,a){a=a||1/0;let l,g=i.length,S=null,A=[];for(let F=0;F<g;++F){if(l=i.charCodeAt(F),l>55295&&l<57344){if(!S){if(l>56319){(a-=3)>-1&&A.push(239,191,189);continue}else if(F+1===g){(a-=3)>-1&&A.push(239,191,189);continue}S=l;continue}if(l<56320){(a-=3)>-1&&A.push(239,191,189),S=l;continue}l=(S-55296<<10|l-56320)+65536}else S&&(a-=3)>-1&&A.push(239,191,189);if(S=null,l<128){if((a-=1)<0)break;A.push(l)}else if(l<2048){if((a-=2)<0)break;A.push(l>>6|192,l&63|128)}else if(l<65536){if((a-=3)<0)break;A.push(l>>12|224,l>>6&63|128,l&63|128)}else if(l<1114112){if((a-=4)<0)break;A.push(l>>18|240,l>>12&63|128,l>>6&63|128,l&63|128)}else throw new Error("Invalid code point")}return A}function ze(i){let a=[];for(let l=0;l<i.length;++l)a.push(i.charCodeAt(l)&255);return a}function He(i,a){let l,g,S,A=[];for(let F=0;F<i.length&&!((a-=2)<0);++F)l=i.charCodeAt(F),g=l>>8,S=l%256,A.push(S),A.push(g);return A}function At(i){return t.toByteArray(Ae(i))}function it(i,a,l,g){let S;for(S=0;S<g&&!(S+l>=a.length||S>=i.length);++S)a[S+l]=i[S];return S}function Te(i,a){return i instanceof a||i!=null&&i.constructor!=null&&i.constructor.name!=null&&i.constructor.name===a.name}function wt(i){return i!==i}var We=function(){let i="0123456789abcdef",a=new Array(256);for(let l=0;l<16;++l){let g=l*16;for(let S=0;S<16;++S)a[g+S]=i[l]+i[S]}return a}();function Me(i){return typeof BigInt>"u"?_t:i}function _t(){throw new Error("BigInt not supported")}}),Wr=Dt(()=>{}),Jr=Dt(e=>{var t=e,{Buffer:n}=Hr(),o=Wr();t.toBuffer=function(c,b,C){C=~~C;let w;if(this.isV4Format(c))w=b||n.alloc(C+4),c.split(/\./g).map(x=>{w[C++]=parseInt(x,10)&255});else if(this.isV6Format(c)){let x=c.split(":",8),D;for(D=0;D<x.length;D++){let M=this.isV4Format(x[D]),E;M&&(E=this.toBuffer(x[D]),x[D]=E.slice(0,2).toString("hex")),E&&++D<8&&x.splice(D,0,E.slice(2,4).toString("hex"))}if(x[0]==="")for(;x.length<8;)x.unshift("0");else if(x[x.length-1]==="")for(;x.length<8;)x.push("0");else if(x.length<8){for(D=0;D<x.length&&x[D]!=="";D++);let M=[D,1];for(D=9-x.length;D>0;D--)M.push("0");x.splice(...M)}for(w=b||n.alloc(C+16),D=0;D<x.length;D++){let M=parseInt(x[D],16);w[C++]=M>>8&255,w[C++]=M&255}}if(!w)throw Error(`Invalid ip address: ${c}`);return w},t.toString=function(c,b,C){b=~~b,C=C||c.length-b;let w=[];if(C===4){for(let x=0;x<C;x++)w.push(c[b+x]);w=w.join(".")}else if(C===16){for(let x=0;x<C;x+=2)w.push(c.readUInt16BE(b+x).toString(16));w=w.join(":"),w=w.replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3"),w=w.replace(/:{3,4}/,"::")}return w};var r=/^(\d{1,3}\.){3,3}\d{1,3}$/,d=/^(::)?(((\d{1,3}\.){3}(\d{1,3}){1})?([0-9a-f]){0,4}:{0,2}){1,8}(::)?$/i;t.isV4Format=function(c){return r.test(c)},t.isV6Format=function(c){return d.test(c)};function v(c){return c===4?"ipv4":c===6?"ipv6":c?c.toLowerCase():"ipv4"}t.fromPrefixLen=function(c,b){c>32?b="ipv6":b=v(b);let C=4;b==="ipv6"&&(C=16);let w=n.alloc(C);for(let x=0,D=w.length;x<D;++x){let M=8;c<8&&(M=c),c-=M,w[x]=~(255>>M)&255}return t.toString(w)},t.mask=function(c,b){c=t.toBuffer(c),b=t.toBuffer(b);let C=n.alloc(Math.max(c.length,b.length)),w;if(c.length===b.length)for(w=0;w<c.length;w++)C[w]=c[w]&b[w];else if(b.length===4)for(w=0;w<b.length;w++)C[w]=c[c.length-4+w]&b[w];else{for(w=0;w<C.length-6;w++)C[w]=0;for(C[10]=255,C[11]=255,w=0;w<c.length;w++)C[w+12]=c[w]&b[w+12];w+=12}for(;w<C.length;w++)C[w]=0;return t.toString(C)},t.cidr=function(c){let b=c.split("/"),C=b[0];if(b.length!==2)throw new Error(`invalid CIDR subnet: ${C}`);let w=t.fromPrefixLen(parseInt(b[1],10));return t.mask(C,w)},t.subnet=function(c,b){let C=t.toLong(t.mask(c,b)),w=t.toBuffer(b),x=0;for(let M=0;M<w.length;M++)if(w[M]===255)x+=8;else{let E=w[M]&255;for(;E;)E=E<<1&255,x++}let D=2**(32-x);return{networkAddress:t.fromLong(C),firstAddress:D<=2?t.fromLong(C):t.fromLong(C+1),lastAddress:D<=2?t.fromLong(C+D-1):t.fromLong(C+D-2),broadcastAddress:t.fromLong(C+D-1),subnetMask:b,subnetMaskLength:x,numHosts:D<=2?D:D-2,length:D,contains(M){return C===t.toLong(t.mask(M,b))}}},t.cidrSubnet=function(c){let b=c.split("/"),C=b[0];if(b.length!==2)throw new Error(`invalid CIDR subnet: ${C}`);let w=t.fromPrefixLen(parseInt(b[1],10));return t.subnet(C,w)},t.not=function(c){let b=t.toBuffer(c);for(let C=0;C<b.length;C++)b[C]=255^b[C];return t.toString(b)},t.or=function(c,b){if(c=t.toBuffer(c),b=t.toBuffer(b),c.length===b.length){for(let D=0;D<c.length;++D)c[D]|=b[D];return t.toString(c)}let C=c,w=b;b.length>c.length&&(C=b,w=c);let x=C.length-w.length;for(let D=x;D<C.length;++D)C[D]|=w[D-x];return t.toString(C)},t.isEqual=function(c,b){if(c=t.toBuffer(c),b=t.toBuffer(b),c.length===b.length){for(let w=0;w<c.length;w++)if(c[w]!==b[w])return!1;return!0}if(b.length===4){let w=b;b=c,c=w}for(let w=0;w<10;w++)if(b[w]!==0)return!1;let C=b.readUInt16BE(10);if(C!==0&&C!==65535)return!1;for(let w=0;w<4;w++)if(c[w]!==b[w+12])return!1;return!0},t.isPrivate=function(c){return/^(::f{4}:)?10\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(c)||/^(::f{4}:)?192\.168\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(c)||/^(::f{4}:)?172\.(1[6-9]|2\d|30|31)\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(c)||/^(::f{4}:)?127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(c)||/^(::f{4}:)?169\.254\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(c)||/^f[cd][0-9a-f]{2}:/i.test(c)||/^fe80:/i.test(c)||/^::1$/.test(c)||/^::$/.test(c)},t.isPublic=function(c){return!t.isPrivate(c)},t.isLoopback=function(c){return/^(::f{4}:)?127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})/.test(c)||/^fe80::1$/.test(c)||/^::1$/.test(c)||/^::$/.test(c)},t.loopback=function(c){if(c=v(c),c!=="ipv4"&&c!=="ipv6")throw new Error("family must be ipv4 or ipv6");return c==="ipv4"?"127.0.0.1":"fe80::1"},t.address=function(c,b){let C=o.networkInterfaces();if(b=v(b),c&&c!=="private"&&c!=="public"){let x=C[c].filter(D=>v(D.family)===b);return x.length===0?void 0:x[0].address}let w=Object.keys(C).map(x=>{let D=C[x].filter(M=>(M.family=v(M.family),M.family!==b||t.isLoopback(M.address)?!1:c?c==="public"?t.isPrivate(M.address):t.isPublic(M.address):!0));return D.length?D[0].address:void 0}).filter(Boolean);return w.length?w[0]:t.loopback(b)},t.toLong=function(c){let b=0;return c.split(".").forEach(C=>{b<<=8,b+=parseInt(C)}),b>>>0},t.fromLong=function(c){return`${c>>>24}.${c>>16&255}.${c>>8&255}.${c&255}`}}),qr=Dt((e,t)=>{var n=typeof self<"u"?self:e,o=function(){function d(){this.fetch=!1,this.DOMException=n.DOMException}return d.prototype=n,new d}();(function(d){var v=function(c){var b={searchParams:"URLSearchParams"in d,iterable:"Symbol"in d&&"iterator"in Symbol,blob:"FileReader"in d&&"Blob"in d&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in d,arrayBuffer:"ArrayBuffer"in d};function C(h){return h&&DataView.prototype.isPrototypeOf(h)}if(b.arrayBuffer)var w=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],x=ArrayBuffer.isView||function(h){return h&&w.indexOf(Object.prototype.toString.call(h))>-1};function D(h){if(typeof h!="string"&&(h=String(h)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(h))throw new TypeError("Invalid character in header field name");return h.toLowerCase()}function M(h){return typeof h!="string"&&(h=String(h)),h}function E(h){var k={next:function(){var G=h.shift();return{done:G===void 0,value:G}}};return b.iterable&&(k[Symbol.iterator]=function(){return k}),k}function I(h){this.map={},h instanceof I?h.forEach(function(k,G){this.append(G,k)},this):Array.isArray(h)?h.forEach(function(k){this.append(k[0],k[1])},this):h&&Object.getOwnPropertyNames(h).forEach(function(k){this.append(k,h[k])},this)}I.prototype.append=function(h,k){h=D(h),k=M(k);var G=this.map[h];this.map[h]=G?G+", "+k:k},I.prototype.delete=function(h){delete this.map[D(h)]},I.prototype.get=function(h){return h=D(h),this.has(h)?this.map[h]:null},I.prototype.has=function(h){return this.map.hasOwnProperty(D(h))},I.prototype.set=function(h,k){this.map[D(h)]=M(k)},I.prototype.forEach=function(h,k){for(var G in this.map)this.map.hasOwnProperty(G)&&h.call(k,this.map[G],G,this)},I.prototype.keys=function(){var h=[];return this.forEach(function(k,G){h.push(G)}),E(h)},I.prototype.values=function(){var h=[];return this.forEach(function(k){h.push(k)}),E(h)},I.prototype.entries=function(){var h=[];return this.forEach(function(k,G){h.push([G,k])}),E(h)},b.iterable&&(I.prototype[Symbol.iterator]=I.prototype.entries);function j(h){if(h.bodyUsed)return Promise.reject(new TypeError("Already read"));h.bodyUsed=!0}function W(h){return new Promise(function(k,G){h.onload=function(){k(h.result)},h.onerror=function(){G(h.error)}})}function B(h){var k=new FileReader,G=W(k);return k.readAsArrayBuffer(h),G}function X(h){var k=new FileReader,G=W(k);return k.readAsText(h),G}function z(h){for(var k=new Uint8Array(h),G=new Array(k.length),Q=0;Q<k.length;Q++)G[Q]=String.fromCharCode(k[Q]);return G.join("")}function ne(h){if(h.slice)return h.slice(0);var k=new Uint8Array(h.byteLength);return k.set(new Uint8Array(h)),k.buffer}function re(){return this.bodyUsed=!1,this._initBody=function(h){this._bodyInit=h,h?typeof h=="string"?this._bodyText=h:b.blob&&Blob.prototype.isPrototypeOf(h)?this._bodyBlob=h:b.formData&&FormData.prototype.isPrototypeOf(h)?this._bodyFormData=h:b.searchParams&&URLSearchParams.prototype.isPrototypeOf(h)?this._bodyText=h.toString():b.arrayBuffer&&b.blob&&C(h)?(this._bodyArrayBuffer=ne(h.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):b.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(h)||x(h))?this._bodyArrayBuffer=ne(h):this._bodyText=h=Object.prototype.toString.call(h):this._bodyText="",this.headers.get("content-type")||(typeof h=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):b.searchParams&&URLSearchParams.prototype.isPrototypeOf(h)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},b.blob&&(this.blob=function(){var h=j(this);if(h)return h;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?j(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(B)}),this.text=function(){var h=j(this);if(h)return h;if(this._bodyBlob)return X(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(z(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},b.formData&&(this.formData=function(){return this.text().then(je)}),this.json=function(){return this.text().then(JSON.parse)},this}var Re=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function T(h){var k=h.toUpperCase();return Re.indexOf(k)>-1?k:h}function J(h,k){k=k||{};var G=k.body;if(h instanceof J){if(h.bodyUsed)throw new TypeError("Already read");this.url=h.url,this.credentials=h.credentials,k.headers||(this.headers=new I(h.headers)),this.method=h.method,this.mode=h.mode,this.signal=h.signal,!G&&h._bodyInit!=null&&(G=h._bodyInit,h.bodyUsed=!0)}else this.url=String(h);if(this.credentials=k.credentials||this.credentials||"same-origin",(k.headers||!this.headers)&&(this.headers=new I(k.headers)),this.method=T(k.method||this.method||"GET"),this.mode=k.mode||this.mode||null,this.signal=k.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&G)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(G)}J.prototype.clone=function(){return new J(this,{body:this._bodyInit})};function je(h){var k=new FormData;return h.trim().split("&").forEach(function(G){if(G){var Q=G.split("="),te=Q.shift().replace(/\+/g," "),q=Q.join("=").replace(/\+/g," ");k.append(decodeURIComponent(te),decodeURIComponent(q))}}),k}function ie(h){var k=new I,G=h.replace(/\r?\n[\t ]+/g," ");return G.split(/\r?\n/).forEach(function(Q){var te=Q.split(":"),q=te.shift().trim();if(q){var pe=te.join(":").trim();k.append(q,pe)}}),k}re.call(J.prototype);function oe(h,k){k||(k={}),this.type="default",this.status=k.status===void 0?200:k.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in k?k.statusText:"OK",this.headers=new I(k.headers),this.url=k.url||"",this._initBody(h)}re.call(oe.prototype),oe.prototype.clone=function(){return new oe(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new I(this.headers),url:this.url})},oe.error=function(){var h=new oe(null,{status:0,statusText:""});return h.type="error",h};var Pe=[301,302,303,307,308];oe.redirect=function(h,k){if(Pe.indexOf(k)===-1)throw new RangeError("Invalid status code");return new oe(null,{status:k,headers:{location:h}})},c.DOMException=d.DOMException;try{new c.DOMException}catch{c.DOMException=function(h,k){this.message=h,this.name=k;var G=Error(h);this.stack=G.stack},c.DOMException.prototype=Object.create(Error.prototype),c.DOMException.prototype.constructor=c.DOMException}function De(h,k){return new Promise(function(G,Q){var te=new J(h,k);if(te.signal&&te.signal.aborted)return Q(new c.DOMException("Aborted","AbortError"));var q=new XMLHttpRequest;function pe(){q.abort()}q.onload=function(){var _e={status:q.status,statusText:q.statusText,headers:ie(q.getAllResponseHeaders()||"")};_e.url="responseURL"in q?q.responseURL:_e.headers.get("X-Request-URL");var be="response"in q?q.response:q.responseText;G(new oe(be,_e))},q.onerror=function(){Q(new TypeError("Network request failed"))},q.ontimeout=function(){Q(new TypeError("Network request failed"))},q.onabort=function(){Q(new c.DOMException("Aborted","AbortError"))},q.open(te.method,te.url,!0),te.credentials==="include"?q.withCredentials=!0:te.credentials==="omit"&&(q.withCredentials=!1),"responseType"in q&&b.blob&&(q.responseType="blob"),te.headers.forEach(function(_e,be){q.setRequestHeader(be,_e)}),te.signal&&(te.signal.addEventListener("abort",pe),q.onreadystatechange=function(){q.readyState===4&&te.signal.removeEventListener("abort",pe)}),q.send(typeof te._bodyInit>"u"?null:te._bodyInit)})}return De.polyfill=!0,d.fetch||(d.fetch=De,d.Headers=I,d.Request=J,d.Response=oe),c.Headers=I,c.Request=J,c.Response=oe,c.fetch=De,Object.defineProperty(c,"__esModule",{value:!0}),c}({})})(o),o.fetch.ponyfill=!0,delete o.fetch.polyfill;var r=o;e=r.fetch,e.default=r.fetch,e.fetch=r.fetch,e.Headers=r.Headers,e.Request=r.Request,e.Response=r.Response,t.exports=e}),Kr=(e,t,n,o)=>{if(n==="length"||n==="prototype"||n==="arguments"||n==="caller")return;let r=Object.getOwnPropertyDescriptor(e,n),d=Object.getOwnPropertyDescriptor(t,n);!Zr(r,d)&&o||Object.defineProperty(e,n,d)},Zr=function(e,t){return e===void 0||e.configurable||e.writable===t.writable&&e.enumerable===t.enumerable&&e.configurable===t.configurable&&(e.writable||e.value===t.value)},Yr=(e,t)=>{let n=Object.getPrototypeOf(t);n!==Object.getPrototypeOf(e)&&Object.setPrototypeOf(e,n)},Xr=(e,t)=>`/* Wrapped ${e}*/
${t}`,Qr=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),es=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),ts=(e,t,n)=>{let o=n===""?"":`with ${n.trim()}() `,r=Xr.bind(null,o,t.toString());Object.defineProperty(r,"name",es),Object.defineProperty(e,"toString",{...Qr,value:r})};function is(e,t,{ignoreNonConfigurable:n=!1}={}){let{name:o}=e;for(let r of Reflect.ownKeys(t))Kr(e,t,r,n);return Yr(e,t),ts(e,t,o),e}var ns=new WeakMap;function rs(e,{cacheKey:t=([o])=>o,cache:n=new Map}={}){let o=new Map,r=function(...d){let v=t(d);if(o.has(v))return o.get(v);let c=(async()=>{try{if(n&&await n.has(v))return await n.get(v);let b=await e.apply(this,d);try{return b}finally{n&&await n.set(v,b)}}finally{o.delete(v)}})();return o.set(v,c),c};return is(r,e,{ignoreNonConfigurable:!0}),ns.set(r,n),r}var ss=zn(Jr(),1),as=["string","number","bigint","symbol"],os=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function ls(e){if(e===null)return"null";if(e===void 0)return"undefined";if(e===!0||e===!1)return"boolean";let t=typeof e;return as.includes(t)?t:t==="function"?"Function":Array.isArray(e)?"Array":cs(e)?"Buffer":us(e)||"Object"}function cs(e){return e&&e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer.call(null,e)}function us(e){let t=Object.prototype.toString.call(e).slice(8,-1);if(os.includes(t))return t}var U=class{constructor(e,t,n){this.major=e,this.majorEncoded=e<<5,this.name=t,this.terminal=n}toString(){return`Type[${this.major}].${this.name}`}compare(e){return this.major<e.major?-1:this.major>e.major?1:0}};U.uint=new U(0,"uint",!0);U.negint=new U(1,"negint",!0);U.bytes=new U(2,"bytes",!0);U.string=new U(3,"string",!0);U.array=new U(4,"array",!1);U.map=new U(5,"map",!1);U.tag=new U(6,"tag",!1);U.float=new U(7,"float",!0);U.false=new U(7,"false",!0);U.true=new U(7,"true",!0);U.null=new U(7,"null",!0);U.undefined=new U(7,"undefined",!0);U.break=new U(7,"break",!0);var Z=class{constructor(e,t,n){this.type=e,this.value=t,this.encodedLength=n,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}},Lt=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",fs=new TextDecoder,ps=new TextEncoder;function ci(e){return Lt&&globalThis.Buffer.isBuffer(e)}function hs(e){return e instanceof Uint8Array?ci(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e:Uint8Array.from(e)}var ds=Lt?(e,t,n)=>n-t>64?globalThis.Buffer.from(e.subarray(t,n)).toString("utf8"):Ln(e,t,n):(e,t,n)=>n-t>64?fs.decode(e.subarray(t,n)):Ln(e,t,n),gs=Lt?e=>e.length>64?globalThis.Buffer.from(e):Dn(e):e=>e.length>64?ps.encode(e):Dn(e),Hi=Lt?(e,t,n)=>ci(e)?new Uint8Array(e.subarray(t,n)):e.slice(t,n):(e,t,n)=>e.slice(t,n),ms=Lt?(e,t)=>(e=e.map(n=>n instanceof Uint8Array?n:globalThis.Buffer.from(n)),hs(globalThis.Buffer.concat(e,t))):(e,t)=>{let n=new Uint8Array(t),o=0;for(let r of e)o+r.length>n.length&&(r=r.subarray(0,n.length-o)),n.set(r,o),o+=r.length;return n},ys=Lt?e=>globalThis.Buffer.allocUnsafe(e):e=>new Uint8Array(e);function ws(e,t){if(ci(e)&&ci(t))return e.compare(t);for(let n=0;n<e.length;n++)if(e[n]!==t[n])return e[n]<t[n]?-1:1;return 0}function Dn(e,t=1/0){let n,o=e.length,r=null,d=[];for(let v=0;v<o;++v){if(n=e.charCodeAt(v),n>55295&&n<57344){if(!r){if(n>56319){(t-=3)>-1&&d.push(239,191,189);continue}else if(v+1===o){(t-=3)>-1&&d.push(239,191,189);continue}r=n;continue}if(n<56320){(t-=3)>-1&&d.push(239,191,189),r=n;continue}n=(r-55296<<10|n-56320)+65536}else r&&(t-=3)>-1&&d.push(239,191,189);if(r=null,n<128){if((t-=1)<0)break;d.push(n)}else if(n<2048){if((t-=2)<0)break;d.push(n>>6|192,n&63|128)}else if(n<65536){if((t-=3)<0)break;d.push(n>>12|224,n>>6&63|128,n&63|128)}else if(n<1114112){if((t-=4)<0)break;d.push(n>>18|240,n>>12&63|128,n>>6&63|128,n&63|128)}else throw new Error("Invalid code point")}return d}function Ln(e,t,n){let o=[];for(;t<n;){let r=e[t],d=null,v=r>239?4:r>223?3:r>191?2:1;if(t+v<=n){let c,b,C,w;switch(v){case 1:r<128&&(d=r);break;case 2:c=e[t+1],(c&192)===128&&(w=(r&31)<<6|c&63,w>127&&(d=w));break;case 3:c=e[t+1],b=e[t+2],(c&192)===128&&(b&192)===128&&(w=(r&15)<<12|(c&63)<<6|b&63,w>2047&&(w<55296||w>57343)&&(d=w));break;case 4:c=e[t+1],b=e[t+2],C=e[t+3],(c&192)===128&&(b&192)===128&&(C&192)===128&&(w=(r&15)<<18|(c&63)<<12|(b&63)<<6|C&63,w>65535&&w<1114112&&(d=w))}}d===null?(d=65533,v=1):d>65535&&(d-=65536,o.push(d>>>10&1023|55296),d=56320|d&1023),o.push(d),t+=v}return _s(o)}var Un=4096;function _s(e){let t=e.length;if(t<=Un)return String.fromCharCode.apply(String,e);let n="",o=0;for(;o<t;)n+=String.fromCharCode.apply(String,e.slice(o,o+=Un));return n}var vs=256,bs=class{constructor(e=vs){this.chunkSize=e,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(e){let t=this.chunks[this.chunks.length-1];if(this.cursor+e.length<=this.maxCursor+1){let n=t.length-(this.maxCursor-this.cursor)-1;t.set(e,n)}else{if(t){let n=t.length-(this.maxCursor-this.cursor)-1;n<t.length&&(this.chunks[this.chunks.length-1]=t.subarray(0,n),this.maxCursor=this.cursor-1)}e.length<64&&e.length<this.chunkSize?(t=ys(this.chunkSize),this.chunks.push(t),this.maxCursor+=t.length,this._initReuseChunk===null&&(this._initReuseChunk=t),t.set(e,0)):(this.chunks.push(e),this.maxCursor+=e.length)}this.cursor+=e.length}toBytes(e=!1){let t;if(this.chunks.length===1){let n=this.chunks[0];e&&this.cursor>n.length/2?(t=this.cursor===n.length?n:n.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):t=Hi(n,0,this.cursor)}else t=ms(this.chunks,this.cursor);return e&&this.reset(),t}},ce="CBOR decode error:",$n="CBOR encode error:",qt=[];qt[23]=1;qt[24]=2;qt[25]=3;qt[26]=5;qt[27]=9;function Ut(e,t,n){if(e.length-t<n)throw new Error(`${ce} not enough data for type`)}var Be=[24,256,65536,4294967296,BigInt("18446744073709551616")];function Et(e,t,n){Ut(e,t,1);let o=e[t];if(n.strict===!0&&o<Be[0])throw new Error(`${ce} integer encoded in more bytes than necessary (strict decode)`);return o}function Rt(e,t,n){Ut(e,t,2);let o=e[t]<<8|e[t+1];if(n.strict===!0&&o<Be[1])throw new Error(`${ce} integer encoded in more bytes than necessary (strict decode)`);return o}function Ot(e,t,n){Ut(e,t,4);let o=e[t]*16777216+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3];if(n.strict===!0&&o<Be[2])throw new Error(`${ce} integer encoded in more bytes than necessary (strict decode)`);return o}function It(e,t,n){Ut(e,t,8);let o=e[t]*16777216+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3],r=e[t+4]*16777216+(e[t+5]<<16)+(e[t+6]<<8)+e[t+7],d=(BigInt(o)<<BigInt(32))+BigInt(r);if(n.strict===!0&&d<Be[3])throw new Error(`${ce} integer encoded in more bytes than necessary (strict decode)`);if(d<=Number.MAX_SAFE_INTEGER)return Number(d);if(n.allowBigInt===!0)return d;throw new Error(`${ce} integers outside of the safe integer range are not supported`)}function ks(e,t,n,o){return new Z(U.uint,Et(e,t+1,o),2)}function Ss(e,t,n,o){return new Z(U.uint,Rt(e,t+1,o),3)}function Es(e,t,n,o){return new Z(U.uint,Ot(e,t+1,o),5)}function Rs(e,t,n,o){return new Z(U.uint,It(e,t+1,o),9)}function Nt(e,t){return Ze(e,0,t.value)}function Ze(e,t,n){if(n<Be[0]){let o=Number(n);e.push([t|o])}else if(n<Be[1]){let o=Number(n);e.push([t|24,o])}else if(n<Be[2]){let o=Number(n);e.push([t|25,o>>>8,o&255])}else if(n<Be[3]){let o=Number(n);e.push([t|26,o>>>24&255,o>>>16&255,o>>>8&255,o&255])}else{let o=BigInt(n);if(o<Be[4]){let r=[t|27,0,0,0,0,0,0,0],d=Number(o&BigInt(4294967295)),v=Number(o>>BigInt(32)&BigInt(4294967295));r[8]=d&255,d=d>>8,r[7]=d&255,d=d>>8,r[6]=d&255,d=d>>8,r[5]=d&255,r[4]=v&255,v=v>>8,r[3]=v&255,v=v>>8,r[2]=v&255,v=v>>8,r[1]=v&255,e.push(r)}else throw new Error(`${ce} encountered BigInt larger than allowable range`)}}Nt.encodedSize=function(e){return Ze.encodedSize(e.value)};Ze.encodedSize=function(e){return e<Be[0]?1:e<Be[1]?2:e<Be[2]?3:e<Be[3]?5:9};Nt.compareTokens=function(e,t){return e.value<t.value?-1:e.value>t.value?1:0};function Os(e,t,n,o){return new Z(U.negint,-1-Et(e,t+1,o),2)}function Is(e,t,n,o){return new Z(U.negint,-1-Rt(e,t+1,o),3)}function Ns(e,t,n,o){return new Z(U.negint,-1-Ot(e,t+1,o),5)}var Wi=BigInt(-1),Vn=BigInt(1);function Ts(e,t,n,o){let r=It(e,t+1,o);if(typeof r!="bigint"){let d=-1-r;if(d>=Number.MIN_SAFE_INTEGER)return new Z(U.negint,d,9)}if(o.allowBigInt!==!0)throw new Error(`${ce} integers outside of the safe integer range are not supported`);return new Z(U.negint,Wi-BigInt(r),9)}function Ji(e,t){let n=t.value,o=typeof n=="bigint"?n*Wi-Vn:n*-1-1;Ze(e,t.type.majorEncoded,o)}Ji.encodedSize=function(e){let t=e.value,n=typeof t=="bigint"?t*Wi-Vn:t*-1-1;return n<Be[0]?1:n<Be[1]?2:n<Be[2]?3:n<Be[3]?5:9};Ji.compareTokens=function(e,t){return e.value<t.value?1:e.value>t.value?-1:0};function Kt(e,t,n,o){Ut(e,t,n+o);let r=Hi(e,t+n,t+n+o);return new Z(U.bytes,r,n+o)}function As(e,t,n,o){return Kt(e,t,1,n)}function xs(e,t,n,o){return Kt(e,t,2,Et(e,t+1,o))}function Cs(e,t,n,o){return Kt(e,t,3,Rt(e,t+1,o))}function Bs(e,t,n,o){return Kt(e,t,5,Ot(e,t+1,o))}function Ds(e,t,n,o){let r=It(e,t+1,o);if(typeof r=="bigint")throw new Error(`${ce} 64-bit integer bytes lengths not supported`);return Kt(e,t,9,r)}function ui(e){return e.encodedBytes===void 0&&(e.encodedBytes=e.type===U.string?gs(e.value):e.value),e.encodedBytes}function di(e,t){let n=ui(t);Ze(e,t.type.majorEncoded,n.length),e.push(n)}di.encodedSize=function(e){let t=ui(e);return Ze.encodedSize(t.length)+t.length};di.compareTokens=function(e,t){return Ls(ui(e),ui(t))};function Ls(e,t){return e.length<t.length?-1:e.length>t.length?1:ws(e,t)}function Zt(e,t,n,o,r){let d=n+o;Ut(e,t,d);let v=new Z(U.string,ds(e,t+n,t+d),d);return r.retainStringBytes===!0&&(v.byteValue=Hi(e,t+n,t+d)),v}function Us(e,t,n,o){return Zt(e,t,1,n,o)}function Ps(e,t,n,o){return Zt(e,t,2,Et(e,t+1,o),o)}function Fs(e,t,n,o){return Zt(e,t,3,Rt(e,t+1,o),o)}function Ms(e,t,n,o){return Zt(e,t,5,Ot(e,t+1,o),o)}function js(e,t,n,o){let r=It(e,t+1,o);if(typeof r=="bigint")throw new Error(`${ce} 64-bit integer string lengths not supported`);return Zt(e,t,9,r,o)}var Gs=di;function Pt(e,t,n,o){return new Z(U.array,o,n)}function zs(e,t,n,o){return Pt(e,t,1,n)}function $s(e,t,n,o){return Pt(e,t,2,Et(e,t+1,o))}function Vs(e,t,n,o){return Pt(e,t,3,Rt(e,t+1,o))}function Hs(e,t,n,o){return Pt(e,t,5,Ot(e,t+1,o))}function Ws(e,t,n,o){let r=It(e,t+1,o);if(typeof r=="bigint")throw new Error(`${ce} 64-bit integer array lengths not supported`);return Pt(e,t,9,r)}function Js(e,t,n,o){if(o.allowIndefinite===!1)throw new Error(`${ce} indefinite length items not allowed`);return Pt(e,t,1,1/0)}function qi(e,t){Ze(e,U.array.majorEncoded,t.value)}qi.compareTokens=Nt.compareTokens;qi.encodedSize=function(e){return Ze.encodedSize(e.value)};function Ft(e,t,n,o){return new Z(U.map,o,n)}function qs(e,t,n,o){return Ft(e,t,1,n)}function Ks(e,t,n,o){return Ft(e,t,2,Et(e,t+1,o))}function Zs(e,t,n,o){return Ft(e,t,3,Rt(e,t+1,o))}function Ys(e,t,n,o){return Ft(e,t,5,Ot(e,t+1,o))}function Xs(e,t,n,o){let r=It(e,t+1,o);if(typeof r=="bigint")throw new Error(`${ce} 64-bit integer map lengths not supported`);return Ft(e,t,9,r)}function Qs(e,t,n,o){if(o.allowIndefinite===!1)throw new Error(`${ce} indefinite length items not allowed`);return Ft(e,t,1,1/0)}function Ki(e,t){Ze(e,U.map.majorEncoded,t.value)}Ki.compareTokens=Nt.compareTokens;Ki.encodedSize=function(e){return Ze.encodedSize(e.value)};function ea(e,t,n,o){return new Z(U.tag,n,1)}function ta(e,t,n,o){return new Z(U.tag,Et(e,t+1,o),2)}function ia(e,t,n,o){return new Z(U.tag,Rt(e,t+1,o),3)}function na(e,t,n,o){return new Z(U.tag,Ot(e,t+1,o),5)}function ra(e,t,n,o){return new Z(U.tag,It(e,t+1,o),9)}function Zi(e,t){Ze(e,U.tag.majorEncoded,t.value)}Zi.compareTokens=Nt.compareTokens;Zi.encodedSize=function(e){return Ze.encodedSize(e.value)};var sa=20,aa=21,oa=22,la=23;function ca(e,t,n,o){if(o.allowUndefined===!1)throw new Error(`${ce} undefined values are not supported`);return o.coerceUndefinedToNull===!0?new Z(U.null,null,1):new Z(U.undefined,void 0,1)}function ua(e,t,n,o){if(o.allowIndefinite===!1)throw new Error(`${ce} indefinite length items not allowed`);return new Z(U.break,void 0,1)}function Yi(e,t,n){if(n){if(n.allowNaN===!1&&Number.isNaN(e))throw new Error(`${ce} NaN values are not supported`);if(n.allowInfinity===!1&&(e===1/0||e===-1/0))throw new Error(`${ce} Infinity values are not supported`)}return new Z(U.float,e,t)}function fa(e,t,n,o){return Yi(Qi(e,t+1),3,o)}function pa(e,t,n,o){return Yi(en(e,t+1),5,o)}function ha(e,t,n,o){return Yi(qn(e,t+1),9,o)}function Xi(e,t,n){let o=t.value;if(o===!1)e.push([U.float.majorEncoded|sa]);else if(o===!0)e.push([U.float.majorEncoded|aa]);else if(o===null)e.push([U.float.majorEncoded|oa]);else if(o===void 0)e.push([U.float.majorEncoded|la]);else{let r,d=!1;(!n||n.float64!==!0)&&(Wn(o),r=Qi(et,1),o===r||Number.isNaN(o)?(et[0]=249,e.push(et.slice(0,3)),d=!0):(Jn(o),r=en(et,1),o===r&&(et[0]=250,e.push(et.slice(0,5)),d=!0))),d||(da(o),r=qn(et,1),et[0]=251,e.push(et.slice(0,9)))}}Xi.encodedSize=function(e,t){let n=e.value;if(n===!1||n===!0||n===null||n===void 0)return 1;if(!t||t.float64!==!0){Wn(n);let o=Qi(et,1);if(n===o||Number.isNaN(n))return 3;if(Jn(n),o=en(et,1),n===o)return 5}return 9};var Hn=new ArrayBuffer(9),Ke=new DataView(Hn,1),et=new Uint8Array(Hn,0);function Wn(e){if(e===1/0)Ke.setUint16(0,31744,!1);else if(e===-1/0)Ke.setUint16(0,64512,!1);else if(Number.isNaN(e))Ke.setUint16(0,32256,!1);else{Ke.setFloat32(0,e);let t=Ke.getUint32(0),n=(t&2139095040)>>23,o=t&8388607;if(n===255)Ke.setUint16(0,31744,!1);else if(n===0)Ke.setUint16(0,(e&2147483648)>>16|o>>13,!1);else{let r=n-127;r<-24?Ke.setUint16(0,0):r<-14?Ke.setUint16(0,(t&2147483648)>>16|1<<24+r,!1):Ke.setUint16(0,(t&2147483648)>>16|r+15<<10|o>>13,!1)}}}function Qi(e,t){if(e.length-t<2)throw new Error(`${ce} not enough data for float16`);let n=(e[t]<<8)+e[t+1];if(n===31744)return 1/0;if(n===64512)return-1/0;if(n===32256)return NaN;let o=n>>10&31,r=n&1023,d;return o===0?d=r*2**-24:o!==31?d=(r+1024)*2**(o-25):d=r===0?1/0:NaN,n&32768?-d:d}function Jn(e){Ke.setFloat32(0,e,!1)}function en(e,t){if(e.length-t<4)throw new Error(`${ce} not enough data for float32`);let n=(e.byteOffset||0)+t;return new DataView(e.buffer,n,4).getFloat32(0,!1)}function da(e){Ke.setFloat64(0,e,!1)}function qn(e,t){if(e.length-t<8)throw new Error(`${ce} not enough data for float64`);let n=(e.byteOffset||0)+t;return new DataView(e.buffer,n,8).getFloat64(0,!1)}Xi.compareTokens=Nt.compareTokens;function fe(e,t,n){throw new Error(`${ce} encountered invalid minor (${n}) for major ${e[t]>>>5}`)}function gi(e){return()=>{throw new Error(`${ce} ${e}`)}}var $=[];for(let e=0;e<=23;e++)$[e]=fe;$[24]=ks;$[25]=Ss;$[26]=Es;$[27]=Rs;$[28]=fe;$[29]=fe;$[30]=fe;$[31]=fe;for(let e=32;e<=55;e++)$[e]=fe;$[56]=Os;$[57]=Is;$[58]=Ns;$[59]=Ts;$[60]=fe;$[61]=fe;$[62]=fe;$[63]=fe;for(let e=64;e<=87;e++)$[e]=As;$[88]=xs;$[89]=Cs;$[90]=Bs;$[91]=Ds;$[92]=fe;$[93]=fe;$[94]=fe;$[95]=gi("indefinite length bytes/strings are not supported");for(let e=96;e<=119;e++)$[e]=Us;$[120]=Ps;$[121]=Fs;$[122]=Ms;$[123]=js;$[124]=fe;$[125]=fe;$[126]=fe;$[127]=gi("indefinite length bytes/strings are not supported");for(let e=128;e<=151;e++)$[e]=zs;$[152]=$s;$[153]=Vs;$[154]=Hs;$[155]=Ws;$[156]=fe;$[157]=fe;$[158]=fe;$[159]=Js;for(let e=160;e<=183;e++)$[e]=qs;$[184]=Ks;$[185]=Zs;$[186]=Ys;$[187]=Xs;$[188]=fe;$[189]=fe;$[190]=fe;$[191]=Qs;for(let e=192;e<=215;e++)$[e]=ea;$[216]=ta;$[217]=ia;$[218]=na;$[219]=ra;$[220]=fe;$[221]=fe;$[222]=fe;$[223]=fe;for(let e=224;e<=243;e++)$[e]=gi("simple values are not supported");$[244]=fe;$[245]=fe;$[246]=fe;$[247]=ca;$[248]=gi("simple values are not supported");$[249]=fa;$[250]=pa;$[251]=ha;$[252]=fe;$[253]=fe;$[254]=fe;$[255]=ua;var st=[];for(let e=0;e<24;e++)st[e]=new Z(U.uint,e,1);for(let e=-1;e>=-24;e--)st[31-e]=new Z(U.negint,e,1);st[64]=new Z(U.bytes,new Uint8Array(0),1);st[96]=new Z(U.string,"",1);st[128]=new Z(U.array,0,1);st[160]=new Z(U.map,0,1);st[244]=new Z(U.false,!1,1);st[245]=new Z(U.true,!0,1);st[246]=new Z(U.null,null,1);function ga(){let e=[];return e[U.uint.major]=Nt,e[U.negint.major]=Ji,e[U.bytes.major]=di,e[U.string.major]=Gs,e[U.array.major]=qi,e[U.map.major]=Ki,e[U.tag.major]=Zi,e[U.float.major]=Xi,e}var ul=ga(),fl=new bs,zi=class{constructor(e,t){this.obj=e,this.parent=t}includes(e){let t=this;do if(t.obj===e)return!0;while(t=t.parent);return!1}static createCheck(e,t){if(e&&e.includes(t))throw new Error(`${$n} object contains circular references`);return new zi(t,e)}},gt={null:new Z(U.null,null),undefined:new Z(U.undefined,void 0),true:new Z(U.true,!0),false:new Z(U.false,!1),emptyArray:new Z(U.array,0),emptyMap:new Z(U.map,0)},yt={number(e,t,n,o){return!Number.isInteger(e)||!Number.isSafeInteger(e)?new Z(U.float,e):e>=0?new Z(U.uint,e):new Z(U.negint,e)},bigint(e,t,n,o){return e>=BigInt(0)?new Z(U.uint,e):new Z(U.negint,e)},Uint8Array(e,t,n,o){return new Z(U.bytes,e)},string(e,t,n,o){return new Z(U.string,e)},boolean(e,t,n,o){return e?gt.true:gt.false},null(e,t,n,o){return gt.null},undefined(e,t,n,o){return gt.undefined},ArrayBuffer(e,t,n,o){return new Z(U.bytes,new Uint8Array(e))},DataView(e,t,n,o){return new Z(U.bytes,new Uint8Array(e.buffer,e.byteOffset,e.byteLength))},Array(e,t,n,o){if(!e.length)return n.addBreakTokens===!0?[gt.emptyArray,new Z(U.break)]:gt.emptyArray;o=zi.createCheck(o,e);let r=[],d=0;for(let v of e)r[d++]=Gi(v,n,o);return n.addBreakTokens?[new Z(U.array,e.length),r,new Z(U.break)]:[new Z(U.array,e.length),r]},Object(e,t,n,o){let r=t!=="Object",d=r?e.keys():Object.keys(e),v=r?e.size:d.length;if(!v)return n.addBreakTokens===!0?[gt.emptyMap,new Z(U.break)]:gt.emptyMap;o=zi.createCheck(o,e);let c=[],b=0;for(let C of d)c[b++]=[Gi(C,n,o),Gi(r?e.get(C):e[C],n,o)];return ma(c,n),n.addBreakTokens?[new Z(U.map,v),c,new Z(U.break)]:[new Z(U.map,v),c]}};yt.Map=yt.Object;yt.Buffer=yt.Uint8Array;for(let e of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))yt[`${e}Array`]=yt.DataView;function Gi(e,t={},n){let o=ls(e),r=t&&t.typeEncoders&&t.typeEncoders[o]||yt[o];if(typeof r=="function"){let v=r(e,o,t,n);if(v!=null)return v}let d=yt[o];if(!d)throw new Error(`${$n} unsupported type: ${o}`);return d(e,o,t,n)}function ma(e,t){t.mapSorter&&e.sort(t.mapSorter)}var ya={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0},wa=class{constructor(e,t={}){this.pos=0,this.data=e,this.options=t}done(){return this.pos>=this.data.length}next(){let e=this.data[this.pos],t=st[e];if(t===void 0){let n=$[e];if(!n)throw new Error(`${ce} no decoder for major type ${e>>>5} (byte 0x${e.toString(16).padStart(2,"0")})`);let o=e&31;t=n(this.data,this.pos,o,this.options)}return this.pos+=t.encodedLength,t}},Wt=Symbol.for("DONE"),mi=Symbol.for("BREAK");function _a(e,t,n){let o=[];for(let r=0;r<e.value;r++){let d=Jt(t,n);if(d===mi){if(e.value===1/0)break;throw new Error(`${ce} got unexpected break to lengthed array`)}if(d===Wt)throw new Error(`${ce} found array but not enough entries (got ${r}, expected ${e.value})`);o[r]=d}return o}function va(e,t,n){let o=n.useMaps===!0,r=o?void 0:{},d=o?new Map:void 0;for(let v=0;v<e.value;v++){let c=Jt(t,n);if(c===mi){if(e.value===1/0)break;throw new Error(`${ce} got unexpected break to lengthed map`)}if(c===Wt)throw new Error(`${ce} found map but not enough entries (got ${v} [no key], expected ${e.value})`);if(o!==!0&&typeof c!="string")throw new Error(`${ce} non-string keys not supported (got ${typeof c})`);let b=Jt(t,n);if(b===Wt)throw new Error(`${ce} found map but not enough entries (got ${v} [no value], expected ${e.value})`);o?d.set(c,b):r[c]=b}return o?d:r}function Jt(e,t){if(e.done())return Wt;let n=e.next();if(n.type===U.break)return mi;if(n.type.terminal)return n.value;if(n.type===U.array)return _a(n,e,t);if(n.type===U.map)return va(n,e,t);if(n.type===U.tag){if(t.tags&&typeof t.tags[n.value]=="function"){let o=Jt(e,t);return t.tags[n.value](o)}throw new Error(`${ce} tag not supported (${n.value})`)}throw new Error("unsupported")}function ba(e,t){if(!(e instanceof Uint8Array))throw new Error(`${ce} data to decode must be a Uint8Array`);t=Object.assign({},ya,t);let n=t.tokenizer||new wa(e,t),o=Jt(n,t);if(o===Wt)throw new Error(`${ce} did not find any content to decode`);if(o===mi)throw new Error(`${ce} got unexpected break`);if(!n.done())throw new Error(`${ce} too many terminals, data makes no sense`);return o}var ka=Kn,Pn=128,Sa=127,Ea=~Sa,Ra=Math.pow(2,31);function Kn(e,t,n){t=t||[],n=n||0;for(var o=n;e>=Ra;)t[n++]=e&255|Pn,e/=128;for(;e&Ea;)t[n++]=e&255|Pn,e>>>=7;return t[n]=e|0,Kn.bytes=n-o+1,t}var Oa=$i,Ia=128,Fn=127;function $i(e,o){var n=0,o=o||0,r=0,d=o,v,c=e.length;do{if(d>=c)throw $i.bytes=0,new RangeError("Could not decode varint");v=e[d++],n+=r<28?(v&Fn)<<r:(v&Fn)*Math.pow(2,r),r+=7}while(v>=Ia);return $i.bytes=d-o,n}var Na=Math.pow(2,7),Ta=Math.pow(2,14),Aa=Math.pow(2,21),xa=Math.pow(2,28),Ca=Math.pow(2,35),Ba=Math.pow(2,42),Da=Math.pow(2,49),La=Math.pow(2,56),Ua=Math.pow(2,63),Pa=function(e){return e<Na?1:e<Ta?2:e<Aa?3:e<xa?4:e<Ca?5:e<Ba?6:e<Da?7:e<La?8:e<Ua?9:10},Fa={encode:ka,decode:Oa,encodingLength:Pa},Ma=Fa,fi=Ma,Vi=(e,t=0)=>[fi.decode(e,t),fi.decode.bytes],pi=(e,t,n=0)=>(fi.encode(e,t,n),t),hi=e=>fi.encodingLength(e),pl=new Uint8Array(0),ja=(e,t)=>{if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let n=0;n<e.byteLength;n++)if(e[n]!==t[n])return!1;return!0},tn=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},Ga=(e,t)=>{let n=t.byteLength,o=hi(e),r=o+hi(n),d=new Uint8Array(r+n);return pi(e,d,0),pi(n,d,o),d.set(t,r),new nn(e,n,t,d)},za=e=>{let t=tn(e),[n,o]=Vi(t),[r,d]=Vi(t.subarray(o)),v=t.subarray(o+d);if(v.byteLength!==r)throw new Error("Incorrect length");return new nn(n,r,v,t)},$a=(e,t)=>e===t?!0:e.code===t.code&&e.size===t.size&&ja(e.bytes,t.bytes),nn=class{constructor(e,t,n,o){this.code=e,this.size=t,this.digest=n,this.bytes=o}};function Va(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),o=0;o<n.length;o++)n[o]=255;for(var r=0;r<e.length;r++){var d=e.charAt(r),v=d.charCodeAt(0);if(n[v]!==255)throw new TypeError(d+" is ambiguous");n[v]=r}var c=e.length,b=e.charAt(0),C=Math.log(c)/Math.log(256),w=Math.log(256)/Math.log(c);function x(E){if(E instanceof Uint8Array||(ArrayBuffer.isView(E)?E=new Uint8Array(E.buffer,E.byteOffset,E.byteLength):Array.isArray(E)&&(E=Uint8Array.from(E))),!(E instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(E.length===0)return"";for(var I=0,j=0,W=0,B=E.length;W!==B&&E[W]===0;)W++,I++;for(var X=(B-W)*w+1>>>0,z=new Uint8Array(X);W!==B;){for(var ne=E[W],re=0,Re=X-1;(ne!==0||re<j)&&Re!==-1;Re--,re++)ne+=256*z[Re]>>>0,z[Re]=ne%c>>>0,ne=ne/c>>>0;if(ne!==0)throw new Error("Non-zero carry");j=re,W++}for(var T=X-j;T!==X&&z[T]===0;)T++;for(var J=b.repeat(I);T<X;++T)J+=e.charAt(z[T]);return J}function D(E){if(typeof E!="string")throw new TypeError("Expected String");if(E.length===0)return new Uint8Array;var I=0;if(E[I]!==" "){for(var j=0,W=0;E[I]===b;)j++,I++;for(var B=(E.length-I)*C+1>>>0,X=new Uint8Array(B);E[I];){var z=n[E.charCodeAt(I)];if(z===255)return;for(var ne=0,re=B-1;(z!==0||ne<W)&&re!==-1;re--,ne++)z+=c*X[re]>>>0,X[re]=z%256>>>0,z=z/256>>>0;if(z!==0)throw new Error("Non-zero carry");W=ne,I++}if(E[I]!==" "){for(var Re=B-W;Re!==B&&X[Re]===0;)Re++;for(var T=new Uint8Array(j+(B-Re)),J=j;Re!==B;)T[J++]=X[Re++];return T}}}function M(E){var I=D(E);if(I)return I;throw new Error(`Non-${t} character`)}return{encode:x,decodeUnsafe:D,decode:M}}var Ha=Va,Wa=Ha,Ja=Wa,qa=class{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Ka=class{constructor(e,t,n){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Zn(this,e)}},Za=class{constructor(e){this.decoders=e}or(e){return Zn(this,e)}decode(e){let t=e[0],n=this.decoders[t];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},Zn=(e,t)=>new Za({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}}),Ya=class{constructor(e,t,n,o){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=o,this.encoder=new qa(e,t,n),this.decoder=new Ka(e,t,o)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},Yn=({name:e,prefix:t,encode:n,decode:o})=>new Ya(e,t,n,o),Xn=({prefix:e,name:t,alphabet:n})=>{let{encode:o,decode:r}=Ja(n,t);return Yn({prefix:e,name:t,encode:o,decode:d=>tn(r(d))})},Xa=(e,t,n,o)=>{let r={};for(let w=0;w<t.length;++w)r[t[w]]=w;let d=e.length;for(;e[d-1]==="=";)--d;let v=new Uint8Array(d*n/8|0),c=0,b=0,C=0;for(let w=0;w<d;++w){let x=r[e[w]];if(x===void 0)throw new SyntaxError(`Non-${o} character`);b=b<<n|x,c+=n,c>=8&&(c-=8,v[C++]=255&b>>c)}if(c>=n||255&b<<8-c)throw new SyntaxError("Unexpected end of data");return v},Qa=(e,t,n)=>{let o=t[t.length-1]==="=",r=(1<<n)-1,d="",v=0,c=0;for(let b=0;b<e.length;++b)for(c=c<<8|e[b],v+=8;v>n;)v-=n,d+=t[r&c>>v];if(v&&(d+=t[r&c<<n-v]),o)for(;d.length*n&7;)d+="=";return d},ct=({name:e,prefix:t,bitsPerChar:n,alphabet:o})=>Yn({prefix:t,name:e,encode(r){return Qa(r,o,n)},decode(r){return Xa(r,o,n,e)}}),mt=Xn({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),hl=Xn({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),li=ct({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),dl=ct({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),gl=ct({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),ml=ct({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),yl=ct({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),wl=ct({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),_l=ct({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),vl=ct({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),bl=ct({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Ce=class{constructor(e,t,n,o){this.code=t,this.version=e,this.multihash=n,this.bytes=o,this.byteOffset=o.byteOffset,this.byteLength=o.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:oi,byteLength:oi,code:ai,version:ai,multihash:ai,bytes:ai,_baseCache:oi,asCID:oi})}toV0(){switch(this.version){case 0:return this;default:{let{code:e,multihash:t}=this;if(e!==Ht)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==no)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return Ce.createV0(t)}}}toV1(){switch(this.version){case 0:{let{code:e,digest:t}=this.multihash,n=Ga(e,t);return Ce.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&$a(this.multihash,e.multihash)}toString(e){let{bytes:t,version:n,_baseCache:o}=this;switch(n){case 0:return to(t,o,e||mt.encoder);default:return io(t,o,e||li.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return so(/^0\.0/,ao),!!(e&&(e[jn]||e.asCID===e))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof Ce)return e;if(e!=null&&e.asCID===e){let{version:t,code:n,multihash:o,bytes:r}=e;return new Ce(t,n,o,r||Mn(t,n,o.bytes))}else if(e!=null&&e[jn]===!0){let{version:t,multihash:n,code:o}=e,r=za(n);return Ce.create(t,o,r)}else return null}static create(e,t,n){if(typeof t!="number")throw new Error("String codecs are no longer supported");switch(e){case 0:{if(t!==Ht)throw new Error(`Version 0 CID must use dag-pb (code: ${Ht}) block encoding`);return new Ce(e,t,n,n.bytes)}case 1:{let o=Mn(e,t,n.bytes);return new Ce(e,t,n,o)}default:throw new Error("Invalid version")}}static createV0(e){return Ce.create(0,Ht,e)}static createV1(e,t){return Ce.create(1,e,t)}static decode(e){let[t,n]=Ce.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return t}static decodeFirst(e){let t=Ce.inspectBytes(e),n=t.size-t.multihashSize,o=tn(e.subarray(n,n+t.multihashSize));if(o.byteLength!==t.multihashSize)throw new Error("Incorrect length");let r=o.subarray(t.multihashSize-t.digestSize),d=new nn(t.multihashCode,t.digestSize,r,o);return[t.version===0?Ce.createV0(d):Ce.createV1(t.codec,d),e.subarray(t.size)]}static inspectBytes(e){let t=0,n=()=>{let[w,x]=Vi(e.subarray(t));return t+=x,w},o=n(),r=Ht;if(o===18?(o=0,t=0):o===1&&(r=n()),o!==0&&o!==1)throw new RangeError(`Invalid CID version ${o}`);let d=t,v=n(),c=n(),b=t+c,C=b-d;return{version:o,codec:r,multihashCode:v,digestSize:c,multihashSize:C,size:b}}static parse(e,t){let[n,o]=eo(e,t),r=Ce.decode(o);return r._baseCache.set(n,e),r}},eo=(e,t)=>{switch(e[0]){case"Q":{let n=t||mt;return[mt.prefix,n.decode(`${mt.prefix}${e}`)]}case mt.prefix:{let n=t||mt;return[mt.prefix,n.decode(e)]}case li.prefix:{let n=t||li;return[li.prefix,n.decode(e)]}default:{if(t==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}}},to=(e,t,n)=>{let{prefix:o}=n;if(o!==mt.prefix)throw Error(`Cannot string encode V0 in ${n.name} encoding`);let r=t.get(o);if(r==null){let d=n.encode(e).slice(1);return t.set(o,d),d}else return r},io=(e,t,n)=>{let{prefix:o}=n,r=t.get(o);if(r==null){let d=n.encode(e);return t.set(o,d),d}else return r},Ht=112,no=18,Mn=(e,t,n)=>{let o=hi(e),r=o+hi(t),d=new Uint8Array(r+n.byteLength);return pi(e,d,0),pi(t,d,o),d.set(n,r),d},jn=Symbol.for("@ipld/js-cid/CID"),ai={writable:!1,configurable:!1,enumerable:!0},oi={writable:!1,enumerable:!1,configurable:!1},ro="0.0.0-dev",so=(e,t)=>{if(e.test(ro))console.warn(t);else throw new Error(t)},ao=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`,oo=42;function lo(e){if(e[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return Ce.decode(e.subarray(1))}var Qn={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};Qn.tags[oo]=lo;var co=e=>ba(e,Qn),uo=zn(qr(),1),fo="Earth";function po(e){return{country_name:e[0],country_code:e[1],region_code:e[2],city:e[3],postal_code:e[4],latitude:e[5],longitude:e[6],planet:fo}}var ho=Ce.parse("bafyreihnpl7ami7esahkfdnemm6idx4r2n6u3apmtcrxlqwuapgjsciihy"),go=["https://ipfs.io","https://dweb.link"];async function mo(e,t){if(typeof e=="function")return e(t);if(typeof e?.block?.get=="function")return e.block.get(t);let n=Array.isArray(e)?e:[e];for(let o of n){let r=new URL(o);r.pathname=`/ipfs/${t.toString()}`,r.search="?format=raw";try{let d=await(0,uo.default)(r,{headers:{Accept:"application/vnd.ipld.raw"},cache:"force-cache"});if(!d.ok)throw d;return new Uint8Array(await d.arrayBuffer())}catch(d){throw new Error(`unable to fetch raw block for CID ${t}`,{cause:d})}}}async function er(e,t,n=1){try{let o=await mo(e,t);return{obj:await co(o),block:o}}catch(o){if(n<3)return await er(e,t,n+1);throw o}}async function yo(e,t,n){let o,r;try{({obj:o,block:r}=await er(e,t))}catch(v){throw(process?.env?.DEBUG||process?.env?.TEST)&&console.error(r?`[ipfs-geoip] failed to parse DAG-CBOR behind CID '${t}'`:`[ipfs-geoip] failed to get raw block for CID '${t}'`,v),v}let d=0;if("data"in o){if("data"in o){for(;o.data[d]&&o.data[d].min<=n;)d++;let v=o.data[d-1];if(!v)throw new Error("Failed to lookup leaf node");if(!v.data)throw new Error("Unmapped range");return po(v.data)}}else{for(;o.mins[d]&&o.mins[d]<=n;)d++;let v=o.links[d-1];if(!v)throw new Error("Failed to lookup node");let c=wo(v);if(!c)throw new Error("Failed to lookup node");return tr(e,c,n)}}var tr=rs(yo,{cachePromiseRejection:!1,cacheKey:e=>{let[,t,n]=e;return`${t}.${n}`}});function ir(e=go,t){return tr(e,ho,ss.default.toLong(t))}function wo(e){return e?Ce.asCID(e):null}var Tt=new Ie("Flag"),yi=class e extends qe{constructor(n,o){super(n,"div","Flag");this.parent=n;this.hostname=o}static googleLimiter=new Bt({bucketSize:1,tokensPerInterval:1,interval:1e3*2,stopped:!0});static cloudFlareLimiter=new Bt({bucketSize:1,tokensPerInterval:1,interval:1e3*2,stopped:!0});async check(){let n=!0;try{let o=localStorage.getItem(this.hostname);if(o!=null){let r=JSON.parse(o),d=Date.now(),v=r.time,c=d-v,b=7*24*60*60*1e3;c<b&&(n=!1,this.onResponse(r))}}catch(o){throw Tt.error(`error while getting savedSTR for ${this.hostname}`,o),this.onError(),o}if(n){this.startLimiters();let o=await this.waitForAvailableEndpoint();await this.dnsRequest(o)}}startLimiters(){e.googleLimiter.isStopped===!0&&e.googleLimiter.start(),e.cloudFlareLimiter.isStopped===!0&&e.cloudFlareLimiter.start()}async waitForAvailableEndpoint(){let n=await Promise.race([e.googleLimiter.awaitTokens(1).then(()=>e.googleLimiter.tryRemoveTokens(1)).then(o=>{if(o)return`https://dns.google/resolve?name=${this.hostname}&type=A`}),e.cloudFlareLimiter.awaitTokens(1).then(()=>e.cloudFlareLimiter.tryRemoveTokens(1)).then(o=>{if(o)return`https://cloudflare-dns.com/dns-query?name=${this.hostname}&type=A`})]);return n??(Tt.info("we awaited tokens, but could not retrieve any.. restarting dnsRequest"),this.waitForAvailableEndpoint())}async dnsRequest(n){try{let r=await(await fetch(n,{method:"GET",headers:{Accept:"application/dns-json"}})).json();await this.handleDnsQueryResponse(r)}catch(o){Tt.error("problem submitting DNS request",n,o),this.onError()}}async handleDnsQueryResponse(n){if(n.Answer==null){Tt.error('Response does not contain the "Answer" property:',n),this.onError();return}let o=null;for(let r=0;r<n.Answer.length&&o==null;r++){let d=n.Answer[r];d.type===1&&(o=d.data)}if(o!=null)try{let r=await ir(Cn,o);if(r?.country_code!=null){this.onResponse(r),r.time=Date.now();let d=JSON.stringify(r);localStorage.setItem(this.hostname,d)}else Tt.error("geoipResponse.country_code is null")}catch(r){Tt.error(`error while getting DNS A record for ${this.hostname}`,r),this.onError()}else Tt.error("IP is still null",n)}onError(){this.tag.empty()}onResponse(n){this.tag.style.setProperty("background-image",`url('https://ipfs.io/ipfs/QmaYjj5BHGAWfopTdE8ESzypbuthsZqTeqz9rEuh3EJZi6/${n.country_code.toLowerCase()}.svg')`),this.tag.title=n.country_name,this.tag.empty()}};var nr=ii(ri());var{fetch:_o}=(0,nr.default)(),rn=new Ie("Ipns"),wi=class extends ht{constructor(n){super(n,"div","Ipns");this.parent=n}_className="Ipns";_tagName="div";async check(){let n=Date.now(),o=new URL(this.parent.gateway);o.pathname=xn;let r=`${o.href}?now=${n}#x-ipfs-companion-no-redirect`;try{if((await _o(r)).status===200)this.tag.win();else throw rn.debug(`${this.parent.gateway} does not support IPNS`),new Error(`URL '${r} is not reachable`)}catch(d){throw rn.error(d),this.onerror(),d}}checked(){rn.warn("Not implemented yet")}onerror(){this.tag.err()}};async function _i(e){await new Promise((n,o)=>{let r=new Image,d=setTimeout(()=>{o(new Error(`Timeout when attempting to load img from '${r.src}`))},15e3),v=(c,b,C,w,x)=>{clearTimeout(d),x==null?o(new Error(`Unknown Error when attempting to load img from '${r.src}`)):o(x)};r.onerror=v,r.onload=()=>{clearTimeout(d),n()},r.src=e.toString()})}var vi=new Ie("expectSubdomainRedirect");async function rr(e){let{redirected:t,url:n}=await fetch(e.toString());vi.debug("redirected: ",t),vi.debug("responseUrl: ",n),t&&vi.debug("definitely redirected");let{hostname:o}=new Qe(n);if(!o.startsWith(dt)){let r=`Expected ${e.toString()} to redirect to subdomain '${dt}' but instead received '${n}'`;throw vi.debug(r),new Error(r)}}var vo=new Ie("Origin"),bi=class{constructor(t){this.parent=t;this.tag=new pt("div","Origin")}tag;async check(){let t=new Qe(this.parent.gateway),n=new Qe(`${t.protocol}//${dt}.ipfs.${t.hostname}/?now=${Date.now()}&filename=1x1.png#x-ipfs-companion-no-redirect`),o=new Qe(`${t.protocol}//${t.hostname}/ipfs/${dt}?now=${Date.now()}&filename=1x1.png#x-ipfs-companion-no-redirect`);await _i(n).then(async()=>rr(o)).then(()=>{this.tag.win(n.toString()),this.parent.tag.classList.add("origin")}).catch(r=>{this.onerror(r)})}onerror(t){throw vo.error(t),this.tag.err(),t}};var bo=new Ie("Status"),ki=class extends qe{constructor(n){super(n,"div","Status");this.parent=n}_up=!1;_down=!1;async check(){let n=new Qe(this.parent.gateway),o=new Qe(`${n.protocol}//${n.hostname}/ipfs/${dt}?now=${Date.now()}&filename=1x1.png#x-ipfs-companion-no-redirect`);await _i(o).catch(r=>{throw r!=null&&bo.error(this.parent.gateway,r),r})}get down(){return this._down}set down(n){!this.up&&!this.down&&(this._down=!0,this.tag.lose())}get up(){return this._up}set up(n){!this.up&&!this.down&&(this._up=!0,this.tag.global(),this.parent.tag.classList.add("online"))}onerror(){throw new Error("Not implemented")}};var sr=ii(ri());var{fetch:ko}=(0,sr.default)(),sn=new Ie("Trustless"),Si=class extends ht{constructor(n){super(n,"div","Trustless");this.parent=n}_className="Trustless";_tagName="div";async check(){let n=Date.now(),o=`${this.parent.gateway}/ipfs/${lt}`;this.parent.tag.classList.add("trustless");try{let r=await Promise.all(Mi.map(async v=>{let c=`${o}?format=${v}&now=${n}#x-ipfs-companion-no-redirect`;return!!(await ko(c)).headers.get("Content-Type")?.includes(`application/vnd.ipld.${v}`)})),d=Mi.filter((v,c)=>!r[c]);if(d.length===0)this.tag.win();else{let v=`URL '${o} does not support the following Trustless response types: [${d.join(", ")}]`;throw sn.debug(v),new Error(v)}}catch(r){throw sn.error(r),this.onerror(),r}}checked(){sn.warn("Not implemented yet")}onerror(){this.tag.err()}};function an(e){let t=e.toString();return e?.hostname!=null&&(t=e.hostname.toString()),t.replace(`${lt}.ipfs.`,"").replace(`${lt}.`,"")}var $e=new Ie("GatewayNode"),Ei=class extends qe{constructor(n,o,r){super(n,"div","Node");this.parent=n;this.tag.empty(),this.tag.style.order=Date.now().toString(),this.status=new ki(this),this.tag.append(this.status.tag),this.cors=new si(this),this.tag.append(this.cors.tag),this.ipns=new wi(this),this.tag.append(this.ipns.tag),this.origin=new bi(this),this.tag.append(this.origin.tag),this.trustless=new Si(this),this.tag.append(this.trustless.tag),this.link=document.createElement("div");let d=`${o}/ipfs/${lt}`;this.link.url=new Qe(d),this.link.textContent=an(this.link.url),this.link.className="Link",this.flag=new yi(this,this.link.textContent),this.tag.append(this.flag.tag),this.tag.append(this.link),this.took=document.createElement("div"),this.took.className="Took",this.tag.append(this.took),this.gateway=o,this.index=r,this.checkingTime=0}status;cors;ipns;origin;trustless;link;flag;took;gateway;index;checkingTime;atLeastOneSuccess=!1;async check(){this.checkingTime=Date.now(),this.flag.check().then(()=>{$e.debug(this.gateway,"Flag success")});let n=[this.status.check().then(()=>{$e.debug(this.gateway,"Status success")}).then(this.onSuccessfulCheck.bind(this)),this.cors.check().then(()=>{$e.debug(this.gateway,"CORS success")}).then(this.onSuccessfulCheck.bind(this)),this.ipns.check().then(()=>{$e.debug(this.gateway,"IPNS success")}).then(this.onSuccessfulCheck.bind(this)),this.origin.check().then(()=>{$e.debug(this.gateway,"Origin success")}).then(this.onSuccessfulCheck.bind(this)),this.trustless.check().then(()=>{$e.debug(this.gateway,"Trustless success")}).then(this.onSuccessfulCheck.bind(this))];await Promise.allSettled(n).then(o=>o.map(r=>r.status)).then(o=>{o.includes("fulfilled")?($e.debug(`For gateway '${this.gateway}', at least one promise was successfully fulfilled`),$e.debug(this.gateway,"this.status.up: ",this.status.up),$e.debug(this.gateway,"this.status.down: ",this.status.down),this.status.up=!0,$e.debug(this.gateway,"this.status.up: ",this.status.up),$e.debug(this.gateway,"this.status.down: ",this.status.down)):(this.status.down=!0,$e.debug(`For gateway '${this.gateway}', all promises were rejected`))})}onSuccessfulCheck(){if(!this.atLeastOneSuccess){$e.info(`For gateway '${this.gateway}', at least one check was successful`),this.atLeastOneSuccess=!0,this.status.up=!0;let n=this.link.url;if(n!=null){let d=an(n);this.link.innerHTML=`<a title="${d}" href="${n.toString()}#x-ipfs-companion-no-redirect" target="_blank">${d}</a>`}let o=Date.now()-this.checkingTime;this.tag.style.order=o.toString();let r=(o/1e3).toFixed(2);this.took.textContent=`${r}s`}}onerror(){this.tag.err()}};var Ri=class{constructor(t){this.parent=t;let n=document.getElementById("checker.results");if(n==null)throw new Error('Element with Id "checker.results" not found.');this.element=n}append(t){this.element.append(t.element)}element};var Oi=class extends qe{constructor(n){super(n);this.parent=n;let o=document.getElementById("checker.stats");if(o==null)throw new Error('Could not find element with Id "checker.stats"');this.tag=pt.fromElement(o),this.gateways=document.createElement("div"),this.gateways.textContent="0/0 tested",this.gateways.className="Gateways",this.tag.append(this.gateways),this.totals=document.createElement("div"),this.totals.textContent="0 online",this.totals.className="Totals",this.tag.append(this.totals)}gateways;totals;update(){let n=0,o=0;for(let r of this.parent.nodes)r.status.up?n+=1:r.status.down&&(o+=1);this.gateways.textContent=`${n+o}/${this.parent.nodes.length} tested`,this.totals.textContent=`${n} online`}};var So=new Ie("Checker"),Ii=class{element;nodes=[];stats;results;constructor(){let t=document.getElementById("checker");if(t==null)throw new Error('Element with Id "checker" not found.');this.element=t,this.stats=new Oi(this),this.results=new Ri(this),this.updateStats=this.updateStats.bind(this)}updateStats(){this.stats.update()}async checkGateways(t){let n=[];for(let o of t){let r=new Ei(this.results,o,this.nodes.length);this.nodes.push(r),this.results.append(r.tag),setTimeout(()=>{n.push(r.check().catch(d=>{So.error(d)}).finally(this.updateStats))},100*this.nodes.length)}}};var Ve=ii(or()),lr=localStorage.getItem("metrics_consent"),ln=document.querySelector(".js-metrics-notification-modal"),cn=document.querySelector(".js-metrics-agreement"),pr=document.querySelector(".js-metrics-preferences"),Eo=document.querySelector(".js-modal-close"),cr=document.querySelector(".js-metrics-notification-confirm"),ur=document.querySelector(".js-metrics-notification-preferences-save"),fr=document.querySelector(".js-metrics-notification-manage"),on=document.querySelector(".js-necessary-toggle"),Ro=document.querySelector(".js-metrics-modal-toggle");function Ti(e){Ve.default.add_consent(e),Array.isArray(e)?localStorage.setItem("metrics_consent",JSON.stringify(e)):localStorage.setItem("metrics_consent",JSON.stringify([e]))}function Oo(){ln?.classList.add("hidden"),Ti(["minimal"])}function Io(){on.checked?Ti(["minimal"]):(Ve.default.remove_consent(["minimal"]),localStorage.setItem("metrics_consent",JSON.stringify([])))}function No(){ln?.classList.remove("hidden"),cr?.classList.remove("hidden"),fr?.classList.remove("hidden"),cn?.classList.remove("hidden"),Eo?.addEventListener("click",hr),cr?.addEventListener("click",Oo),fr?.addEventListener("click",To)}function hr(){ln?.classList.add("hidden"),pr?.classList.add("hidden"),cn?.classList.remove("hidden")}function To(){let e=localStorage.getItem("metrics_consent");e!=null&&(on.checked=JSON.parse(e)[0]==="minimal"),cn?.classList.add("hidden"),ur?.classList.remove("hidden"),pr?.classList.remove("hidden"),on.addEventListener("click",Io),ur?.addEventListener("click",hr)}function Ao(){No()}function dr(){Ro?.addEventListener("click",Ao),Ve.default.init({app_key:"3c2c0819434074fc4d339ddd8e112a1e741ecb72",url:"https://countly.ipfs.io",require_consent:!0});let e=["sessions","views","events"],t=["crashes","apm"],n=["scrolls","clicks","forms"],o=["star-rating","feedback"],r=["location"];Ve.default.group_features({all:[...e,...t,...n,...o,...r],minimal:e,performance:t,ux:n,feedback:o,location:r}),Ve.default.track_clicks(),Ve.default.track_errors(),Ve.default.track_forms(),Ve.default.track_links(),Ve.default.track_pageview(),Ve.default.track_scrolls(),Ve.default.track_sessions(),Ve.default.track_view(),lr!=null?Ti(JSON.parse(lr)):Ti(["minimal"])}var gr={"https://4everland.io":{metadata:{time:"2023-09-29T17:55:19.752949005Z",version:"dev",job_url:"https://github.com/laurentsenta/public-gateway-checker/actions/runs/6355261287",gateway_url:"https://4everland.io"},results:{DNSLink:{pass:0,fail:1,skip:0},CORS:{pass:0,fail:1,skip:0},"JSON-CBOR":{pass:0,fail:3,skip:0}}},"https://alexdav.id":{metadata:{time:"2023-09-29T17:55:09.114150396Z",version:"dev",job_url:"https://github.com/laurentsenta/public-gateway-checker/actions/runs/6355261287",gateway_url:"https://alexdav.id"},results:{DNSLink:{pass:0,fail:2,skip:0},CORS:{pass:0,fail:1,skip:0},"JSON-CBOR":{pass:0,fail:5,skip:0},IPNS:{pass:0,fail:4,skip:0},Others:{pass:0,fail:4,skip:0},"Block-CAR":{pass:0,fail:9,skip:0},Tar:{pass:0,fail:1,skip:0},UnixFS:{pass:0,fail:3,skip:0},Subdomains:{pass:0,fail:3,skip:0}}},"https://aragon.ventures":{metadata:{time:"2023-09-29T17:55:14.783844289Z",version:"dev",job_url:"https://github.com/laurentsenta/public-gateway-checker/actions/runs/6355261287",gateway_url:"https://aragon.ventures"},results:{DNSLink:{pass:0,fail:1,skip:0},CORS:{pass:0,fail:1,skip:0},"JSON-CBOR":{pass:0,fail:3,skip:0}}},"https://astyanax.io":{metadata:{time:"2023-09-29T17:55:06.898159424Z",version:"dev",job_url:"https://github.com/laurentsenta/public-gateway-checker/actions/runs/6355261287",gateway_url:"https://astyanax.io"},results:{DNSLink:{pass:0,fail:1,skip:0},CORS:{pass:0,fail:1,skip:0},"JSON-CBOR":{pass:0,fail:3,skip:0}}},"https://cdn.cwinfo.net":{metadata:{time:"2023-09-29T17:55:35.637292042Z",version:"dev",job_url:"https://github.com/laurentsenta/public-gateway-checker/actions/runs/6355261287",gateway_url:"https://cdn.cwinfo.net"},results:{DNSLink:{pass:0,fail:1,skip:0},CORS:{pass:0,fail:1,skip:0},"JSON-CBOR":{pass:0,fail:3,skip:0}}},"https://cf-ipfs.com":{metadata:{time:"2023-09-29T17:55:11.318041177Z",version:"dev",job_url:"https://github.com/laurentsenta/public-gateway-checker/actions/runs/6355261287",gateway_url:"https://cf-ipfs.com"},results:{DNSLink:{pass:0,fail:1,skip:0},CORS:{pass:0,fail:1,skip:0},"JSON-CBOR":{pass:0,fail:4,skip:0}}},"https://cloudflare-ipfs.com":{metadata:{time:"2023-09-29T17:55:08.23685106Z",version:"dev",job_url:"https://github.com/laurentsenta/public-gateway-checker/actions/runs/6355261287",gateway_url:"https://cloudflare-ipfs.com"},results:{DNSLink:{pass:0,fail:1,skip:0},CORS:{pass:0,fail:1,skip:0},"JSON-CBOR":{pass:1,fail:3,skip:0}}},"https://cthd.icu":{metadata:{time:"2023-09-29T17:55:16.690394754Z",version:"dev",job_url:"https://github.com/laurentsenta/public-gateway-checker/actions/runs/6355261287",gateway_url:"https://cthd.icu"},results:{DNSLink:{pass:0,fail:1,skip:0},CORS:{pass:0,fail:1,skip:0},"JSON-CBOR":{pass:0,fail:3,skip:0}}},"https://dweb.eu.org":{metadata:{time:"2023-09-29T17:55:27.905098698Z",version:"dev",job_url:"https://github.com/laurentsenta/public-gateway-checker/actions/runs/6355261287",gateway_url:"https://dweb.eu.org"},results:{DNSLink:{pass:0,fail:1,skip:0},CORS:{pass:0,fail:1,skip:0},"JSON-CBOR":{pass:0,fail:3,skip:0}}},"https://dweb.link":{metadata:{time:"2023-09-29T17:55:10.826465067Z",version:"dev",job_url:"https://github.com/laurentsenta/public-gateway-checker/actions/runs/6355261287",gateway_url:"https://dweb.link"},results:{DNSLink:{pass:0,fail:1,skip:0},CORS:{pass:0,fail:1,skip:0},"JSON-CBOR":{pass:0,fail:3,skip:0}}},"http://fzdqwfb5ml56oadins5jpuhe6ki6bk33umri35p5kt2tue4fpws5efid.onion":{metadata:{time:"2023-09-29T17:55:07.991977199Z",version:"dev",job_url:"https://github.com/laurentsenta/public-gateway-checker/actions/runs/6355261287",gateway_url:"http://fzdqwfb5ml56oadins5jpuhe6ki6bk33umri35p5kt2tue4fpws5efid.onion"},results:{DNSLink:{pass:0,fail:2,skip:0},CORS:{pass:0,fail:1,skip:0},"JSON-CBOR":{pass:0,fail:5,skip:0},IPNS:{pass:0,fail:4,skip:0},Others:{pass:0,fail:4,skip:0},"Block-CAR":{pass:0,fail:9,skip:0},Tar:{pass:0,fail:1,skip:0},UnixFS:{pass:0,fail:3,skip:0},Subdomains:{pass:0,fail:3,skip:0}}},"https://gateway.ipfs.io":{metadata:{time:"2023-09-29T17:57:05.911365758Z",version:"dev",job_url:"https://github.com/laurentsenta/public-gateway-checker/actions/runs/6355261287",gateway_url:"https://gateway.ipfs.io"},results:{DNSLink:{pass:0,fail:1,skip:0},CORS:{pass:0,fail:1,skip:0},"JSON-CBOR":{pass:3,fail:2,skip:0},IPNS:{pass:1,fail:0,skip:0},Others:{pass:0,fail:1,skip:0}}},"https://gateway.originprotocol.com":{metadata:{time:"2023-09-29T17:55:13.428070477Z",version:"dev",job_url:"https://github.com/laurentsenta/public-gateway-checker/actions/runs/6355261287",gateway_url:"https://gateway.originprotocol.com"},results:{DNSLink:{pass:0,fail:2,skip:0},CORS:{pass:0,fail:1,skip:0},"JSON-CBOR":{pass:0,fail:5,skip:0},IPNS:{pass:0,fail:4,skip:0},Others:{pass:0,fail:4,skip:0},"Block-CAR":{pass:0,fail:9,skip:0},Tar:{pass:0,fail:1,skip:0},UnixFS:{pass:0,fail:3,skip:0},Subdomains:{pass:0,fail:3,skip:0}}},"https://gateway.pinata.cloud":{metadata:{time:"2023-09-29T17:55:15.894120094Z",version:"dev",job_url:"https://github.com/laurentsenta/public-gateway-checker/actions/runs/6355261287",gateway_url:"https://gateway.pinata.cloud"},results:{DNSLink:{pass:0,fail:1,skip:0},CORS:{pass:0,fail:1,skip:0},"JSON-CBOR":{pass:2,fail:2,skip:0}}},"https://gravity.jup.io":{metadata:{time:"2023-09-29T17:55:50.008993898Z",version:"dev",job_url:"https://github.com/laurentsenta/public-gateway-checker/actions/runs/6355261287",gateway_url:"https://gravity.jup.io"},results:{DNSLink:{pass:0,fail:2,skip:0},CORS:{pass:0,fail:1,skip:0},"JSON-CBOR":{pass:0,fail:5,skip:0},IPNS:{pass:0,fail:4,skip:0},Others:{pass:0,fail:4,skip:0},"Block-CAR":{pass:0,fail:9,skip:0},Tar:{pass:0,fail:1,skip:0},UnixFS:{pass:0,fail:3,skip:0},Subdomains:{pass:0,fail:3,skip:0}}},"https://gw3.io":{metadata:{time:"2023-09-29T17:55:47.140769482Z",version:"dev",job_url:"https://github.com/laurentsenta/public-gateway-checker/actions/runs/6355261287",gateway_url:"https://gw3.io"},results:{DNSLink:{pass:0,fail:2,skip:0},CORS:{pass:0,fail:1,skip:0},"JSON-CBOR":{pass:0,fail:5,skip:0},IPNS:{pass:0,fail:4,skip:0},Others:{pass:0,fail:4,skip:0},"Block-CAR":{pass:0,fail:9,skip:0},Tar:{pass:0,fail:1,skip:0},UnixFS:{pass:0,fail:3,skip:0},Subdomains:{pass:0,fail:3,skip:0}}},"https://hardbin.com":{metadata:{time:"2023-09-29T18:03:08.159509647Z",version:"dev",job_url:"https://github.com/laurentsenta/public-gateway-checker/actions/runs/6355261287",gateway_url:"https://hardbin.com"},results:{DNSLink:{pass:0,fail:2,skip:0},CORS:{pass:0,fail:1,skip:0},"JSON-CBOR":{pass:3,fail:2,skip:0},IPNS:{pass:2,fail:2,skip:0},Others:{pass:1,fail:3,skip:0},"Block-CAR":{pass:3,fail:6,skip:0},Tar:{pass:1,fail:0,skip:0},UnixFS:{pass:1,fail:2,skip:0},Subdomains:{pass:0,fail:3,skip:0}}},"https://hashnews.k1ic.com":{metadata:{time:"2023-09-29T17:58:19.536164823Z",version:"dev",job_url:"https://github.com/laurentsenta/public-gateway-checker/actions/runs/6355261287",gateway_url:"https://hashnews.k1ic.com"},results:{DNSLink:{pass:0,fail:2,skip:0},CORS:{pass:0,fail:1,skip:0},"JSON-CBOR":{pass:0,fail:5,skip:0},IPNS:{pass:0,fail:4,skip:0},Others:{pass:0,fail:4,skip:0},"Block-CAR":{pass:0,fail:9,skip:0},Tar:{pass:0,fail:1,skip:0},UnixFS:{pass:0,fail:3,skip:0},Subdomains:{pass:0,fail:3,skip:0}}},"https://hub.textile.io":{metadata:{time:"2023-09-29T17:56:35.827533398Z",version:"dev",job_url:"https://github.com/laurentsenta/public-gateway-checker/actions/runs/6355261287",gateway_url:"https://hub.textile.io"},results:{DNSLink:{pass:0,fail:1,skip:0},CORS:{pass:0,fail:1,skip:0},"JSON-CBOR":{pass:0,fail:3,skip:0}}},"https://ipfs.alloyxuast.tk":{metadata:{time:"2023-09-29T17:56:36.52321357Z",version:"dev",job_url:"https://github.com/laurentsenta/public-gateway-checker/actions/runs/6355261287",gateway_url:"https://ipfs.alloyxuast.tk"},results:{DNSLink:{pass:0,fail:2,skip:0},CORS:{pass:0,fail:1,skip:0},"JSON-CBOR":{pass:0,fail:5,skip:0},IPNS:{pass:0,fail:4,skip:0},Others:{pass:0,fail:4,skip:0},"Block-CAR":{pass:0,fail:9,skip:0},Tar:{pass:0,fail:1,skip:0},UnixFS:{pass:0,fail:3,skip:0},Subdomains:{pass:0,fail:3,skip:0}}},"https://ipfs.best-practice.se":{metadata:{time:"2023-09-29T17:56:29.038260674Z",version:"dev",job_url:"https://github.com/laurentsenta/public-gateway-checker/actions/runs/6355261287",gateway_url:"https://ipfs.best-practice.se"},results:{DNSLink:{pass:0,fail:1,skip:0},CORS:{pass:0,fail:1,skip:0},"JSON-CBOR":{pass:0,fail:3,skip:0}}},"https://ipfs.busy.org":{metadata:{time:"2023-09-29T17:56:29.803398567Z",version:"dev",job_url:"https://github.com/laurentsenta/public-gateway-checker/actions/runs/6355261287",gateway_url:"https://ipfs.busy.org"},results:{DNSLink:{pass:0,fail:2,skip:0},CORS:{pass:0,fail:1,skip:0},"JSON-CBOR":{pass:0,fail:5,skip:0},IPNS:{pass:0,fail:4,skip:0},Others:{pass:0,fail:4,skip:0},"Block-CAR":{pass:0,fail:9,skip:0},Tar:{pass:0,fail:1,skip:0},UnixFS:{pass:0,fail:3,skip:0},Subdomains:{pass:0,fail:3,skip:0}}},"https://ipfs.chisdealhd.co.uk":{metadata:{time:"2023-09-29T17:56:41.860554856Z",version:"dev",job_url:"https://github.com/laurentsenta/public-gateway-checker/actions/runs/6355261287",gateway_url:"https://ipfs.chisdealhd.co.uk"},results:{DNSLink:{pass:0,fail:1,skip:0},CORS:{pass:0,fail:1,skip:0},"JSON-CBOR":{pass:0,fail:3,skip:0}}},"https://ipfs.decoo.io":{metadata:{time:"2023-09-29T18:04:44.701013049Z",version:"dev",job_url:"https://github.com/laurentsenta/public-gateway-checker/actions/runs/6355261287",gateway_url:"https://ipfs.decoo.io"},results:{DNSLink:{pass:0,fail:2,skip:0},CORS:{pass:0,fail:1,skip:0},"JSON-CBOR":{pass:0,fail:5,skip:0},IPNS:{pass:0,fail:3,skip:0},Others:{pass:0,fail:4,skip:0},"Block-CAR":{pass:0,fail:1,skip:0},Tar:{pass:0,fail:1,skip:0},UnixFS:{pass:0,fail:3,skip:0},Subdomains:{pass:0,fail:2,skip:0}}},"https://ipfs.drink.cafe":{metadata:{time:"2023-09-29T17:57:28.050283996Z",version:"dev",job_url:"https://github.com/laurentsenta/public-gateway-checker/actions/runs/6355261287",gateway_url:"https://ipfs.drink.cafe"},results:{DNSLink:{pass:0,fail:2,skip:0},CORS:{pass:0,fail:1,skip:0},"JSON-CBOR":{pass:0,fail:5,skip:0},IPNS:{pass:0,fail:4,skip:0},Others:{pass:0,fail:4,skip:0},"Block-CAR":{pass:0,fail:9,skip:0},Tar:{pass:0,fail:1,skip:0},UnixFS:{pass:0,fail:3,skip:0},Subdomains:{pass:0,fail:3,skip:0}}},"https://ipfs.eth.aragon.network":{metadata:{time:"2023-09-29T18:00:08.794858719Z",version:"dev",job_url:"https://github.com/laurentsenta/public-gateway-checker/actions/runs/6355261287",gateway_url:"https://ipfs.eth.aragon.network"},results:{DNSLink:{pass:0,fail:2,skip:0},CORS:{pass:0,fail:1,skip:0},"JSON-CBOR":{pass:5,fail:0,skip:0},IPNS:{pass:0,fail:3,skip:0},Others:{pass:2,fail:2,skip:0},"Block-CAR":{pass:1,fail:5,skip:0},Tar:{pass:1,fail:0,skip:0},UnixFS:{pass:2,fail:1,skip:0},Subdomains:{pass:0,fail:3,skip:0}}},"https://ipfs.fleek.co":{metadata:{time:"2023-09-29T17:57:06.665977655Z",version:"dev",job_url:"https://github.com/laurentsenta/public-gateway-checker/actions/runs/6355261287",gateway_url:"https://ipfs.fleek.co"},results:{DNSLink:{pass:0,fail:1,skip:0},CORS:{pass:0,fail:1,skip:0},"JSON-CBOR":{pass:0,fail:3,skip:0}}},"https://ipfs.fooock.com":{metadata:{time:"2023-09-29T17:57:12.700148952Z",version:"dev",job_url:"https://github.com/laurentsenta/public-gateway-checker/actions/runs/6355261287",gateway_url:"https://ipfs.fooock.com"},results:{DNSLink:{pass:0,fail:1,skip:0},CORS:{pass:0,fail:1,skip:0},"JSON-CBOR":{pass:0,fail:3,skip:0}}},"https://ipfs.funnychain.co":{metadata:{time:"2023-09-29T17:57:53.767017353Z",version:"dev",job_url:"https://github.com/laurentsenta/public-gateway-checker/actions/runs/6355261287",gateway_url:"https://ipfs.funnychain.co"},results:{DNSLink:{pass:0,fail:1,skip:0},CORS:{pass:0,fail:1,skip:0},"JSON-CBOR":{pass:0,fail:3,skip:0}}},"https://ipfs-gateway.cloud":{metadata:{time:"2023-09-29T18:02:03.930410838Z",version:"dev",job_url:"https://github.com/laurentsenta/public-gateway-checker/actions/runs/6355261287",gateway_url:"https://ipfs-gateway.cloud"},results:{DNSLink:{pass:0,fail:1,skip:0},CORS:{pass:0,fail:1,skip:0},"JSON-CBOR":{pass:0,fail:3,skip:0}}},"http://ipfs.genenetwork.org":{metadata:{time:"2023-09-29T17:55:11.22141793Z",version:"dev",job_url:"https://github.com/laurentsenta/public-gateway-checker/actions/runs/6355261287",gateway_url:"http://ipfs.genenetwork.org"},results:{DNSLink:{pass:0,fail:1,skip:0},CORS:{pass:0,fail:1,skip:0},"JSON-CBOR":{pass:0,fail:3,skip:0}}},"https://ipfs.greyh.at":{metadata:{time:"2023-09-29T17:57:59.709310238Z",version:"dev",job_url:"https://github.com/laurentsenta/public-gateway-checker/actions/runs/6355261287",gateway_url:"https://ipfs.greyh.at"},results:{DNSLink:{pass:0,fail:1,skip:0},CORS:{pass:0,fail:1,skip:0},"JSON-CBOR":{pass:0,fail:3,skip:0}}},"https://ipfs.ink":{metadata:{time:"2023-09-29T17:58:05.891824689Z",version:"dev",job_url:"https://github.com/laurentsenta/public-gateway-checker/actions/runs/6355261287",gateway_url:"https://ipfs.ink"},results:{DNSLink:{pass:0,fail:1,skip:0},CORS:{pass:0,fail:1,skip:0},"JSON-CBOR":{pass:0,fail:3,skip:0}}},"https://ipfs.io":{metadata:{time:"2023-09-29T17:59:57.033494762Z",version:"dev",job_url:"https://github.com/laurentsenta/public-gateway-checker/actions/runs/6355261287",gateway_url:"https://ipfs.io"},results:{DNSLink:{pass:0,fail:1,skip:0},CORS:{pass:0,fail:1,skip:0},"JSON-CBOR":{pass:3,fail:2,skip:0},IPNS:{pass:1,fail:0,skip:0},Others:{pass:0,fail:1,skip:0}}},"https://ipfs.kaleido.art":{metadata:{time:"2023-09-29T17:58:25.978997188Z",version:"dev",job_url:"https://github.com/laurentsenta/public-gateway-checker/actions/runs/6355261287",gateway_url:"https://ipfs.kaleido.art"},results:{DNSLink:{pass:0,fail:1,skip:0},CORS:{pass:0,fail:1,skip:0},"JSON-CBOR":{pass:0,fail:3,skip:0}}},"https://ipfs.kavin.rocks":{metadata:{time:"2023-09-29T17:58:29.211341458Z",version:"dev",job_url:"https://github.com/laurentsenta/public-gateway-checker/actions/runs/6355261287",gateway_url:"https://ipfs.kavin.rocks"},results:{DNSLink:{pass:0,fail:1,skip:0},CORS:{pass:0,fail:1,skip:0},"JSON-CBOR":{pass:0,fail:3,skip:0}}},"https://ipfs.kinematiks.com":{metadata:{time:"2023-09-29T17:58:50.180123245Z",version:"dev",job_url:"https://github.com/laurentsenta/public-gateway-checker/actions/runs/6355261287",gateway_url:"https://ipfs.kinematiks.com"},results:{DNSLink:{pass:0,fail:2,skip:0},CORS:{pass:0,fail:1,skip:0},"JSON-CBOR":{pass:0,fail:5,skip:0},IPNS:{pass:0,fail:4,skip:0},Others:{pass:0,fail:4,skip:0},"Block-CAR":{pass:0,fail:9,skip:0},Tar:{pass:0,fail:1,skip:0},UnixFS:{pass:0,fail:3,skip:0},Subdomains:{pass:0,fail:3,skip:0}}},"https://ipfs.lain.la":{metadata:{time:"2023-09-29T17:59:13.660052143Z",version:"dev",job_url:"https://github.com/laurentsenta/public-gateway-checker/actions/runs/6355261287",gateway_url:"https://ipfs.lain.la"},results:{DNSLink:{pass:0,fail:2,skip:0},CORS:{pass:0,fail:1,skip:0},"JSON-CBOR":{pass:0,fail:5,skip:0},IPNS:{pass:0,fail:4,skip:0},Others:{pass:0,fail:4,skip:0},"Block-CAR":{pass:0,fail:9,skip:0},Tar:{pass:0,fail:1,skip:0},UnixFS:{pass:0,fail:3,skip:0},Subdomains:{pass:0,fail:3,skip:0}}},"https://ipfs.mttk.net":{metadata:{time:"2023-09-29T17:59:12.171060468Z",version:"dev",job_url:"https://github.com/laurentsenta/public-gateway-checker/actions/runs/6355261287",gateway_url:"https://ipfs.mttk.net"},results:{DNSLink:{pass:0,fail:1,skip:0},CORS:{pass:0,fail:1,skip:0},"JSON-CBOR":{pass:0,fail:3,skip:0}}},"https://ipfs.namebase.io":{metadata:{time:"2023-09-29T18:04:32.17760521Z",version:"dev",job_url:"https://github.com/laurentsenta/public-gateway-checker/actions/runs/6355261287",gateway_url:"https://ipfs.namebase.io"},results:{DNSLink:{pass:0,fail:2,skip:0},CORS:{pass:0,fail:1,skip:0},"JSON-CBOR":{pass:0,fail:5,skip:0},IPNS:{pass:0,fail:4,skip:0},Others:{pass:0,fail:4,skip:0},"Block-CAR":{pass:0,fail:9,skip:0},Tar:{pass:0,fail:1,skip:0},UnixFS:{pass:0,fail:3,skip:0},Subdomains:{pass:0,fail:3,skip:0}}},"https://ipfs.overpi.com":{metadata:{time:"2023-09-29T17:59:31.380203453Z",version:"dev",job_url:"https://github.com/laurentsenta/public-gateway-checker/actions/runs/6355261287",gateway_url:"https://ipfs.overpi.com"},results:{DNSLink:{pass:0,fail:1,skip:0},CORS:{pass:0,fail:1,skip:0},"JSON-CBOR":{pass:0,fail:3,skip:0}}},"https://ipfs.runfission.com":{metadata:{time:"2023-09-29T18:07:47.150832051Z",version:"dev",job_url:"https://github.com/laurentsenta/public-gateway-checker/actions/runs/6355261287",gateway_url:"https://ipfs.runfission.com"},results:{DNSLink:{pass:0,fail:2,skip:0},CORS:{pass:0,fail:1,skip:0},"JSON-CBOR":{pass:4,fail:1,skip:0},IPNS:{pass:2,fail:2,skip:0},Others:{pass:2,fail:2,skip:0},"Block-CAR":{pass:3,fail:6,skip:0},Tar:{pass:1,fail:0,skip:0},UnixFS:{pass:2,fail:1,skip:0},Subdomains:{pass:0,fail:3,skip:0}}},"https://ipfs.scalaproject.io":{metadata:{time:"2023-09-29T17:59:57.71931129Z",version:"dev",job_url:"https://github.com/laurentsenta/public-gateway-checker/actions/runs/6355261287",gateway_url:"https://ipfs.scalaproject.io"},results:{DNSLink:{pass:0,fail:1,skip:0},CORS:{pass:0,fail:1,skip:0},"JSON-CBOR":{pass:0,fail:3,skip:0}}},"https://ipfs.slang.cx":{metadata:{time:"2023-09-29T18:00:04.433881445Z",version:"dev",job_url:"https://github.com/laurentsenta/public-gateway-checker/actions/runs/6355261287",gateway_url:"https://ipfs.slang.cx"},results:{DNSLink:{pass:0,fail:2,skip:0},CORS:{pass:0,fail:1,skip:0},"JSON-CBOR":{pass:0,fail:5,skip:0},IPNS:{pass:0,fail:4,skip:0},Others:{pass:0,fail:4,skip:0},"Block-CAR":{pass:0,fail:9,skip:0},Tar:{pass:0,fail:1,skip:0},UnixFS:{pass:0,fail:3,skip:0},Subdomains:{pass:0,fail:3,skip:0}}},"https://ipfs.smartholdem.io":{metadata:{time:"2023-09-29T18:00:22.643642844Z",version:"dev",job_url:"https://github.com/laurentsenta/public-gateway-checker/actions/runs/6355261287",gateway_url:"https://ipfs.smartholdem.io"},results:{DNSLink:{pass:0,fail:2,skip:0},CORS:{pass:0,fail:1,skip:0},"JSON-CBOR":{pass:0,fail:5,skip:0},IPNS:{pass:0,fail:4,skip:0},Others:{pass:0,fail:4,skip:0},"Block-CAR":{pass:0,fail:9,skip:0},Tar:{pass:0,fail:1,skip:0},UnixFS:{pass:0,fail:3,skip:0},Subdomains:{pass:0,fail:3,skip:0}}},"https://ipfs.soul-network.com":{metadata:{time:"2023-09-29T18:00:29.802208353Z",version:"dev",job_url:"https://github.com/laurentsenta/public-gateway-checker/actions/runs/6355261287",gateway_url:"https://ipfs.soul-network.com"},results:{DNSLink:{pass:0,fail:2,skip:0},CORS:{pass:0,fail:1,skip:0},"JSON-CBOR":{pass:0,fail:5,skip:0},IPNS:{pass:0,fail:4,skip:0},Others:{pass:0,fail:4,skip:0},"Block-CAR":{pass:0,fail:9,skip:0},Tar:{pass:0,fail:1,skip:0},UnixFS:{pass:0,fail:3,skip:0},Subdomains:{pass:0,fail:3,skip:0}}},"https://ipfs.tayfundogdas.me":{metadata:{time:"2023-09-29T18:00:38.580823934Z",version:"dev",job_url:"https://github.com/laurentsenta/public-gateway-checker/actions/runs/6355261287",gateway_url:"https://ipfs.tayfundogdas.me"},results:{DNSLink:{pass:0,fail:2,skip:0},CORS:{pass:0,fail:1,skip:0},"JSON-CBOR":{pass:0,fail:5,skip:0},IPNS:{pass:0,fail:4,skip:0},Others:{pass:0,fail:4,skip:0},"Block-CAR":{pass:0,fail:9,skip:0},Tar:{pass:0,fail:1,skip:0},UnixFS:{pass:0,fail:3,skip:0},Subdomains:{pass:0,fail:3,skip:0}}},"https://ipfs.telos.miami":{metadata:{time:"2023-09-29T18:00:46.813812181Z",version:"dev",job_url:"https://github.com/laurentsenta/public-gateway-checker/actions/runs/6355261287",gateway_url:"https://ipfs.telos.miami"},results:{DNSLink:{pass:0,fail:2,skip:0},CORS:{pass:0,fail:1,skip:0},"JSON-CBOR":{pass:0,fail:5,skip:0},IPNS:{pass:0,fail:4,skip:0},Others:{pass:0,fail:4,skip:0},"Block-CAR":{pass:0,fail:9,skip:0},Tar:{pass:0,fail:1,skip:0},UnixFS:{pass:0,fail:3,skip:0},Subdomains:{pass:0,fail:3,skip:0}}},"https://ipfs.tribecap.co":{metadata:{time:"2023-09-29T18:01:07.093338311Z",version:"dev",job_url:"https://github.com/laurentsenta/public-gateway-checker/actions/runs/6355261287",gateway_url:"https://ipfs.tribecap.co"},results:{DNSLink:{pass:0,fail:2,skip:0},CORS:{pass:0,fail:1,skip:0},"JSON-CBOR":{pass:0,fail:5,skip:0},IPNS:{pass:0,fail:4,skip:0},Others:{pass:0,fail:4,skip:0},"Block-CAR":{pass:0,fail:9,skip:0},Tar:{pass:0,fail:1,skip:0},UnixFS:{pass:0,fail:3,skip:0},Subdomains:{pass:0,fail:3,skip:0}}},"https://ipfs.trusti.id":{metadata:{time:"2023-09-29T18:01:15.029806848Z",version:"dev",job_url:"https://github.com/laurentsenta/public-gateway-checker/actions/runs/6355261287",gateway_url:"https://ipfs.trusti.id"},results:{DNSLink:{pass:0,fail:1,skip:0},CORS:{pass:0,fail:1,skip:0},"JSON-CBOR":{pass:0,fail:3,skip:0}}},"https://ipfs.uploads.nu":{metadata:{time:"2023-09-29T18:01:24.278478858Z",version:"dev",job_url:"https://github.com/laurentsenta/public-gateway-checker/actions/runs/6355261287",gateway_url:"https://ipfs.uploads.nu"},results:{DNSLink:{pass:0,fail:2,skip:0},CORS:{pass:0,fail:1,skip:0},"JSON-CBOR":{pass:0,fail:5,skip:0},IPNS:{pass:0,fail:4,skip:0},Others:{pass:0,fail:4,skip:0},"Block-CAR":{pass:0,fail:9,skip:0},Tar:{pass:0,fail:1,skip:0},UnixFS:{pass:0,fail:3,skip:0},Subdomains:{pass:0,fail:3,skip:0}}},"https://ipfs.yt":{metadata:{time:"2023-09-29T18:02:09.057685769Z",version:"dev",job_url:"https://github.com/laurentsenta/public-gateway-checker/actions/runs/6355261287",gateway_url:"https://ipfs.yt"},results:{DNSLink:{pass:0,fail:2,skip:0},CORS:{pass:0,fail:1,skip:0},"JSON-CBOR":{pass:0,fail:5,skip:0},IPNS:{pass:0,fail:4,skip:0},Others:{pass:0,fail:4,skip:0},"Block-CAR":{pass:0,fail:9,skip:0},Tar:{pass:0,fail:1,skip:0},UnixFS:{pass:0,fail:3,skip:0},Subdomains:{pass:0,fail:3,skip:0}}},"https://ipfs1.pixura.io":{metadata:{time:"2023-09-29T18:02:00.463783606Z",version:"dev",job_url:"https://github.com/laurentsenta/public-gateway-checker/actions/runs/6355261287",gateway_url:"https://ipfs1.pixura.io"},results:{DNSLink:{pass:0,fail:2,skip:0},CORS:{pass:0,fail:1,skip:0},"JSON-CBOR":{pass:0,fail:5,skip:0},IPNS:{pass:0,fail:4,skip:0},Others:{pass:0,fail:4,skip:0},"Block-CAR":{pass:0,fail:9,skip:0},Tar:{pass:0,fail:1,skip:0},UnixFS:{pass:0,fail:3,skip:0},Subdomains:{pass:0,fail:3,skip:0}}},"https://ipfsgateway.makersplace.com":{metadata:{time:"2023-09-29T18:02:06.97858572Z",version:"dev",job_url:"https://github.com/laurentsenta/public-gateway-checker/actions/runs/6355261287",gateway_url:"https://ipfsgateway.makersplace.com"},results:{DNSLink:{pass:0,fail:1,skip:0},CORS:{pass:0,fail:1,skip:0},"JSON-CBOR":{pass:0,fail:3,skip:0}}},"https://jorropo.net":{metadata:{time:"2023-09-29T18:02:11.365516443Z",version:"dev",job_url:"https://github.com/laurentsenta/public-gateway-checker/actions/runs/6355261287",gateway_url:"https://jorropo.net"},results:{DNSLink:{pass:0,fail:1,skip:0},CORS:{pass:0,fail:1,skip:0},"JSON-CBOR":{pass:0,fail:3,skip:0}}},"https://konubinix.eu":{metadata:{time:"2023-09-29T18:04:30.497088311Z",version:"dev",job_url:"https://github.com/laurentsenta/public-gateway-checker/actions/runs/6355261287",gateway_url:"https://konubinix.eu"},results:{DNSLink:{pass:0,fail:1,skip:0},CORS:{pass:0,fail:1,skip:0},"JSON-CBOR":{pass:0,fail:1,skip:0}}},"http://natoboram.mynetgear.com:8080":{metadata:{time:"2023-09-29T17:55:22.768172149Z",version:"dev",job_url:"https://github.com/laurentsenta/public-gateway-checker/actions/runs/6355261287",gateway_url:"http://natoboram.mynetgear.com:8080"},results:{DNSLink:{pass:0,fail:2,skip:0},CORS:{pass:0,fail:1,skip:0},"JSON-CBOR":{pass:0,fail:5,skip:0},IPNS:{pass:0,fail:4,skip:0},Others:{pass:0,fail:4,skip:0},"Block-CAR":{pass:0,fail:9,skip:0},Tar:{pass:0,fail:1,skip:0},UnixFS:{pass:0,fail:3,skip:0},Subdomains:{pass:0,fail:3,skip:0}}},"https://nftstorage.link":{metadata:{time:"2023-09-29T18:02:30.082327288Z",version:"dev",job_url:"https://github.com/laurentsenta/public-gateway-checker/actions/runs/6355261287",gateway_url:"https://nftstorage.link"},results:{DNSLink:{pass:0,fail:1,skip:0},CORS:{pass:0,fail:1,skip:0},"JSON-CBOR":{pass:0,fail:3,skip:0}}},"https://ninetailed.ninja":{metadata:{time:"2023-09-29T18:03:04.397356Z",version:"dev",job_url:"https://github.com/laurentsenta/public-gateway-checker/actions/runs/6355261287",gateway_url:"https://ninetailed.ninja"},results:{DNSLink:{pass:0,fail:1,skip:0},CORS:{pass:0,fail:1,skip:0},"JSON-CBOR":{pass:0,fail:3,skip:0}}},"https://permaweb.eu.org":{metadata:{time:"2023-09-29T18:02:57.74417796Z",version:"dev",job_url:"https://github.com/laurentsenta/public-gateway-checker/actions/runs/6355261287",gateway_url:"https://permaweb.eu.org"},results:{DNSLink:{pass:0,fail:1,skip:0},CORS:{pass:0,fail:1,skip:0},"JSON-CBOR":{pass:0,fail:3,skip:0}}},"https://permaweb.io":{metadata:{time:"2023-09-29T18:04:41.291780878Z",version:"dev",job_url:"https://github.com/laurentsenta/public-gateway-checker/actions/runs/6355261287",gateway_url:"https://permaweb.io"},results:{DNSLink:{pass:0,fail:2,skip:0},CORS:{pass:0,fail:1,skip:0},"JSON-CBOR":{pass:0,fail:5,skip:0},IPNS:{pass:0,fail:4,skip:0},Others:{pass:0,fail:4,skip:0},"Block-CAR":{pass:0,fail:9,skip:0},Tar:{pass:0,fail:1,skip:0},UnixFS:{pass:0,fail:3,skip:0},Subdomains:{pass:0,fail:3,skip:0}}},"https://ravencoinipfs-gateway.com":{metadata:{time:"2023-09-29T18:04:25.926333935Z",version:"dev",job_url:"https://github.com/laurentsenta/public-gateway-checker/actions/runs/6355261287",gateway_url:"https://ravencoinipfs-gateway.com"},results:{DNSLink:{pass:0,fail:2,skip:0},CORS:{pass:0,fail:1,skip:0},"JSON-CBOR":{pass:0,fail:5,skip:0},IPNS:{pass:0,fail:4,skip:0},Others:{pass:0,fail:4,skip:0},"Block-CAR":{pass:0,fail:9,skip:0},Tar:{pass:0,fail:1,skip:0},UnixFS:{pass:0,fail:3,skip:0},Subdomains:{pass:0,fail:3,skip:0}}},"https://search.ipfsgate.com":{metadata:{time:"2023-09-29T18:03:49.617210479Z",version:"dev",job_url:"https://github.com/laurentsenta/public-gateway-checker/actions/runs/6355261287",gateway_url:"https://search.ipfsgate.com"},results:{DNSLink:{pass:0,fail:2,skip:0},CORS:{pass:0,fail:1,skip:0},"JSON-CBOR":{pass:0,fail:5,skip:0},IPNS:{pass:0,fail:4,skip:0},Others:{pass:0,fail:4,skip:0},"Block-CAR":{pass:0,fail:9,skip:0},Tar:{pass:0,fail:1,skip:0},UnixFS:{pass:0,fail:3,skip:0},Subdomains:{pass:0,fail:3,skip:0}}},"https://storjipfs-gateway.com":{metadata:{time:"2023-09-29T18:03:26.328842849Z",version:"dev",job_url:"https://github.com/laurentsenta/public-gateway-checker/actions/runs/6355261287",gateway_url:"https://storjipfs-gateway.com"},results:{DNSLink:{pass:0,fail:1,skip:0},CORS:{pass:0,fail:1,skip:0},"JSON-CBOR":{pass:0,fail:3,skip:0}}},"https://storry.tv":{metadata:{time:"2023-09-29T18:03:25.739232057Z",version:"dev",job_url:"https://github.com/laurentsenta/public-gateway-checker/actions/runs/6355261287",gateway_url:"https://storry.tv"},results:{DNSLink:{pass:0,fail:1,skip:0},CORS:{pass:0,fail:1,skip:0},"JSON-CBOR":{pass:0,fail:3,skip:0}}},"https://tth-ipfs.com":{metadata:{time:"2023-09-29T18:03:58.377495645Z",version:"dev",job_url:"https://github.com/laurentsenta/public-gateway-checker/actions/runs/6355261287",gateway_url:"https://tth-ipfs.com"},results:{DNSLink:{pass:0,fail:1,skip:0},CORS:{pass:0,fail:1,skip:0},"JSON-CBOR":{pass:0,fail:3,skip:0}}},"https://twdragon.net":{metadata:{time:"2023-09-29T18:04:06.464924181Z",version:"dev",job_url:"https://github.com/laurentsenta/public-gateway-checker/actions/runs/6355261287",gateway_url:"https://twdragon.net"},results:{DNSLink:{pass:0,fail:1,skip:0},CORS:{pass:0,fail:1,skip:0},"JSON-CBOR":{pass:0,fail:3,skip:0}}},"https://via0.com":{metadata:{time:"2023-09-29T18:04:24.352335785Z",version:"dev",job_url:"https://github.com/laurentsenta/public-gateway-checker/actions/runs/6355261287",gateway_url:"https://via0.com"},results:{DNSLink:{pass:0,fail:1,skip:0},CORS:{pass:0,fail:1,skip:0},"JSON-CBOR":{pass:0,fail:3,skip:0}}},"https://video.oneloveipfs.com":{metadata:{time:"2023-09-29T18:04:19.895111678Z",version:"dev",job_url:"https://github.com/laurentsenta/public-gateway-checker/actions/runs/6355261287",gateway_url:"https://video.oneloveipfs.com"},results:{DNSLink:{pass:0,fail:1,skip:0},CORS:{pass:0,fail:1,skip:0},"JSON-CBOR":{pass:0,fail:3,skip:0}}},"https://w3s.link":{metadata:{time:"2023-09-29T18:04:40.218589645Z",version:"dev",job_url:"https://github.com/laurentsenta/public-gateway-checker/actions/runs/6355261287",gateway_url:"https://w3s.link"},results:{DNSLink:{pass:0,fail:1,skip:0},CORS:{pass:0,fail:1,skip:0},"JSON-CBOR":{pass:0,fail:3,skip:0}}}};var Co=new Tn("/sw.js");Co.register();dr();var mr=new Ie("App index");window.checker=new Ii;var Bo=Object.keys(gr);window.checker.checkGateways(Bo).catch(e=>{mr.error("Unexpected error"),mr.error(e)});})();
/*! Bundled license information:

ipfs-geoip/dist/index.min.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)
*/
return IpfsPublicGatewayChecker}));
